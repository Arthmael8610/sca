(function(a){a.fn.prependOnce=function(b,f){var e=a(this);if(typeof(f)=="undefined"){var d=new RegExp('class="(.*?)"');var c=d.exec(b);if(typeof c[1]!="undefined"){f="."+c[1]}}if(e.children(f).length<1){e.prepend(b);return true}else{return false}};a.fn.appendOnce=function(b,f){var e=a(this);if(typeof(f)=="undefined"){var d=new RegExp('class="(.*?)"');var c=d.exec(b);if(typeof c[1]!="undefined"){f="."+c[1]}}if(e.children(f).length<1){e.append(b);return true}else{return false}};a.fn.scrollergallery=function(c){var b={scrollerSettings:{},galleryType:"scroller",settings_fullwidthHack:"off",layout:"masonry",innerWidth:"0",design_bgpadding:"100",design_bgrotation:"10",design_parallaxeffect:"off",design_itemwidth:"",design_itemheight:"",settings_lightboxlibrary:"zoombox"};var c=a.extend(b,c);c.design_bgpadding=parseInt(c.design_bgpadding,10);c.design_bgrotation=parseInt(c.design_bgrotation,10);if(isNaN(parseInt(c.design_itemheight,10))==false){c.design_itemheight=parseInt(c.design_itemheight,10)}if(isNaN(parseInt(c.design_itemwidth,10))==false){c.design_itemheight=parseInt(c.design_itemheight,10)}this.each(function(){c.innerWidth=parseInt(c.innerWidth,10);var q=0,L=0,e=0,R=0,N=0,T=0;var d=a(this),K,m,F,z=[],t=0,o=0,H;var ab=false,M=[],ag=false;var af=0,v;var l=50;var Q="linear";var ac=0;var G=false;var y={left:"-100%",top:0};var w={left:"100%",top:0};var X={left:"0",top:"-100%"};var k={left:"0",top:"100%"};var ae="fromLeft";var U=0,S=0,s=0,r=0,E,A;var j=0;aa();function aa(){K=d.find(".inner").eq(0);if(c.innerWidth!=0){K.css("width",c.innerWidth)}v=K.children().length;if(d.children(".clip-bg").length>0){G=true}K.children().each(function(){var ak=a(this);var ao;if(ak.hasClass("sgitem-tobe")){ak.removeClass("sgitem-tobe");var ai="";var i="";var aj="";var am=false;if(!isNaN(parseInt(c.design_itemwidth,10))){i=" width: "+c.design_itemwidth+"px;"}if(!isNaN(parseInt(c.design_itemheight,10))){aj=" height: "+c.design_itemheight+"px;"}var an="data-itemwidth";if(ak.attr(an)&&ak.attr(an)!=""){if(ak.attr(an).indexOf("%")>-1){i=" width: "+ak.attr(an)+";"}else{i=" width: "+ak.attr(an)+"px;"}}var an="data-itemheight";if(ak.attr(an)&&ak.attr(an)!=""){if(ak.attr(an).indexOf("%")>-1){aj=" height: "+ak.attr(an)+";"}else{aj=" height: "+ak.attr(an)+"px;"}}if(i!=""){am=true}var al='<img src="'+ak.attr("data-src")+'" style="'+i+aj+'"/>';if(am){al='<div class="imgtobg" style="'+i+aj+" background-image:url("+ak.attr("data-src")+')"></div>'}if(typeof ak.attr("data-type")=="undefined"){ak.attr("data-type","image")}if(ak.attr("data-type")=="image"){ai="";if(ak.attr("data-link")!=""&&ak.attr("data-link")!=undefined){ai+='<a href="'+ak.attr("data-link")+'">'}ai+=al;if(ak.attr("data-link")!=""&&ak.attr("data-link")!=undefined){ai+="</a>"}ak.prepend(ai);if(ak.attr("data-link_wholecontainer")=="on"&&ak.attr("data-link")!=""&&ak.attr("data-link")!=undefined){ak.wrapInner('<a href="'+ak.attr("data-link")+'"></a>')}}if(ak.attr("data-type")=="imageandlightbox"){if(ak.find(".desc").length==0){if(c.settings_lightboxlibrary=="prettyPhoto"){ai='<a href="'+ak.attr("data-link")+'" rel="prettyPhoto';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){ai+="["+ak.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){ai='<a href="'+ak.attr("data-link")+'" class="zoombox"';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){ai+=' data-biggallery="'+ak.attr("data-lightboxgallery")+'"'}}ai+=">"}ai+=al;if(ak.find(".desc").length==0){ai+="</a>"}ak.prepend(ai);if(ak.attr("data-link_wholecontainer")=="on"&&ak.attr("data-link")!=""&&ak.attr("data-link")!=undefined){ai="";if(c.settings_lightboxlibrary=="prettyPhoto"){ai='<a href="'+ak.attr("data-link")+'" rel="prettyPhoto';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){ai+="["+ak.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){ai='<a href="'+ak.attr("data-link")+'" class="zoombox"';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){ai+=' data-biggallery="'+ak.attr("data-lightboxgallery")+'"'}}ai+="></a>";ak.wrapInner(ai)}}}ak.addClass("sgitem");if(ak.get(0).nodeName=="IMG"){ao=ak.get(0)}else{ao=ak.find("img").eq(0).get(0)}if(ao==undefined){p()}else{if(ao.complete==true&&ao.naturalWidth!=0){p()}else{jQuery(ao).bind("load",p)}}});setTimeout(J,5000)}function p(i){af++;if(af>=v){J()}}function J(){if(ag==true){return}ag=true;if(c.layout=="masonry"){K.masonry({columnWidth:1})}if(c.layout=="collage"){K.collagePlus({targetHeight:100})}e=K.width();d.bind("mousemove",f);if(c.type=="scroller"){P()}if(c.type=="arrows"){I()}if(c.settings_lightboxlibrary=="zoombox"){a(".zoombox").zoomBox()}if(c.settings_lightboxlibrary=="prettyPhoto"&&jQuery.fn.prettyPhoto){d.find("a[rel^='prettyPhoto']").prettyPhoto()}}function f(i){U=i.pageX-d.offset().left;S=i.pageY-d.offset().top;if(c.design_parallaxeffect=="on"){E=0;A=0;if(G){E=U/q-0.5;A=S/L-0.5}clearTimeout(j);j=setTimeout(D,10)}}function D(){d.find(".the-bg").eq(0).css({transform:"translate3d("+((E*6)-3)+"%,"+((A*6)-3)+"%,0)"});var i=12;H.css({transform:"translate3d("+((E*i)-(i/2))+"px,"+((A*i)-(i/2))+"px,0)"})}function P(){K=d.find(".inner").eq(0);d.scroller(c.scrollerSettings);H=d.find(".scroller").eq(0);H.addClass("con-items");g()}function I(){d.addClass("type-arrows");K=d.find(".inner").eq(0);K.wrap('<div class="con-items clip-inners"><div class="inners"></div></div>');m=d.find(".inners").eq(0);H=d.find(".con-items").eq(0);var aj=[];var i=0;K.children().each(function(){var ak=a(this);if(parseInt(ak.css("top"),10)==0){aj.push(parseInt(ak.css("left"),10))}});for(ac=aj.length-1;ac>0;ac--){i=-aj[ac];z.push(i)}z.push(0);var ai=aj.length-1;for(ac=1;ac<aj.length;ac++){i=e-aj[ai];z.push(i);ai--}o=parseInt(z.length/2,10);m.append(K.clone());m.append(K.clone());m.children().eq(0).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var ak=jQuery(this);if(ak.attr("data-prettyPhotoGallery")!=undefined&&ak.attr("data-prettyPhotoGallery")!=""){ak.children("a").attr("rel",(ak.children("a").attr("rel")+"1"))}});m.children().eq(1).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var ak=jQuery(this);if(ak.attr("data-prettyPhotoGallery")!=undefined&&ak.attr("data-prettyPhotoGallery")!=""){ak.children("a").attr("rel",(ak.children("a").attr("rel")+"2"))}});m.children().eq(2).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var ak=jQuery(this);if(ak.attr("data-prettyPhotoGallery")!=undefined&&ak.attr("data-prettyPhotoGallery")!=""){ak.children("a").attr("rel",(ak.children("a").attr("rel")+"3"))}});if(c.layout=="masonry"){m.children().addClass("masonry")}if(c.layout=="collage"){m.children().addClass("layout-collage")}m.children().eq(0).css("left",-e);m.children().eq(1).css("left",0);m.children().eq(2).css("left",e);d.append('<div class="arrowleft-con"><div class="arrowleft"></div></div>');d.append('<div class="arrowright-con"><div class="arrowright"></div></div>');t=l;m.css("left",t);if(c.settings_fullwidthHack=="on"){N=d.offset().left;T=jQuery(window).width()}d.find(".arrowright-con").bind("click",Y);d.find(".arrowleft-con").bind("click",V);g()}function V(){var i=o;i++;if(i>=z.length){x()}else{u(i)}}function Y(){var i=o;i--;if(i<0){x()}else{u(i)}}function x(){if(ab==true){return}if(o==0){t+=e;m.css("left",t)}if(o>=z.length-1){t-=e;m.css("left",t)}u(parseInt(z.length/2,10))}function h(){if(c.design_parallaxeffect=="on"){if(c.type=="arrows"){H.css({left:c.design_bgpadding,width:q-(c.design_bgpadding*2),height:L-(c.design_bgpadding*2),overflow:"hidden"});if(G){m.css({left:0});l=0}}}}function u(i){if(ab==true){return}ab=true;o=i;m.animate({left:z[i]+l},{queue:false,complete:n});t=z[i]+l;o=i}function n(){ab=false}function W(am){var al=a(this);var ak=(al.parent().children().index(al));if(ak==0){}if(M[ak]==true){return}var aj=am.pageX-al.offset().left;var i=am.pageY-al.offset().top;var ai=Z(aj,i,al.width(),al.height());if(ai=="left"){a(this).find(".desc").css(y)}if(ai=="right"){a(this).find(".desc").css(w)}if(ai=="top"){a(this).find(".desc").css(X)}if(ai=="bottom"){a(this).find(".desc").css(k)}a(this).find(".desc").eq(0).stop().animate({left:0,top:0},{duration:300,queue:true,complete:C,easing:Q});M[ak]=true}function O(an){var am=a(this);var al=(am.parent().children().index(am));var ak=an.pageX-am.offset().left;var i=an.pageY-am.offset().top;var aj=Z(ak,i,am.width(),am.height());var ai=y;if(aj=="left"){ai=y}if(aj=="right"){ai=w}if(aj=="top"){ai=X}if(aj=="bottom"){ai=k}a(this).find(".desc").eq(0).animate(ai,{duration:300,queue:true,complete:ad,easing:Q});M[al]=true}function C(){var aj=0;var ai=null;var i=null;if(a(this).parent().hasClass("sgitem")){ai=a(this).parent()}else{ai=a(this).parent().parent()}if(a(this).parent().parent().hasClass("inner")){i=a(this).parent().parent()}else{i=a(this).parent().parent().parent()}aj=(i.children().index(ai));M[aj]=false}function ad(){var ak=a(this);var aj=0;var ai=null;var i=null;if(a(this).parent().hasClass("sgitem")){ai=a(this).parent()}else{ai=a(this).parent().parent()}if(a(this).parent().parent().hasClass("inner")){i=a(this).parent().parent()}else{i=a(this).parent().parent().parent()}aj=(i.children().index(ai));M[aj]=false}function ah(i,am,ai,aj){var al=i-ai;var ak=am-aj;return(al*al)+(ak*ak)}function Z(an,am,ao,aj){var ak=ah(an,am,ao/2,0);var al=ah(an,am,ao/2,aj);var ap=ah(an,am,0,aj/2);var i=ah(an,am,ao,aj/2);var ai=Math.min(ak,al,ap,i);switch(ai){case ap:return"left";case i:return"right";case ak:return"top";case al:return"bottom"}}function g(){if(d.parent().hasClass("scroller-gallery-con")){F=d.parent();F.children(".preloader").fadeOut("slow")}q=d.width();L=d.height();if(d.css("opacity")==0){d.animate({opacity:1},600)}if(G){H.css({top:c.design_bgpadding})}if(d.find(".real-inner").length==1){K=d.find(".real-inner")}for(ac=0;ac<v;ac++){M[ac]=false}d.find(".inner").children().each(function(){var ai="page";var aj=a(this);if(aj.hasClass("a-image")){ai="image"}if(aj.hasClass("a-video")){ai="video"}aj.find(".desc").children("div").append('<div class="icon '+ai+'"></div>');var i="";if(aj.attr("data-type")=="image"&&aj.attr("data-link")!=undefined&&aj.attr("data-link")!=""){i+='<a href="'+aj.attr("data-link")+'">';i+="</a>"}if(aj.attr("data-type")=="imageandlightbox"){if(c.settings_lightboxlibrary=="prettyPhoto"){i='<a href="'+aj.attr("data-link")+'" rel="prettyPhoto';if(aj.attr("data-lightboxgallery")!=undefined&&aj.attr("data-lightboxgallery")!=""){i+="["+aj.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){i='<a href="'+aj.attr("data-link")+'" class="zoombox"';if(aj.attr("data-lightboxgallery")!=undefined&&aj.attr("data-lightboxgallery")!=""){i+=' data-biggallery="'+aj.attr("data-lightboxgallery")+'" data-biggallerythumbnail="'+aj.attr("data-src")+'"'}}i+=">";i+="</a>"}if(i!=""){aj.find(".fake-link").wrap(i)}});d.find(".inner").delegate(".sgitem","mouseenter",W);d.find(".inner").delegate(".sgitem","mouseleave",O);a(window).bind("resize",B);B();h()}function B(){q=d.width();L=d.height();if(c.settings_fullwidthHack=="on"){aux=0;aux=N+(jQuery(window).width()-T)/2;if(aux<0){aux=0}d.css("left",-aux)}h()}return this})};window.dzssg_init=function(b,c){a(b).scrollergallery(c)}})(jQuery);