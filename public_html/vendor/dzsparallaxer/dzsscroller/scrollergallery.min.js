(function(a){a.fn.prependOnce=function(b,f){var e=a(this);if(typeof(f)=="undefined"){var d=new RegExp('class="(.*?)"');var c=d.exec(b);if(typeof c[1]!="undefined"){f="."+c[1]}}if(e.children(f).length<1){e.prepend(b);return true}else{return false}};a.fn.appendOnce=function(b,f){var e=a(this);if(typeof(f)=="undefined"){var d=new RegExp('class="(.*?)"');var c=d.exec(b);if(typeof c[1]!="undefined"){f="."+c[1]}}if(e.children(f).length<1){e.append(b);return true}else{return false}};a.fn.scrollergallery=function(c){var b={scrollerSettings:{},settings_fullwidthHack:"off",layout:"masonry",innerWidth:"0",type:"scroller",design_bgpadding:"100",design_bgrotation:"10",design_parallaxeffect:"off",design_itemwidth:"",design_itemheight:"",settings_lightboxlibrary:"zoombox"};var c=a.extend(b,c);c.design_bgpadding=parseInt(c.design_bgpadding,10);c.design_bgrotation=parseInt(c.design_bgrotation,10);if(isNaN(parseInt(c.design_itemheight,10))==false){c.design_itemheight=parseInt(c.design_itemheight,10)}if(isNaN(parseInt(c.design_itemwidth,10))==false){c.design_itemheight=parseInt(c.design_itemheight,10)}this.each(function(){c.innerWidth=parseInt(c.innerWidth,10);var r=0,M=0,e=0,S=0,O=0,U=0;var d=a(this),L,n,G,A=[],u=0,p=0,I;var ac=false,N=[],ah=false;var ag=0,w;var m=50;var R="linear";var ad=0;var H=false;var z={left:"-100%",top:0};var x={left:"100%",top:0};var Y={left:"0",top:"-100%"};var l={left:"0",top:"100%"};var af="fromLeft";var V=0,T=0,t=0,s=0,F,B;var j=0;ab();function ab(){L=d.find(".inner").eq(0);if(c.innerWidth!=0){L.css("width",c.innerWidth)}w=L.children().length;if(d.children(".clip-bg").length>0){H=true}L.children().each(function(){var al=a(this);var ap;if(al.hasClass("sgitem-tobe")){al.removeClass("sgitem-tobe");var aj="";var i="";var ak="";var an=false;if(!isNaN(parseInt(c.design_itemwidth,10))){i=" width: "+c.design_itemwidth+"px;"}if(!isNaN(parseInt(c.design_itemheight,10))){ak=" height: "+c.design_itemheight+"px;"}var ao="data-itemwidth";if(al.attr(ao)&&al.attr(ao)!=""){if(al.attr(ao).indexOf("%")>-1){i=" width: "+al.attr(ao)+";"}else{i=" width: "+al.attr(ao)+"px;"}}var ao="data-itemheight";if(al.attr(ao)&&al.attr(ao)!=""){if(al.attr(ao).indexOf("%")>-1){ak=" height: "+al.attr(ao)+";"}else{ak=" height: "+al.attr(ao)+"px;"}}if(i!=""){an=true}if(c.type=="justmasonry"){if(i==""||ak==""){an=false;ak="";i=""}}var am='<img src="'+al.attr("data-src")+'" style="'+i+ak+'"/>';if(an){am='<div class="imgtobg" style="'+i+ak+" background-image:url("+al.attr("data-src")+')"></div>'}if(typeof al.attr("data-type")=="undefined"){al.attr("data-type","image")}if(al.attr("data-type")=="image"){aj="";if(al.attr("data-link")!=""&&al.attr("data-link")!=undefined){aj+='<a href="'+al.attr("data-link")+'">'}aj+=am;if(al.attr("data-link")!=""&&al.attr("data-link")!=undefined){aj+="</a>"}al.prepend(aj);if(al.attr("data-link_wholecontainer")=="on"&&al.attr("data-link")!=""&&al.attr("data-link")!=undefined){al.wrapInner('<a href="'+al.attr("data-link")+'"></a>')}}if(al.attr("data-type")=="imageandlightbox"){if(al.find(".desc").length==0){if(c.settings_lightboxlibrary=="prettyPhoto"){aj='<a href="'+al.attr("data-link")+'" rel="prettyPhoto';if(al.attr("data-lightboxgallery")!=undefined&&al.attr("data-lightboxgallery")!=""){aj+="["+al.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){aj='<a href="'+al.attr("data-link")+'" class="zoombox"';if(al.attr("data-lightboxgallery")!=undefined&&al.attr("data-lightboxgallery")!=""){aj+=' data-biggallery="'+al.attr("data-lightboxgallery")+'"'}}aj+=">"}aj+=am;if(al.find(".desc").length==0){aj+="</a>"}al.prepend(aj);if(al.attr("data-link_wholecontainer")=="on"&&al.attr("data-link")!=""&&al.attr("data-link")!=undefined){aj="";if(c.settings_lightboxlibrary=="prettyPhoto"){aj='<a href="'+al.attr("data-link")+'" rel="prettyPhoto';if(al.attr("data-lightboxgallery")!=undefined&&al.attr("data-lightboxgallery")!=""){aj+="["+al.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){aj='<a href="'+al.attr("data-link")+'" class="zoombox"';if(al.attr("data-lightboxgallery")!=undefined&&al.attr("data-lightboxgallery")!=""){aj+=' data-biggallery="'+al.attr("data-lightboxgallery")+'"'}}aj+="></a>";al.wrapInner(aj)}}}al.addClass("sgitem");if(al.get(0).nodeName=="IMG"){ap=al.get(0)}else{ap=al.find("img").eq(0).get(0)}if(ap==undefined){q()}else{if(ap.complete==true&&ap.naturalWidth!=0){q()}else{jQuery(ap).bind("load",q)}}});setTimeout(K,5000)}function q(i){ag++;if(ag>=w){K()}}function K(){if(ah==true){return}ah=true;if(c.layout=="masonry"){L.masonry({columnWidth:1})}if(c.layout=="collage"){L.collagePlus({targetHeight:100})}e=L.width();d.bind("mousemove",f);if(c.type=="scroller"){Q()}if(c.type=="arrows"){J()}if(c.type=="justmasonry"){k()}if(c.settings_lightboxlibrary=="zoombox"){a(".zoombox").zoomBox()}if(c.settings_lightboxlibrary=="prettyPhoto"&&jQuery.fn.prettyPhoto){d.find("a[rel^='prettyPhoto']").prettyPhoto()}}function f(i){V=i.pageX-d.offset().left;T=i.pageY-d.offset().top;if(c.design_parallaxeffect=="on"){F=0;B=0;if(H){F=V/r-0.5;B=T/M-0.5}clearTimeout(j);j=setTimeout(E,10)}}function E(){d.find(".the-bg").eq(0).css({transform:"translate3d("+((F*6)-3)+"%,"+((B*6)-3)+"%,0)"});var i=12;I.css({transform:"translate3d("+((F*i)-(i/2))+"px,"+((B*i)-(i/2))+"px,0)"})}function Q(){L=d.find(".inner").eq(0);d.scroller(c.scrollerSettings);I=d.find(".scroller").eq(0);I.addClass("con-items");g()}function k(){d.addClass("type-"+c.type);g()}function J(){d.addClass("type-arrows");L=d.find(".inner").eq(0);L.wrap('<div class="con-items clip-inners"><div class="inners"></div></div>');n=d.find(".inners").eq(0);I=d.find(".con-items").eq(0);var ak=[];var i=0;L.children().each(function(){var al=a(this);if(parseInt(al.css("top"),10)==0){ak.push(parseInt(al.css("left"),10))}});for(ad=ak.length-1;ad>0;ad--){i=-ak[ad];A.push(i)}A.push(0);var aj=ak.length-1;for(ad=1;ad<ak.length;ad++){i=e-ak[aj];A.push(i);aj--}p=parseInt(A.length/2,10);n.append(L.clone());n.append(L.clone());n.children().eq(0).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var al=jQuery(this);if(al.attr("data-prettyPhotoGallery")!=undefined&&al.attr("data-prettyPhotoGallery")!=""){al.children("a").attr("rel",(al.children("a").attr("rel")+"1"))}});n.children().eq(1).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var al=jQuery(this);if(al.attr("data-prettyPhotoGallery")!=undefined&&al.attr("data-prettyPhotoGallery")!=""){al.children("a").attr("rel",(al.children("a").attr("rel")+"2"))}});n.children().eq(2).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var al=jQuery(this);if(al.attr("data-prettyPhotoGallery")!=undefined&&al.attr("data-prettyPhotoGallery")!=""){al.children("a").attr("rel",(al.children("a").attr("rel")+"3"))}});if(c.layout=="masonry"){n.children().addClass("masonry")}if(c.layout=="collage"){n.children().addClass("layout-collage")}n.children().eq(0).css("left",-e);n.children().eq(1).css("left",0);n.children().eq(2).css("left",e);d.append('<div class="arrowleft-con"><div class="arrowleft"></div></div>');d.append('<div class="arrowright-con"><div class="arrowright"></div></div>');u=m;n.css("left",u);if(c.settings_fullwidthHack=="on"){O=d.offset().left;U=jQuery(window).width()}d.find(".arrowright-con").bind("click",Z);d.find(".arrowleft-con").bind("click",W);g()}function W(){var i=p;i++;if(i>=A.length){y()}else{v(i)}}function Z(){var i=p;i--;if(i<0){y()}else{v(i)}}function y(){if(ac==true){return}if(p==0){u+=e;n.css("left",u)}if(p>=A.length-1){u-=e;n.css("left",u)}v(parseInt(A.length/2,10))}function h(){if(c.design_parallaxeffect=="on"){if(c.type=="arrows"){I.css({left:c.design_bgpadding,width:r-(c.design_bgpadding*2),height:M-(c.design_bgpadding*2),overflow:"hidden"});if(H){n.css({left:0});m=0}}}}function v(i){if(ac==true){return}ac=true;p=i;n.animate({left:A[i]+m},{queue:false,complete:o});u=A[i]+m;p=i}function o(){ac=false}function X(an){var am=a(this);var al=(am.parent().children().index(am));if(al==0){}if(N[al]==true){return}var ak=an.pageX-am.offset().left;var i=an.pageY-am.offset().top;var aj=aa(ak,i,am.width(),am.height());if(aj=="left"){a(this).find(".desc").css(z)}if(aj=="right"){a(this).find(".desc").css(x)}if(aj=="top"){a(this).find(".desc").css(Y)}if(aj=="bottom"){a(this).find(".desc").css(l)}a(this).find(".desc").eq(0).stop().animate({left:0,top:0},{duration:300,queue:true,complete:D,easing:R});N[al]=true}function P(ao){var an=a(this);var am=(an.parent().children().index(an));var al=ao.pageX-an.offset().left;var i=ao.pageY-an.offset().top;var ak=aa(al,i,an.width(),an.height());var aj=z;if(ak=="left"){aj=z}if(ak=="right"){aj=x}if(ak=="top"){aj=Y}if(ak=="bottom"){aj=l}a(this).find(".desc").eq(0).animate(aj,{duration:300,queue:true,complete:ae,easing:R});N[am]=true}function D(){var ak=0;var aj=null;var i=null;if(a(this).parent().hasClass("sgitem")){aj=a(this).parent()}else{aj=a(this).parent().parent()}if(a(this).parent().parent().hasClass("inner")){i=a(this).parent().parent()}else{i=a(this).parent().parent().parent()}ak=(i.children().index(aj));N[ak]=false}function ae(){var al=a(this);var ak=0;var aj=null;var i=null;if(a(this).parent().hasClass("sgitem")){aj=a(this).parent()}else{aj=a(this).parent().parent()}if(a(this).parent().parent().hasClass("inner")){i=a(this).parent().parent()}else{i=a(this).parent().parent().parent()}ak=(i.children().index(aj));N[ak]=false}function ai(i,an,aj,ak){var am=i-aj;var al=an-ak;return(am*am)+(al*al)}function aa(ao,an,ap,ak){var al=ai(ao,an,ap/2,0);var am=ai(ao,an,ap/2,ak);var aq=ai(ao,an,0,ak/2);var i=ai(ao,an,ap,ak/2);var aj=Math.min(al,am,aq,i);switch(aj){case aq:return"left";case i:return"right";case al:return"top";case am:return"bottom"}}function g(){if(d.parent().hasClass("scroller-gallery-con")){G=d.parent();G.children(".preloader").fadeOut("slow")}r=d.width();M=d.height();if(d.css("opacity")==0){d.animate({opacity:1},600)}if(H){I.css({top:c.design_bgpadding})}if(d.find(".real-inner").length==1){L=d.find(".real-inner")}for(ad=0;ad<w;ad++){N[ad]=false}d.find(".inner").children().each(function(){var aj="page";var ak=a(this);if(ak.hasClass("a-image")){aj="image"}if(ak.hasClass("a-video")){aj="video"}ak.find(".desc").children("div").append('<div class="icon '+aj+'"></div>');var i="";if(ak.attr("data-type")=="image"&&ak.attr("data-link")!=undefined&&ak.attr("data-link")!=""){i+='<a href="'+ak.attr("data-link")+'">';i+="</a>"}if(ak.attr("data-type")=="imageandlightbox"){if(c.settings_lightboxlibrary=="prettyPhoto"){i='<a href="'+ak.attr("data-link")+'" rel="prettyPhoto';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){i+="["+ak.attr("data-lightboxgallery")+']"'}}if(c.settings_lightboxlibrary=="zoombox"){i='<a href="'+ak.attr("data-link")+'" class="zoombox"';if(ak.attr("data-lightboxgallery")!=undefined&&ak.attr("data-lightboxgallery")!=""){i+=' data-biggallery="'+ak.attr("data-lightboxgallery")+'" data-biggallerythumbnail="'+ak.attr("data-src")+'"'}}i+=">";i+="</a>"}if(i!=""){ak.find(".fake-link").wrap(i)}});d.find(".inner").delegate(".sgitem","mouseenter",X);d.find(".inner").delegate(".sgitem","mouseleave",P);a(window).bind("resize",C);C();h()}function C(){r=d.width();M=d.height();if(c.settings_fullwidthHack=="on"){aux=0;aux=O+(jQuery(window).width()-U)/2;if(aux<0){aux=0}d.css("left",-aux)}h()}return this})};window.dzssg_init=function(b,c){a(b).scrollergallery(c)}})(jQuery);