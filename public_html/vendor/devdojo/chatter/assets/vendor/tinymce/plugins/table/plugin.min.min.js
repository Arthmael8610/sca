!function(h,g){function l(f,e){for(var o,n=[],m=0;m<f.length;++m){if(o=i[f[m]]||j(f[m]),!o){throw"module definition dependecy not found: "+f[m]}n.push(o)}e.apply(null,n)}function k(b,f,c){if("string"!=typeof b){throw"invalid module definition, module id must be defined and be a string"}if(f===g){throw"invalid module definition, dependencies must be specified"}if(c===g){throw"invalid module definition, definition function must be specified"}l(f,function(){i[b]=c.apply(null,arguments)})}function j(a){for(var n=h,m=a.split(/[.\/]/),f=0;f<m.length;++f){if(!n[m[f]]){return}n=n[m[f]]}return n}var i={};k("tinymce/tableplugin/Utils",["tinymce/Env"],function(e){function d(m,c){return parseInt(m.getAttribute(c)||1,10)}function f(a){(!e.ie||e.ie>9)&&(a.hasChildNodes()||(a.innerHTML='<br data-mce-bogus="1" />'))}return{getSpanVal:d,paddCell:f}}),k("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(b,p,o){var n=b.each,m=o.getSpanVal;return function(aD,aC,aB){function aA(){aD.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function az(q){return q===aD.getBody()}function ay(q,r){return q?(r=b.map(r.split(","),function(s){return s.toLowerCase()}),b.grep(q.childNodes,function(s){return -1!==b.inArray(r,s.nodeName.toLowerCase())})):[]}function ax(){var q=0;U=[],f=0,n(["thead","tbody","tfoot"],function(r){var t=ay(aC,r)[0],s=ay(t,"tr");n(s,function(v,u){u+=q,n(ay(v,"td,th"),function(w,B){var A,z,y,x;if(U[u]){for(;U[u][B];){B++}}for(y=m(w,"rowspan"),x=m(w,"colspan"),z=u;u+y>z;z++){for(U[z]||(U[z]=[]),A=B;B+x>A;A++){U[z][A]={part:r,real:z==u&&A==B,elm:w,rowspan:y,colspan:x}}}f=Math.max(f,B+1)})}),q+=s.length})}function aw(q){return aD.fire("newrow",{node:q}),q}function av(q){return aD.fire("newcell",{node:q}),q}function au(r,q){return r=r.cloneNode(q),r.removeAttribute("id"),r}function at(r,q){var s;return s=U[q],s?s[r]:void 0}function ar(r,q,s){r&&(s=parseInt(s,10),1===s?r.removeAttribute(q,1):r.setAttribute(q,s,1))}function aq(q){return q&&(!!a.getAttrib(q.elm,"data-mce-selected")||q==aB)}function ap(){var q=[];return n(aC.rows,function(r){n(r.cells,function(s){return a.getAttrib(s,"data-mce-selected")||aB&&s==aB.elm?(q.push(r),!1):void 0})}),q}function ao(){var q=a.createRng();az(aC)||(q.setStartAfter(aC),q.setEndAfter(aC),c.setRng(q),a.remove(aC))}function an(q){var s,r={};return aD.settings.table_clone_elements!==!1&&(r=b.makeMap((aD.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),b.walk(q,function(t){var u;return 3==t.nodeType?(n(a.getParents(t.parentNode,null,q).reverse(),function(v){r[v.nodeName]&&(v=au(v,!1),s?u&&u.appendChild(v):s=u=v,u=v)}),u&&(u.innerHTML=p.ie&&p.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),q=au(q,!1),av(q),ar(q,"rowSpan",1),ar(q,"colSpan",1),s?q.appendChild(s):o.paddCell(q),q}function am(){var r,q=a.createRng();return n(a.select("tr",aC),function(s){0===s.cells.length&&a.remove(s)}),0===a.select("tr",aC).length?(q.setStartBefore(aC),q.setEndBefore(aC),c.setRng(q),void a.remove(aC)):(n(a.select("thead,tbody,tfoot",aC),function(s){0===s.rows.length&&a.remove(s)}),ax(),void (e&&(r=U[Math.min(U.length-1,e.y)],r&&(c.select(r[Math.min(r.length-1,e.x)].elm,!0),c.collapse(!0)))))}function al(y,x,w,v){var u,t,s,r,q;for(u=U[x][y].elm.parentNode,s=1;w>=s;s++){if(u=a.getNext(u,"tr")){for(t=y;t>=0;t--){if(q=U[x+s][t].elm,q.parentNode==u){for(r=1;v>=r;r++){a.insertAfter(an(q),q)}break}}if(-1==t){for(r=1;v>=r;r++){u.insertBefore(an(u.cells[0]),u.cells[0])}}}}}function ak(){n(U,function(r,q){n(r,function(s,w){var v,u,t;if(aq(s)&&(s=s.elm,v=m(s,"colspan"),u=m(s,"rowspan"),v>1||u>1)){for(ar(s,"rowSpan",1),ar(s,"colSpan",1),t=0;v-1>t;t++){a.insertAfter(an(s),s)}al(w,q,u-1,v)}})})}function aj(F,E,D){var C,B,A,z,y,x,w,s,r,q,I;if(F?(C=Z(F),B=C.x,A=C.y,z=B+(E-1),y=A+(D-1)):(e=d=null,n(U,function(u,t){n(u,function(v,J){aq(v)&&(e||(e={x:J,y:t}),d={x:J,y:t})})}),e&&(B=e.x,A=e.y,z=d.x,y=d.y)),s=at(B,A),r=at(z,y),s&&r&&s.part==r.part){ak(),ax(),s=at(B,A).elm;var H=z-B+1,G=y-A+1;for(H===f&&G===U.length&&(H=1,G=1),H===f&&G>1&&(G=1),ar(s,"colSpan",H),ar(s,"rowSpan",G),w=A;y>=w;w++){for(x=B;z>=x;x++){U[w]&&U[w][x]&&(F=U[w][x].elm,F!=s&&(q=b.grep(F.childNodes),n(q,function(t){s.appendChild(t)}),q.length&&(q=b.grep(s.childNodes),I=0,n(q,function(t){"BR"==t.nodeName&&I++<q.length-1&&s.removeChild(t)})),a.remove(F)))}}am()}}function ai(A){var z,y,x,w,v,u,t,s,r,q;if(n(U,function(B,C){return n(B,function(D){return aq(D)&&(D=D.elm,v=D.parentNode,u=aw(au(v,!1)),z=C,A)?!1:void 0}),A?!z:void 0}),z!==g){for(w=0,q=0;w<U[0].length;w+=q){if(U[z][w]&&(y=U[z][w].elm,q=m(y,"colspan"),y!=x)){if(A){if(z>0&&U[z-1][w]&&(s=U[z-1][w].elm,r=m(s,"rowSpan"),r>1)){ar(s,"rowSpan",r+1);continue}}else{if(r=m(y,"rowspan"),r>1){ar(y,"rowSpan",r+1);continue}}t=an(y),ar(t,"colSpan",y.colSpan),u.appendChild(t),x=y}}u.hasChildNodes()&&(A?v.parentNode.insertBefore(u,v):a.insertAfter(u,v))}}function ah(r){var q,s;n(U,function(t){return n(t,function(v,u){return aq(v)&&(q=u,r)?!1:void 0}),r?!q:void 0}),n(U,function(x,w){var v,u,t;x[q]&&(v=x[q].elm,v!=s&&(t=m(v,"colspan"),u=m(v,"rowspan"),1==t?r?(v.parentNode.insertBefore(an(v),v),al(q,w,u-1,t)):(a.insertAfter(an(v),v),al(q,w,u-1,t)):ar(v,"colSpan",v.colSpan+1),s=v))})}function ag(q){return b.grep(af(q),aq)}function af(r){var q=[];return n(r,function(s){n(s,function(t){q.push(t)})}),q}function ae(){var q=[];if(az(aC)){if(1==U[0].length){return}if(ag(U).length==af(U).length){return}}n(U,function(r){n(r,function(t,s){aq(t)&&-1===b.inArray(q,s)&&(n(U,function(v){var u,w=v[s].elm;u=m(w,"colSpan"),u>1?ar(w,"colSpan",u-1):a.remove(w)}),q.push(s))})}),am()}function ad(){function r(t){var s,u;n(t.cells,function(v){var w=m(v,"rowSpan");w>1&&(ar(v,"rowSpan",w-1),s=Z(v),al(s.x,s.y,1,1))}),s=Z(t.cells[0]),n(U[s.y],function(w){var v;w=w.elm,w!=u&&(v=m(w,"rowSpan"),1>=v?a.remove(w):ar(w,"rowSpan",v-1),u=w)})}var q;q=ap(),az(aC)&&q.length==aC.rows.length||(n(q.reverse(),function(s){r(s)}),am())}function ac(){var q=ap();if(!az(aC)||q.length!=aC.rows.length){return a.remove(q),am(),q}}function ab(){var q=ap();return n(q,function(r,s){q[s]=au(r,!0)}),q}function aa(q,v){var u,t=ap(),s=t[v?0:t.length-1],r=s.cells.length;q&&(u=b.map(q,function(w){return w.cloneNode(!0)}),n(U,function(x){var w;return r=0,n(x,function(y){y.real&&(r+=y.colspan),y.elm.parentNode==s&&(w=1)}),w?!1:void 0}),v||u.reverse(),n(u,function(x){var w,z,y=x.cells.length;for(aw(x),w=0;y>w;w++){z=x.cells[w],av(z),ar(z,"colSpan",1),ar(z,"rowSpan",1)}for(w=y;r>w;w++){x.appendChild(av(an(x.cells[y-1])))}for(w=r;y>w;w++){a.remove(x.cells[w])}v?s.parentNode.insertBefore(x,s):a.insertAfter(x,s)}),aA())}function Z(r){var q;return n(U,function(t,s){return n(t,function(v,u){return v.elm==r?(q={x:u,y:s},!1):void 0}),!q}),q}function Y(q){e=Z(q)}function X(){var r,q;return r=q=0,n(U,function(t,s){n(t,function(x,w){var v,u;aq(x)&&(x=U[s][w],w>r&&(r=w),s>q&&(q=s),x.real&&(v=x.colspan-1,u=x.rowspan-1,v&&w+v>r&&(r=w+v),u&&s+u>q&&(q=s+u)))})}),{x:r,y:q}}function W(A){var z,y,x,w,v,u,t,s,r,q;if(d=Z(A),e&&d){for(z=Math.min(e.x,d.x),y=Math.min(e.y,d.y),x=Math.max(e.x,d.x),w=Math.max(e.y,d.y),v=x,u=w,q=y;w>=q;q++){for(r=z;x>=r;r++){A=U[q][r],A.real&&(t=A.colspan-1,s=A.rowspan-1,t&&r+t>v&&(v=r+t),s&&q+s>u&&(u=q+s))}}for(aA(),q=y;u>=q;q++){for(r=z;v>=r;r++){U[q][r]&&a.setAttrib(U[q][r].elm,"data-mce-selected","1")}}}}function V(r,q){var u,t,s;u=Z(r),t=u.y*f+u.x;do{if(t+=q,s=at(t%f,Math.floor(t/f)),!s){break}if(s.elm!=r){return c.select(s.elm,!0),a.isEmpty(s.elm)&&c.collapse(!0),!0}}while(s.elm==r);return !1}var U,f,e,d,c=aD.selection,a=c.dom;aC=aC||a.getParent(c.getStart(!0),"table"),ax(),aB=aB||a.getParent(c.getStart(!0),"th,td"),aB&&(e=Z(aB),d=X(),aB=at(e.x,e.y)),b.extend(this,{deleteTable:ao,split:ak,merge:aj,insertRow:ai,insertCol:ah,deleteCols:ae,deleteRows:ad,cutRows:ac,copyRows:ab,pasteRows:aa,getPos:Z,setStartCell:Y,setEndCell:W,moveRelIdx:V,refresh:ax})}}),k("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(n,m,s,r,q){var p=r.each,o=q.getSpanVal;return function(f){function e(){function t(I){function H(T,S){var R=T?"previousSibling":"nextSibling",Q=f.dom.getParent(S,"tr"),P=Q[R];if(P){return w(f,S,P,T),I.preventDefault(),!0}var O=f.dom.getParent(Q,"table"),N=Q.parentNode,v=N.nodeName.toLowerCase();if("tbody"===v||v===(T?"tfoot":"thead")){var u=G(T,O,N,"tbody");if(null!==u){return E(T,u,S)}}return D(T,Q,R,O)}function G(v,u,R,Q){var P=f.dom.select(">"+Q,u),O=P.indexOf(R);if(v&&0===O||!v&&O===P.length-1){return F(v,u)}if(-1===O){var N="thead"===R.tagName.toLowerCase()?0:P.length-1;return P[N]}return P[O+(v?-1:1)]}function F(v,u){var O=v?"thead":"tfoot",N=f.dom.select(">"+O,u);return 0!==N.length?N[0]:null}function E(v,u,O){var N=C(u,v);return N&&w(f,O,N,v),I.preventDefault(),!0}function D(v,u,R,Q){var P=Q[R];if(P){return B(P),!0}var O=f.dom.getParent(Q,"td,th");if(O){return H(v,O,I)}var N=C(u,!v);return B(N),I.preventDefault(),!1}function C(v,u){var N=v&&v[u?"lastChild":"firstChild"];return N&&"BR"===N.nodeName?f.dom.getParent(N,"td,th"):N}function B(u){f.selection.setCursorLocation(u,0)}function A(){return K==n.UP||K==n.DOWN}function z(v){var u=v.selection.getNode(),N=v.dom.getParent(u,"tr");return null!==N}function y(v){for(var u=0,N=v;N.previousSibling;){N=N.previousSibling,u+=o(N,"colspan")}return u}function x(v,u){var O=0,N=0;return p(v.children,function(P,Q){return O+=o(P,"colspan"),N=Q,O>u?!1:void 0}),N}function w(v,u,S,R){var Q=y(f.dom.getParent(u,"td,th")),P=x(S,Q),O=S.childNodes[P],N=C(O,R);B(N||O)}function M(v){var u=f.selection.getNode(),O=f.dom.getParent(u,"td,th"),N=f.dom.getParent(v,"td,th");return O&&O!==N&&L(O,N)}function L(v,u){return f.dom.getParent(v,"TABLE")===f.dom.getParent(u,"TABLE")}var K=I.keyCode;if(A()&&z(f)){var J=f.selection.getNode();m.setEditorTimeout(f,function(){M(J)&&H(!I.shiftKey&&K===n.UP,J,I)},0)}}f.on("KeyDown",function(u){t(u)})}function d(){function t(v,u){var y,x=u.ownerDocument,w=x.createRange();return w.setStartBefore(u),w.setEnd(v.endContainer,v.endOffset),y=x.createElement("body"),y.appendChild(w.cloneContents()),0===y.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}f.on("KeyDown",function(u){var x,w,v=f.dom;37!=u.keyCode&&38!=u.keyCode||(x=f.selection.getRng(),w=v.getParent(x.startContainer,"table"),w&&f.getBody().firstChild==w&&t(x,w)&&(x=v.createRng(),x.setStartBefore(w),x.setEndBefore(w),f.selection.setRng(x),u.preventDefault()))})}function c(){f.on("KeyDown SetContent VisualAid",function(){var t;for(t=f.getBody().lastChild;t;t=t.previousSibling){if(3==t.nodeType){if(t.nodeValue.length>0){break}}else{if(1==t.nodeType&&("BR"==t.tagName||!t.getAttribute("data-mce-bogus"))){break}}}t&&"TABLE"==t.nodeName&&(f.settings.forced_root_block?f.dom.add(f.getBody(),f.settings.forced_root_block,f.settings.forced_root_block_attrs,s.ie&&s.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):f.dom.add(f.getBody(),"br",{"data-mce-bogus":"1"}))}),f.on("PreProcess",function(u){var t=u.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&f.dom.remove(t)})}function b(){function u(D,C,B,A){var z,y,x,w=3,v=D.dom.getParent(C.startContainer,"TABLE");return v&&(z=v.parentNode),y=C.startContainer.nodeType==w&&0===C.startOffset&&0===C.endOffset&&A&&("TR"==B.nodeName||B==z),x=("TD"==B.nodeName||"TH"==B.nodeName)&&!A,y||x}function t(){var v=f.selection.getRng(),y=f.selection.getNode(),x=f.dom.getParent(v.startContainer,"TD,TH");if(u(f,v,y,x)){x||(x=y);for(var w=x.lastChild;w.lastChild;){w=w.lastChild}3==w.nodeType&&(v.setEnd(w,w.data.length),f.selection.setRng(v))}}f.on("KeyDown",function(){t()}),f.on("MouseDown",function(v){2!=v.button&&t()})}function a(){function t(v){f.selection.select(v,!0),f.selection.collapse(!0)}function u(v){f.$(v).empty(),q.paddCell(v)}f.on("keydown",function(z){if((z.keyCode==n.DELETE||z.keyCode==n.BACKSPACE)&&!z.isDefaultPrevented()){var y,x,w,v;if(y=f.dom.getParent(f.selection.getStart(),"table")){if(x=f.dom.select("td,th",y),w=r.grep(x,function(A){return !!f.dom.getAttrib(A,"data-mce-selected")}),0===w.length){return v=f.dom.getParent(f.selection.getStart(),"td,th"),void (f.selection.isCollapsed()&&v&&f.dom.isEmpty(v)&&(z.preventDefault(),u(v),t(v)))}z.preventDefault(),f.undoManager.transact(function(){x.length==w.length?f.execCommand("mceTableDelete"):(r.each(w,u),t(w[0]))})}}})}a(),s.webkit&&(e(),b()),s.gecko&&(d(),c()),s.ie>9&&(d(),c())}}),k("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,d,f){return function(z,y){function x(m){z.getBody().style.webkitUserSelect="",(m||b)&&(z.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),b=!1)}function w(n,m){return n&&m?n===c.getParent(m,"table"):!1}function v(m){var B,o,n=m.target;if(!q&&n!==r&&(r=n,s&&t)){if(o=c.getParent(n,"td,th"),w(s,o)||(o=c.getParent(s,"td,th")),t===o&&!b){return}if(y(!0),w(s,o)){m.preventDefault(),u||(u=new e(z,s,t),z.getBody().style.webkitUserSelect="none"),u.setEndCell(o),b=!0,B=z.selection.getSel();try{B.removeAllRanges?B.removeAllRanges():B.empty()}catch(A){}}}}var u,t,s,r,q,c=z.dom,b=!0,a=function(){t=u=s=r=null,y(!1)};return z.on("SelectionChange",function(m){b&&m.stopImmediatePropagation()},!0),z.on("MouseDown",function(m){2==m.button||q||(x(),t=c.getParent(m.target,"td,th"),s=c.getParent(t,"table"))}),z.on("mouseover",v),z.on("remove",function(){c.unbind(z.getDoc(),"mouseover",v),x()}),z.on("MouseUp",function(){function n(D,F){var E=new d(D,D);do{if(3==D.nodeType&&0!==f.trim(D.nodeValue).length){return void (F?C.setStart(D,0):C.setEnd(D,D.nodeValue.length))}if("BR"==D.nodeName){return void (F?C.setStartBefore(D):C.setEndBefore(D))}}while(D=F?E.next():E.prev())}var C,B,A,p,o,m=z.selection;if(t){if(u&&(z.getBody().style.webkitUserSelect=""),B=c.select("td[data-mce-selected],th[data-mce-selected]"),B.length>0){C=c.createRng(),p=B[0],C.setStartBefore(p),C.setEndAfter(p),n(p,1),A=new d(p,c.getParent(B[0],"table"));do{if("TD"==p.nodeName||"TH"==p.nodeName){if(!c.getAttrib(p,"data-mce-selected")){break}o=p}}while(p=A.next());n(o),m.setRng(C)}z.nodeChanged(),a()}}),z.on("KeyUp Drop SetContent",function(m){x("setcontent"==m.type),a(),q=!1}),z.on("ObjectResizeStart ObjectResized",function(m){q="objectresized"!=m.type}),{clear:x}}}),k("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,d){var f=e.each;return function(x){function w(){var m=x.settings.color_picker_callback;return m?function(){var n=this;m.call(x,function(o){n.value(o).fire("change")},n.value())}:void 0}function v(m){return{title:"Advanced",type:"form",defaults:{onchange:function(){p(m,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:w()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:w()}]}]}}function u(m){return m?m.replace(/px$/,""):""}function t(m){return/^[0-9]+$/.test(m)&&(m+="px"),m}function s(m){f("left center right".split(" "),function(n){x.formatter.remove("align"+n,{},m)})}function r(m){f("top middle bottom".split(" "),function(n){x.formatter.remove("valign"+n,{},m)})}function q(m,y,o){function n(z,A){return A=A||[],e.each(z,function(C){var B={text:C.text||C.title};C.menu?B.menu=n(C.menu):(B.value=C.value,y&&y(B)),A.push(B)}),A}return n(m,o||[])}function p(n,m,z){var y=m.toJSON(),o=n.parseStyle(y.style);z?(m.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),m.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=y.borderColor,o["background-color"]=y.backgroundColor),m.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))}function c(n,m,y){var o=n.parseStyle(n.getAttrib(y,"style"));o["border-color"]&&(m.borderColor=o["border-color"]),o["background-color"]&&(m.backgroundColor=o["background-color"]),m.style=n.serializeStyle(o)}function b(n,m,y){var o=n.parseStyle(n.getAttrib(m,"style"));f(y,function(z){o[z.name]=z.value}),n.setAttrib(m,"style",n.serializeStyle(n.parseStyle(n.serializeStyle(o))))}var a=this;a.tableProps=function(){a.table(!0)},a.table=function(B){function A(){function H(J,I,L){if("TD"===J.tagName||"TH"===J.tagName){D.setStyle(J,I,L)}else{if(J.children){for(var K=0;K<J.children.length;K++){H(J.children[K],I,L)}}}}var o;p(D,this),C=e.extend(C,this.toJSON()),C["class"]===!1&&delete C["class"],x.undoManager.transact(function(){if(y||(y=x.plugins.table.insertTable(C.cols||1,C.rows||1)),x.dom.setAttribs(y,{style:C.style,"class":C["class"]}),x.settings.table_style_by_css){if(E=[],E.push({name:"border",value:C.border}),E.push({name:"border-spacing",value:t(C.cellspacing)}),b(D,y,E),D.setAttribs(y,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),y.children){for(var I=0;I<y.children.length;I++){H(y.children[I],"border",C.border),H(y.children[I],"padding",t(C.cellpadding))}}}else{x.dom.setAttribs(y,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing})}D.getAttrib(y,"width")&&!x.settings.table_style_by_css?D.setAttrib(y,"width",u(C.width)):D.setStyle(y,"width",t(C.width)),D.setStyle(y,"height",t(C.height)),o=D.select("caption",y)[0],o&&!C.caption&&D.remove(o),!o&&C.caption&&(o=D.create("caption"),o.innerHTML=d.ie?"\xa0":'<br data-mce-bogus="1"/>',y.insertBefore(o,y.firstChild)),s(y),C.align&&x.formatter.apply("align"+C.align,{},y),x.focus(),x.addVisual()})}function z(H,o){function K(L,O){for(var N=0;N<O.length;N++){var M=D.getStyle(O[N],o);if("undefined"==typeof L&&(L=M),L!=M){return""}}return L}var J,I=x.dom.select("td,th",H);return J=K(J,I)}var y,n,m,G,F,E,D=x.dom,C={};B===!0?(y=D.getParent(x.selection.getStart(),"table"),y&&(C={width:u(D.getStyle(y,"width")||D.getAttrib(y,"width")),height:u(D.getStyle(y,"height")||D.getAttrib(y,"height")),cellspacing:u(D.getStyle(y,"border-spacing")||D.getAttrib(y,"cellspacing")),cellpadding:D.getAttrib(y,"data-mce-cell-padding")||D.getAttrib(y,"cellpadding")||z(y,"padding"),border:D.getAttrib(y,"data-mce-border")||D.getAttrib(y,"border")||z(y,"border"),borderColor:D.getAttrib(y,"data-mce-border-color"),caption:!!D.select("caption",y)[0],"class":D.getAttrib(y,"class")},f("left center right".split(" "),function(o){x.formatter.matchNode(y,"align"+o)&&(C.align=o)}))):(n={label:"Cols",name:"cols"},m={label:"Rows",name:"rows"}),x.settings.table_class_list&&(C["class"]&&(C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,"")),G={name:"class",type:"listbox",label:"Class",values:q(x.settings.table_class_list,function(o){o.value&&(o.textStyle=function(){return x.formatter.getCssText({block:"table",classes:[o.value]})})})}),F={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:x.settings.table_appearance_options!==!1?[n,m,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[n,m,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},G]},x.settings.table_advtab!==!1?(c(D,C,y),x.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:F},v(D)],onsubmit:A})):x.windowManager.open({title:"Table properties",data:C,body:F,onsubmit:A})},a.merge=function(n,m){x.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var o=this.toJSON();x.undoManager.transact(function(){n.merge(m,o.cols,o.rows)})}})},a.cell=function(){function m(){p(A,this),D=e.extend(D,this.toJSON()),x.undoManager.transact(function(){f(z,function(n){x.dom.setAttribs(n,{scope:D.scope,style:D.style,"class":D["class"]}),x.dom.setStyles(n,{width:t(D.width),height:t(D.height)}),D.type&&n.nodeName.toLowerCase()!=D.type&&(n=A.rename(n,D.type)),s(n),D.align&&x.formatter.apply("align"+D.align,{},n),r(n),D.valign&&x.formatter.apply("valign"+D.valign,{},n)}),x.focus()})}var B,D,C,A=x.dom,z=[];if(z=x.dom.select("td[data-mce-selected],th[data-mce-selected]"),B=x.dom.getParent(x.selection.getStart(),"td,th"),!z.length&&B&&z.push(B),B=B||z[0]){D={width:u(A.getStyle(B,"width")||A.getAttrib(B,"width")),height:u(A.getStyle(B,"height")||A.getAttrib(B,"height")),scope:A.getAttrib(B,"scope"),"class":A.getAttrib(B,"class")},D.type=B.nodeName.toLowerCase(),f("left center right".split(" "),function(n){x.formatter.matchNode(B,"align"+n)&&(D.align=n)}),f("top middle bottom".split(" "),function(n){x.formatter.matchNode(B,"valign"+n)&&(D.valign=n)}),x.settings.table_cell_class_list&&(C={name:"class",type:"listbox",label:"Class",values:q(x.settings.table_cell_class_list,function(n){n.value&&(n.textStyle=function(){return x.formatter.getCssText({block:"td",classes:[n.value]})})})});var y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},C]};x.settings.table_cell_advtab!==!1?(c(A,D,B),x.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:D,body:[{title:"General",type:"form",items:y},v(A)],onsubmit:m})):x.windowManager.open({title:"Cell properties",data:D,body:y,onsubmit:m})}},a.row=function(){function E(){var n,G,o;p(m,this),z=e.extend(z,this.toJSON()),x.undoManager.transact(function(){var H=z.type;f(F,function(I){x.dom.setAttribs(I,{scope:z.scope,style:z.style,"class":z["class"]}),x.dom.setStyles(I,{height:t(z.height)}),H!=I.parentNode.nodeName.toLowerCase()&&(n=m.getParent(I,"table"),G=I.parentNode,o=m.select(H,n)[0],o||(o=m.create(H),n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o)),o.appendChild(I),G.hasChildNodes()||m.remove(G)),s(I),z.align&&x.formatter.apply("align"+z.align,{},I)}),x.focus()})}var D,C,B,A,z,y,m=x.dom,F=[];D=x.dom.getParent(x.selection.getStart(),"table"),C=x.dom.getParent(x.selection.getStart(),"td,th"),f(D.rows,function(n){f(n.cells,function(o){return m.getAttrib(o,"data-mce-selected")||o==C?(F.push(n),!1):void 0})}),B=F[0],B&&(z={height:u(m.getStyle(B,"height")||m.getAttrib(B,"height")),scope:m.getAttrib(B,"scope"),"class":m.getAttrib(B,"class")},z.type=B.parentNode.nodeName.toLowerCase(),f("left center right".split(" "),function(n){x.formatter.matchNode(B,"align"+n)&&(z.align=n)}),x.settings.table_row_class_list&&(A={name:"class",type:"listbox",label:"Class",values:q(x.settings.table_row_class_list,function(n){n.value&&(n.textStyle=function(){return x.formatter.getCssText({block:"tr",classes:[n.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},A]},x.settings.table_row_advtab!==!1?(c(m,z,B),x.windowManager.open({title:"Row properties",data:z,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},v(m)],onsubmit:E})):x.windowManager.open({title:"Row properties",data:z,body:y,onsubmit:E}))}}}),k("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(b,f){var e;return function(aF){function aE(n,m){return{index:n,y:aF.dom.getPos(m).y}}function aD(n,m){return{index:n,y:aF.dom.getPos(m).y+m.offsetHeight}}function aC(n,m){return{index:n,x:aF.dom.getPos(m).x}}function aA(n,m){return{index:n,x:aF.dom.getPos(m).x+m.offsetWidth}}function az(){var m=aF.getBody().dir;return"rtl"===m}function ay(){return aF.inline}function ax(){return ay?aF.getBody().ownerDocument.body:aF.getBody()}function aw(n,m){return az()?aA(n,m):aC(n,m)}function au(n,m){return az()?aC(n,m):aA(n,m)}function at(n,m){return ar(n,"width")/ar(m,"width")*100}function ar(n,m){var p=aF.dom.getStyle(n,m,!0),o=parseInt(p,10);return o}function aq(n){var m=ar(n,"width"),o=ar(n.parentElement,"width");return m/o*100}function ap(n,m){var o=ar(n,"width");return m/o*100}function ao(n,m){var o=ar(n.parentElement,"width");return m/o*100}function an(n,m,s){for(var r=[],q=1;q<s.length;q++){var p=s[q].element;r.push(n(q-1,p))}var o=s[s.length-1];return r.push(m(s.length-1,o.element)),r}function am(){var m=aF.dom.select("."+bh,ax());b.each(m,function(n){aF.dom.remove(n)})}function al(m){am(),a5(m)}function ak(u,t,s,r,q,p,o,n){var m={"data-mce-bogus":"all","class":bh+" "+u,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+s+"px; top: "+r+"px; height: "+q+"px; width: "+p+"px; "};return m[o]=n,m}function aj(m,o,n){b.each(m,function(q){var p=n.x,t=q.y-ag/2,s=ag,r=o;aF.dom.add(ax(),"div",ak(a7,aG,p,t,s,r,af,q.index))})}function ai(m,o,n){b.each(m,function(q){var p=q.x-ag/2,t=n.y,s=o,r=ag;aF.dom.add(ax(),"div",ak(bo,bj,p,t,s,r,bd,q.index))})}function ah(m){return b.map(m.rows,function(n){var o=b.map(n.cells,function(q){var p=q.hasAttribute("rowspan")?parseInt(q.getAttribute("rowspan"),10):1,r=q.hasAttribute("colspan")?parseInt(q.getAttribute("colspan"),10):1;return{element:q,rowspan:p,colspan:r}});return{element:n,cells:o}})}function bc(u){function t(w,v){return w+","+v}function s(w,v){return p[t(w,v)]}function r(){var v=[];return b.each(o,function(w){v=v.concat(w.cells)}),v}function q(){return o}var p={},o=[],n=0,m=0;return b.each(u,function(x,w){var v=[];b.each(x.cells,function(A){for(var E=0;p[t(w,E)]!==g;){E++}for(var C={element:A.element,colspan:A.colspan,rowspan:A.rowspan,rowIndex:w,colIndex:E},B=0;B<A.colspan;B++){for(var z=0;z<A.rowspan;z++){var y=w+z,D=E+B;p[t(y,D)]=C,n=Math.max(n,y+1),m=Math.max(m,D+1)}}v.push(C)}),o.push({element:x.element,cells:v})}),{grid:{maxRows:n,maxCols:m},getAt:s,getAllCells:r,getAllRows:q}}function bb(n,m){for(var p=[],o=n;m>o;o++){p.push(o)}return p}function a9(n,m,r){for(var q,p=n(),o=0;o<p.length;o++){m(p[o])&&(q=p[o])}return q?q:r()}function a8(m){var o=bb(0,m.grid.maxCols),n=bb(0,m.grid.maxRows);return b.map(o,function(p){function s(){for(var v=[],u=0;u<n.length;u++){var t=m.getAt(u,p);t&&t.colIndex===p&&v.push(t)}return v}function r(t){return 1===t.colspan}function q(){for(var u,t=0;t<n.length;t++){if(u=m.getAt(t,p)){return u}}return null}return a9(s,r,q)})}function a6(m){var o=bb(0,m.grid.maxCols),n=bb(0,m.grid.maxRows);return b.map(n,function(p){function s(){for(var v=[],u=0;u<o.length;u++){var t=m.getAt(p,u);t&&t.rowIndex===p&&v.push(t)}return v}function r(t){return 1===t.rowspan}function q(){return m.getAt(p,0)}return a9(s,r,q)})}function a5(n){var m=ah(n),t=bc(m),s=a6(t),r=a8(t),q=aF.dom.getPos(n),p=s.length>0?an(aE,aD,s):[],o=r.length>0?an(aw,au,r):[];aj(p,n.offsetWidth,q),ai(o,n.offsetHeight,q)}function a4(x,w,v,u){if(0>w||w>=x.length-1){return""}var t=x[w];if(t){t={value:t,delta:0}}else{for(var s=x.slice(0,w).reverse(),r=0;r<s.length;r++){s[r]&&(t={value:s[r],delta:r+1})}}var q=x[w+1];if(q){q={value:q,delta:1}}else{for(var p=x.slice(w+1),o=0;o<p.length;o++){p[o]&&(q={value:p[o],delta:o+1})}}var n=q.delta-t.delta,m=Math.abs(q.value-t.value)/n;return v?m/ar(u,"width")*100:m}function a3(n,m){var o=aF.dom.getStyle(n,m);return o||(o=aF.dom.getAttrib(n,m)),o||(o=aF.dom.getStyle(n,m,!0)),o}function a2(n,m,r){var q=a3(n,"width"),p=parseInt(q,10),o=m?at(n,r):ar(n,"width");return(m&&!aR(q)||!m&&!aQ(q))&&(p=0),!isNaN(p)&&p>0?p:o}function a0(u,t,s){for(var r=a8(u),q=b.map(r,function(v){return aw(v.colIndex,v.element).x}),p=[],o=0;o<r.length;o++){var n=r[o].element.hasAttribute("colspan")?parseInt(r[o].element.getAttribute("colspan"),10):1,m=n>1?a4(q,o):a2(r[o].element,t,s);m=m?m:ac,p.push(m)}return p}function aZ(n){var m=a3(n,"height"),o=parseInt(m,10);return aR(m)&&(o=0),!isNaN(o)&&o>0?o:ar(n,"height")}function aY(m){for(var s=a6(m),r=b.map(s,function(t){return aE(t.rowIndex,t.element).y}),q=[],p=0;p<s.length;p++){var o=s[p].element.hasAttribute("rowspan")?parseInt(s[p].element.getAttribute("rowspan"),10):1,n=o>1?a4(r,p):aZ(s[p].element);n=n?n:a,q.push(n)}return q}function aX(w,v,u,t,s){function r(x){return b.map(x,function(){return 0})}function q(){var y;if(s){y=[100-m[0]]}else{var x=Math.max(t,m[0]+u);y=[x-m[0]]}return y}function p(y,x){var E,D=r(m.slice(0,y)),C=r(m.slice(x+1));if(u>=0){var B=Math.max(t,m[x]-u);E=D.concat([u,B-m[x]]).concat(C)}else{var A=Math.max(t,m[y]+u),z=m[y]-A;E=D.concat([A-m[y],z]).concat(C)}return E}function o(y,x){var B,A=r(m.slice(0,x));if(u>=0){B=A.concat([u])}else{var z=Math.max(t,m[x]+u);B=A.concat([z-m[x]])}return B}var n,m=w.slice(0);return n=0===w.length?[]:1===w.length?q():0===v?p(0,1):v>0&&v<w.length-1?p(v,v+1):v===w.length-1?o(v-1,v):[]}function aW(n,m,q){for(var p=0,o=n;m>o;o++){p+=q[o]}return p}function aV(m,o){var n=m.getAllCells();return b.map(n,function(q){var p=aW(q.colIndex,q.colIndex+q.colspan,o);return{element:q.element,width:p,colspan:q.colspan}})}function aT(m,o){var n=m.getAllCells();return b.map(n,function(q){var p=aW(q.rowIndex,q.rowIndex+q.rowspan,o);return{element:q.element,height:p,rowspan:q.rowspan}})}function aS(m,o){var n=m.getAllRows();return b.map(n,function(q,p){return{element:q.element,height:o[p]}})}function aR(m){return be.test(m)}function aQ(m){return bm.test(m)}function aP(L,K,J){function I(m,n){b.each(m,function(o){aF.dom.setStyle(o.element,"width",o.width+n),aF.dom.setAttrib(o.element,"width",null)})}function H(){return J<D.grid.maxCols-1?aq(L):aq(L)+ao(L,K)}function G(){return J<D.grid.maxCols-1?ar(L,"width"):ar(L,"width")+K}function F(m,o,n){J!=D.grid.maxCols-1&&n||(aF.dom.setStyle(L,"width",m+o),aF.dom.setAttrib(L,"width",null))}for(var E=ah(L),D=bc(E),C=aR(L.width)||aR(L.style.width),B=a0(D,C,L),A=C?ap(L,K):K,z=aX(B,J,A,ac,C,L),y=[],s=0;s<z.length;s++){y.push(z[s]+B[s])}var r=aV(D,y),q=C?"%":"px",p=C?H():G();aF.undoManager.transact(function(){I(r,q),F(p,q,C)})}function aO(x,w,v){for(var u=ah(x),t=bc(u),s=aY(t),r=[],q=0,p=0;p<s.length;p++){r.push(p===v?w+s[p]:s[p]),q+=q[p]}var o=aT(t,r),n=aS(t,r);aF.undoManager.transact(function(){b.each(n,function(m){aF.dom.setStyle(m.element,"height",m.height+"px"),aF.dom.setAttrib(m.element,"height",null)}),b.each(o,function(m){aF.dom.setStyle(m.element,"height",m.height+"px"),aF.dom.setAttrib(m.element,"height",null)}),aF.dom.setStyle(x,"height",q+"px"),aF.dom.setAttrib(x,"height",null)})}function aN(){bg=setTimeout(function(){aJ()},200)}function aM(){clearTimeout(bg)}function aL(){var m=document.createElement("div");return m.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),m.setAttribute("data-mce-bogus","all"),m}function aK(n,m){aF.dom.bind(n,"mouseup",function(){aJ()}),aF.dom.bind(n,"mousemove",function(o){aM(),a1&&m(o)}),aF.dom.bind(n,"mouseout",function(){aN()})}function aJ(){if(aF.dom.remove(aB),a1){aF.dom.removeClass(ae,bk),a1=!1;var n,m;if(aH(ae)){var r=parseInt(aF.dom.getAttrib(ae,aI),10),q=aF.dom.getPos(ae).x;n=parseInt(aF.dom.getAttrib(ae,bd),10),m=az()?r-q:q-r,aP(e,m,n)}else{if(bf(ae)){var p=parseInt(aF.dom.getAttrib(ae,ab),10),o=aF.dom.getPos(ae).y;n=parseInt(aF.dom.getAttrib(ae,af),10),m=o-p,aO(e,m,n)}}al(e),aF.nodeChanged()}}function bi(n,m){aB=aB?aB:aL(),a1=!0,aF.dom.addClass(n,bk),ae=n,aK(aB,m),aF.dom.add(ax(),aB)}function aH(m){return aF.dom.hasClass(m,bo)}function bf(m){return aF.dom.hasClass(m,a7)}function aU(m){d=d!==g?d:m.clientX;var o=m.clientX-d;d=m.clientX;var n=aF.dom.getPos(ae).x;aF.dom.setStyle(ae,"left",n+o+"px")}function av(m){bn=bn!==g?bn:m.clientY;var o=m.clientY-bn;bn=m.clientY;var n=aF.dom.getPos(ae).y;aF.dom.setStyle(ae,"top",n+o+"px")}function ad(m){d=g,bi(m,aU)}function c(m){bn=g,bi(m,av)}function bl(n){var m=n.target,q=aF.getBody();if(aF.$.contains(q,e)||e===q){if(aH(m)){n.preventDefault();var p=aF.dom.getPos(m).x;aF.dom.setAttrib(m,aI,p),ad(m)}else{if(bf(m)){n.preventDefault();var o=aF.dom.getPos(m).y;aF.dom.setAttrib(m,ab,o),c(m)}else{am()}}}}var bg,a1,aB,ae,d,bn,bh="mce-resize-bar",a7="mce-resize-bar-row",aG="row-resize",af="data-row",ab="data-initial-top",bo="mce-resize-bar-col",bj="col-resize",bd="data-col",aI="data-initial-left",ag=4,ac=10,a=10,bk="mce-resize-bar-dragging",be=new RegExp(/(\d+(\.\d+)?%)/),bm=new RegExp(/px|em/);return aF.on("init",function(){aF.dom.bind(ax(),"mousedown",bl)}),aF.on("ObjectResized",function(m){var o=m.target;if("TABLE"===o.nodeName){var n=[];b.each(o.rows,function(p){b.each(p.cells,function(r){var q=aF.dom.getStyle(r,"width",!0);n.push({cell:r,width:q})})}),b.each(n,function(p){aF.dom.setStyle(p.cell,"width",p.width),aF.dom.setAttrib(p.cell,"width",null)})}}),aF.on("mouseover",function(n){if(!a1){var m=aF.dom.getParent(n.target,"table");("TABLE"===n.target.nodeName||m)&&(e=m,al(m))}}),aF.on("keydown",function(m){switch(m.keyCode){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:am()}}),aF.on("remove",function(){am(),aF.dom.unbind(ax(),"mousedown",bl)}),{adjustWidth:aP,adjustHeight:aO,clearBars:am,drawBars:a5,determineDeltas:aX,getTableGrid:bc,getTableDetails:ah,getWidths:a0,getPixelHeights:aY,isPercentageBasedSize:aR,isPixelBasedSize:aQ,recalculateWidths:aV,recalculateCellHeights:aT,recalculateRowHeights:aS}}}),k("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(w,v,u,t,s,r,q,p,o){function n(N){function M(f){return function(){N.execCommand(f)}}function L(x,f){var P,O,z,y;for(z='<table id="__mce"><tbody>',P=0;f>P;P++){for(z+="<tr>",O=0;x>O;O++){z+="<td>"+(p.ie&&p.ie<10?"&nbsp;":"<br>")+"</td>"}z+="</tr>"}return z+="</tbody></table>",N.undoManager.transact(function(){N.insertContent(z),y=N.dom.get("__mce"),N.dom.setAttrib(y,"id",null),N.$("tr",y).each(function(R,Q){N.fire("newrow",{node:Q}),N.$("th,td",Q).each(function(T,S){N.fire("newcell",{node:S})})}),N.dom.setAttribs(y,N.settings.table_default_attributes||{}),N.dom.setStyles(y,N.settings.table_default_styles||{})}),y}function K(x,f,z){function y(){var S,R,Q,P={},O=0;R=N.dom.select("td[data-mce-selected],th[data-mce-selected]"),S=R[0],S||(S=N.selection.getStart()),z&&R.length>0?(m(R,function(T){return P[T.parentNode.parentNode.nodeName]=1}),m(P,function(T){O+=T}),Q=1!==O):Q=!N.dom.getParent(S,f),x.disabled(Q),N.selection.selectorChanged(f,function(T){x.disabled(!T)})}N.initialized?y():N.on("init",y)}function J(){K(this,"table")}function I(){K(this,"td,th")}function H(){K(this,"td,th",!0)}function G(){var x="";x='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var f=0;10>f;f++){x+="<tr>";for(var y=0;10>y;y++){x+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*f+y)+'" href="#" data-mce-x="'+y+'" data-mce-y="'+f+'"></a></td>'}x+="</tr>"}return x+="</table>",x+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function F(T,S,R){var Q,P,O,z,y,x=R.getEl().getElementsByTagName("table")[0],f=R.isRtl()||"tl-tr"==R.parent().rel;for(x.nextSibling.innerHTML=T+1+" x "+(S+1),f&&(T=9-T),P=0;10>P;P++){for(Q=0;10>Q;Q++){z=x.rows[P].childNodes[Q].firstChild,y=(f?Q>=T:T>=Q)&&S>=P,N.dom.toggleClass(z,"mce-active",y),y&&(O=z)}}return O.parentNode}function E(){N.addButton("tableprops",{title:"Table properties",onclick:b.tableProps,icon:"table"}),N.addButton("tabledelete",{title:"Delete table",onclick:M("mceTableDelete")}),N.addButton("tablecellprops",{title:"Cell properties",onclick:M("mceTableCellProps")}),N.addButton("tablemergecells",{title:"Merge cells",onclick:M("mceTableMergeCells")}),N.addButton("tablesplitcells",{title:"Split cell",onclick:M("mceTableSplitCells")}),N.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:M("mceTableInsertRowBefore")}),N.addButton("tableinsertrowafter",{title:"Insert row after",onclick:M("mceTableInsertRowAfter")}),N.addButton("tabledeleterow",{title:"Delete row",onclick:M("mceTableDeleteRow")}),N.addButton("tablerowprops",{title:"Row properties",onclick:M("mceTableRowProps")}),N.addButton("tablecutrow",{title:"Cut row",onclick:M("mceTableCutRow")}),N.addButton("tablecopyrow",{title:"Copy row",onclick:M("mceTableCopyRow")}),N.addButton("tablepasterowbefore",{title:"Paste row before",onclick:M("mceTablePasteRowBefore")}),N.addButton("tablepasterowafter",{title:"Paste row after",onclick:M("mceTablePasteRowAfter")}),N.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:M("mceTableInsertColBefore")}),N.addButton("tableinsertcolafter",{title:"Insert column after",onclick:M("mceTableInsertColAfter")}),N.addButton("tabledeletecol",{title:"Delete column",onclick:M("mceTableDeleteCol")})}function D(x){var f=N.dom.is(x,"table")&&N.getBody().contains(x);return f}function C(){var f=N.settings.table_toolbar;""!==f&&f!==!1&&(f||(f="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),N.addContextToolbar(D,f))}function B(){return e}function A(f){e=f}var e,d,c=this,b=new t(N);!N.settings.object_resizing||N.settings.table_resize_bars===!1||N.settings.object_resizing!==!0&&"table"!==N.settings.object_resizing||(d=s(N)),N.settings.table_grid===!1?N.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:b.table}):N.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(f){f.aria&&(this.parent().hideAll(),f.stopImmediatePropagation(),b.table())},onshow:function(){F(0,0,this.menu.items()[0])},onhide:function(){var f=this.menu.items()[0].getEl().getElementsByTagName("a");N.dom.removeClass(f,"mce-active"),N.dom.addClass(f[0],"mce-active")},menu:[{type:"container",html:G(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(x){var f,z,y=x.target;"A"==y.tagName.toUpperCase()&&(f=parseInt(y.getAttribute("data-mce-x"),10),z=parseInt(y.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(f=9-f),f===this.lastX&&z===this.lastY||(F(f,z,x.control),this.lastX=f,this.lastY=z))},onclick:function(x){var f=this;"A"==x.target.tagName.toUpperCase()&&(x.preventDefault(),x.stopPropagation(),f.parent().cancel(),N.undoManager.transact(function(){L(f.lastX+1,f.lastY+1)}),N.addVisual())}}]}),N.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:J,onclick:b.tableProps}),N.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:J,cmd:"mceTableDelete"}),N.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:M("mceTableCellProps"),onPostRender:I},{text:"Merge cells",onclick:M("mceTableMergeCells"),onPostRender:H},{text:"Split cell",onclick:M("mceTableSplitCells"),onPostRender:I}]}),N.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:M("mceTableInsertRowBefore"),onPostRender:I},{text:"Insert row after",onclick:M("mceTableInsertRowAfter"),onPostRender:I},{text:"Delete row",onclick:M("mceTableDeleteRow"),onPostRender:I},{text:"Row properties",onclick:M("mceTableRowProps"),onPostRender:I},{text:"-"},{text:"Cut row",onclick:M("mceTableCutRow"),onPostRender:I},{text:"Copy row",onclick:M("mceTableCopyRow"),onPostRender:I},{text:"Paste row before",onclick:M("mceTablePasteRowBefore"),onPostRender:I},{text:"Paste row after",onclick:M("mceTablePasteRowAfter"),onPostRender:I}]}),N.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:M("mceTableInsertColBefore"),onPostRender:I},{text:"Insert column after",onclick:M("mceTableInsertColAfter"),onPostRender:I},{text:"Delete column",onclick:M("mceTableDeleteCol"),onPostRender:I}]});var a=[];m("inserttable tableprops deletetable | cell row column".split(" "),function(f){"|"==f?a.push({text:"-"}):a.push(N.menuItems[f])}),N.addButton("table",{type:"menubutton",title:"Table",menu:a}),p.isIE||N.on("click",function(f){f=f.target,"TABLE"===f.nodeName&&(N.selection.select(f),N.nodeChanged())}),c.quirks=new v(N),N.on("Init",function(){c.cellSelection=new u(N,function(f){f&&d.clearBars()}),c.resizeBars=d}),N.on("PreInit",function(){N.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(x,f){for(var y=x.length;y--;){x[y].attr(f,null)}})}),m({mceTableSplitCells:function(f){f.split()},mceTableMergeCells:function(x){var f;f=N.dom.getParent(N.selection.getStart(),"th,td"),N.dom.select("td[data-mce-selected],th[data-mce-selected]").length?x.merge():b.merge(x,f)},mceTableInsertRowBefore:function(f){f.insertRow(!0)},mceTableInsertRowAfter:function(f){f.insertRow()},mceTableInsertColBefore:function(f){f.insertCol(!0)},mceTableInsertColAfter:function(f){f.insertCol()},mceTableDeleteCol:function(f){f.deleteCols()},mceTableDeleteRow:function(f){f.deleteRows()},mceTableCutRow:function(f){e=f.cutRows()},mceTableCopyRow:function(f){e=f.copyRows()},mceTablePasteRowBefore:function(f){f.pasteRows(e,!0)},mceTablePasteRowAfter:function(f){f.pasteRows(e)},mceTableDelete:function(f){d&&d.clearBars(),f.deleteTable()}},function(f,x){N.addCommand(x,function(){var y=new w(N);y&&(f(y),N.execCommand("mceRepaint"),c.cellSelection.clear())})}),m({mceInsertTable:b.table,mceTableProps:function(){b.table(!0)},mceTableRowProps:b.row,mceTableCellProps:b.cell},function(x,f){N.addCommand(f,function(y,z){x(z)})}),E(),C(),N.settings.table_tab_navigation!==!1&&N.on("keydown",function(f){var z,y,x;9==f.keyCode&&(z=N.dom.getParent(N.selection.getStart(),"th,td"),z&&(f.preventDefault(),y=new w(N),x=f.shiftKey?-1:1,N.undoManager.transact(function(){!y.moveRelIdx(z,x)&&x>0&&(y.insertRow(),y.refresh(),y.moveRelIdx(z,x))})))}),c.insertTable=L,c.setClipboardRows=A,c.getClipboardRows=B}var m=r.each;o.add("table",n)})}(this);