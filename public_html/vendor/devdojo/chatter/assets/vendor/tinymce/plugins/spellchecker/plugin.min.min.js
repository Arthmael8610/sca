!function(i,h){function n(g,e){for(var q,p=[],o=0;o<g.length;++o){if(q=j[g[o]]||l(g[o]),!q){throw"module definition dependecy not found: "+g[o]}p.push(q)}e.apply(null,p)}function m(b,f,c){if("string"!=typeof b){throw"invalid module definition, module id must be defined and be a string"}if(f===h){throw"invalid module definition, dependencies must be specified"}if(c===h){throw"invalid module definition, definition function must be specified"}n(f,function(){j[b]=c.apply(null,arguments)})}function l(a){for(var o=i,g=a.split(/[.\/]/),f=0;f<g.length;++f){if(!o[g[f]]){return}o=o[g[f]]}return o}function k(r){var q,p,o,g,b;for(q=0;q<r.length;q++){p=i,o=r[q],g=o.split(/[.\/]/);for(var a=0;a<g.length-1;++a){p[g[a]]===h&&(p[g[a]]={}),p=p[g[a]]}p[g[g.length-1]]=j[o]}if(i.AMDLC_TESTS){b=i.privateModules||{};for(o in j){b[o]=j[o]}for(q=0;q<r.length;q++){delete b[r[q]]}i.privateModules=b}}var j={};m("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){function b(c){return c&&1==c.nodeType&&"false"===c.contentEditable}return function(ab,aa){function Z(d,c){if(!d[0]){throw"findAndReplaceDOMText cannot handle zero-length matches"}return{start:d.index,end:d.index+d[0].length,text:d[0],data:c}}function Y(d){var e;if(3===d.nodeType){return d.data}if(C[d.nodeName]&&!D[d.nodeName]){return""}if(b(d)){return"\n"}if(e="",(D[d.nodeName]||a[d.nodeName])&&(e+="\n"),d=d.firstChild){do{e+=Y(d)}while(d=d.nextSibling)}return e}function X(z,y,x){var w,v,u,t,s,r=[],q=0,p=z,o=0;y=y.slice(0),y.sort(function(d,c){return d.start-c.start}),s=y.shift();b:for(;;){if((D[p.nodeName]||a[p.nodeName]||b(p))&&q++,3===p.nodeType&&(!v&&p.length+q>=s.end?(v=p,t=s.end-q):w&&r.push(p),!w&&p.length+q>s.start&&(w=p,u=s.start-q),q+=p.length),w&&v){if(p=x({startNode:w,startNodeIndex:u,endNode:v,endNodeIndex:t,innerNodes:r,match:s.text,matchIndex:o}),q-=v.length-t,w=null,v=null,r=[],s=y.shift(),o++,!s){break}}else{if(C[p.nodeName]&&!D[p.nodeName]||!p.firstChild){if(p.nextSibling){p=p.nextSibling;continue}}else{if(!b(p)){p=p.firstChild;continue}}}for(;;){if(p.nextSibling){p=p.nextSibling;break}if(p.parentNode===z){break b}p=p.parentNode}}}function W(d){function c(f,p){var o=M[p];o.stencil||(o.stencil=d(o));var g=o.stencil.cloneNode(!1);return g.setAttribute("data-mce-index",p),f&&g.appendChild(K.doc.createTextNode(f)),g}return function(ai){var ah,ag,af,ae=ai.startNode,ad=ai.endNode,ac=ai.matchIndex,B=K.doc;if(ae===ad){var A=ae;af=A.parentNode,ai.startNodeIndex>0&&(ah=B.createTextNode(A.data.substring(0,ai.startNodeIndex)),af.insertBefore(ah,A));var z=c(ai.match,ac);return af.insertBefore(z,A),ai.endNodeIndex<A.length&&(ag=B.createTextNode(A.data.substring(ai.endNodeIndex)),af.insertBefore(ag,A)),A.parentNode.removeChild(A),z}ah=B.createTextNode(ae.data.substring(0,ai.startNodeIndex)),ag=B.createTextNode(ad.data.substring(ai.endNodeIndex));for(var y=c(ae.data.substring(ai.startNodeIndex),ac),x=[],w=0,v=ai.innerNodes.length;v>w;++w){var u=ai.innerNodes[w],t=c(u.data,ac);u.parentNode.replaceChild(t,u),x.push(t)}var s=c(ad.data.substring(0,ai.endNodeIndex),ac);return af=ae.parentNode,af.insertBefore(ah,ae),af.insertBefore(y,ae),af.removeChild(ae),af=ad.parentNode,af.insertBefore(s,ad),af.insertBefore(ag,ad),af.removeChild(ad),s}}function V(d){var c=d.parentNode;c.insertBefore(d.firstChild,d),d.parentNode.removeChild(d)}function U(o){var t=ab.getElementsByTagName("*"),s=[];o="number"==typeof o?""+o:null;for(var r=0;r<t.length;r++){var q=t[r],p=q.getAttribute("data-mce-index");null!==p&&p.length&&(p!==o&&null!==o||s.push(q))}return s}function T(d){for(var c=M.length;c--;){if(M[c]===d){return c}}return -1}function S(d){var c=[];return R(function(f,e){d(f,e)&&c.push(f)}),M=c,this}function R(e){for(var d=0,f=M.length;f>d&&e(M[d],d)!==!1;d++){}return this}function Q(c){return M.length&&X(ab,M,W(c)),this}function P(d,c){if(E&&d.global){for(;F=d.exec(E);){M.push(Z(F,c))}}return this}function O(e){var d,f=U(e?T(e):null);for(d=f.length;d--;){V(f[d])}return this}function N(c){return M[c.getAttribute("data-mce-index")]}function L(c){return U(T(c))[0]}function J(e,d,f){return M.push({start:e,end:e+d,text:E.substr(e,d),data:f}),this}function I(e){var c=U(T(e)),f=aa.dom.createRng();return f.setStartBefore(c[0]),f.setEndAfter(c[c.length-1]),f}function H(e,c){var f=I(e);return f.deleteContents(),c.length>0&&f.insertNode(aa.dom.doc.createTextNode(c)),f}function G(){return M.splice(0,M.length),O(),this}var F,E,D,C,a,M=[],K=aa.dom;return D=aa.schema.getBlockElements(),C=aa.schema.getWhiteSpaceElements(),a=aa.schema.getShortEndedElements(),E=Y(ab),{text:E,matches:M,each:R,filter:S,reset:G,matchFromElement:N,elementFromMatch:L,find:P,add:J,wrap:Q,unwrap:O,replace:H,rangeFromMatch:I,indexOf:T}}}),m("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(p,o,v,u,t,s,r,q){o.add("spellchecker",function(ac,ab){function aa(){return L.textMatcher||(L.textMatcher=new p(ac.getBody(),ac)),L.textMatcher}function Z(x,w){var y=[];return v.each(w,function(b){y.push({selectable:!0,text:b.name,data:b.value})}),y}function Y(x){for(var w in x){return !1}return !0}function X(b,B){var A=[],z=T[b];v.each(z,function(C){A.push({text:C,onclick:function(){ac.insertContent(ac.dom.encode(C)),ac.dom.remove(B),Q()}})}),A.push({text:"-"}),N&&A.push({text:"Add to Dictionary",onclick:function(){O(b,B)}}),A.push.apply(A,[{text:"Ignore",onclick:function(){M(b,B)}},{text:"Ignore all",onclick:function(){M(b,B,!0)}}]),P=new u({items:A,context:"contextmenu",onautohide:function(C){-1!=C.target.className.indexOf("spellchecker")&&C.preventDefault()},onhide:function(){P.remove(),P=null}}),P.renderTo(document.body);var y=t.DOM.getPos(ac.getContentAreaContainer()),x=ac.dom.getPos(B[0]),w=ac.dom.getRoot();"BODY"==w.nodeName?(x.x-=w.ownerDocument.documentElement.scrollLeft||w.scrollLeft,x.y-=w.ownerDocument.documentElement.scrollTop||w.scrollTop):(x.x-=w.scrollLeft,x.y-=w.scrollTop),y.x+=x.x,y.y+=x.y,P.moveTo(y.x,y.y+B[0].offsetHeight)}function W(){return ac.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e\xa0\u2002\u2003\u2009]+',"g")}function V(w,A,z,y){var x={method:w,lang:J.spellchecker_language},b="";x["addToDictionary"==w?"word":"text"]=A,v.each(x,function(C,B){b&&(b+="&"),b+=B+"="+encodeURIComponent(C)}),s.send({url:new r(ab).toAbsolute(J.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:b,success:function(B){if(B=q.parse(B)){B.error?y(B.error):z(B)}else{var C=ac.translate("Server response wasn't proper JSON.");y(C)}},error:function(){var B=ac.translate("The spelling service was not found: (")+J.spellchecker_rpc_url+ac.translate(")");y(B)}})}function U(x,w,A,z){var y=J.spellchecker_callback||V;y.call(L,x,w,A,z)}function S(){function b(w){ac.notificationManager.open({text:w,type:"error"}),ac.setProgressState(!1),K()}K()||(ac.setProgressState(!0),U("spellcheck",aa().text,c,b),ac.focus())}function Q(){ac.dom.select("span.mce-spellchecker-word").length||K()}function O(b,w){ac.setProgressState(!0),U("addToDictionary",b,function(){ac.setProgressState(!1),ac.dom.remove(w,!0),Q()},function(x){ac.notificationManager.open({text:x,type:"error"}),ac.setProgressState(!1)})}function M(b,x,w){ac.selection.collapse(),w?v.each(ac.dom.select("span.mce-spellchecker-word"),function(y){y.getAttribute("data-mce-word")==b&&ac.dom.remove(y,!0)}):ac.dom.remove(x,!0),Q()}function K(){return aa().reset(),L.textMatcher=null,R?(R=!1,ac.fire("SpellcheckEnd"),!0):void 0}function I(x){var w=x.getAttribute("data-mce-index");return"number"==typeof w?""+w:w}function f(b){var z,y=[];if(z=v.toArray(ac.getBody().getElementsByTagName("span")),z.length){for(var x=0;x<z.length;x++){var w=I(z[x]);null!==w&&w.length&&w===b.toString()&&y.push(z[x])}}return y}function d(x){var w=J.spellchecker_language;x.control.items().each(function(b){b.active(b.settings.data===w)})}function c(b){var x;if(b.words?(N=!!b.dictionary,x=b.words):x=b,ac.setProgressState(!1),Y(x)){var w=ac.translate("No misspellings found.");return ac.notificationManager.open({text:w,type:"info"}),void (R=!1)}T=x,aa().find(W()).filter(function(y){return !!x[y.text]}).wrap(function(y){return ac.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":y.text})}),R=!0,ac.fire("SpellcheckStart")}var a,T,R,P,N,L=this,J=ac.settings,g=J.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";a=Z("Language",v.map(g.split(","),function(b){return b=b.split("="),{name:b[0],value:b[1]}})),ac.on("click",function(b){var y=b.target;if("mce-spellchecker-word"==y.className){b.preventDefault();var x=f(I(y));if(x.length>0){var w=ac.dom.createRng();w.setStartBefore(x[0]),w.setEndAfter(x[x.length-1]),ac.selection.setRng(w),X(y.getAttribute("data-mce-word"),x)}}}),ac.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:S,selectable:!0,onPostRender:function(){var b=this;b.active(R),ac.on("SpellcheckStart SpellcheckEnd",function(){b.active(R)})}});var e={tooltip:"Spellcheck",onclick:S,onPostRender:function(){var b=this;ac.on("SpellcheckStart SpellcheckEnd",function(){b.active(R)})}};a.length>1&&(e.type="splitbutton",e.menu=a,e.onshow=d,e.onselect=function(b){J.spellchecker_language=b.control.settings.data}),ac.addButton("spellchecker",e),ac.addCommand("mceSpellCheck",S),ac.on("remove",function(){P&&(P.remove(),P=null)}),ac.on("change",Q),this.getTextMatcher=aa,this.getWordCharPattern=W,this.markErrors=c,this.getLanguage=function(){return J.spellchecker_language},J.spellchecker_language=J.spellchecker_language||J.language||"en"})}),k(["tinymce/spellcheckerplugin/DomTextMatcher"])}(this);