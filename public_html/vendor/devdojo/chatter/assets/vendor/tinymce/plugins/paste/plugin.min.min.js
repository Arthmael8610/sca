!function(i,h){function n(g,e){for(var q,p=[],o=0;o<g.length;++o){if(q=j[g[o]]||l(g[o]),!q){throw"module definition dependecy not found: "+g[o]}p.push(q)}e.apply(null,p)}function m(b,f,c){if("string"!=typeof b){throw"invalid module definition, module id must be defined and be a string"}if(f===h){throw"invalid module definition, dependencies must be specified"}if(c===h){throw"invalid module definition, definition function must be specified"}n(f,function(){j[b]=c.apply(null,arguments)})}function l(a){for(var o=i,g=a.split(/[.\/]/),f=0;f<g.length;++f){if(!o[g[f]]){return}o=o[g[f]]}return o}function k(r){var q,p,o,g,b;for(q=0;q<r.length;q++){p=i,o=r[q],g=o.split(/[.\/]/);for(var a=0;a<g.length-1;++a){p[g[a]]===h&&(p[g[a]]={}),p=p[g[a]]}p[g[g.length-1]]=j[o]}if(i.AMDLC_TESTS){b=i.privateModules||{};for(o in j){b[o]=j[o]}for(q=0;q<r.length;q++){delete b[r[q]]}i.privateModules=b}}var j={};m("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(p,o,u){function t(a,d){return p.each(d,function(b){a=b.constructor==RegExp?a.replace(b,""):a.replace(b[0],b[1])}),a}function s(y){function x(f){var e=f.name,g=f;if("br"===e){return void (d+="\n")}if(c[e]&&(d+=" "),b[e]){return void (d+=" ")}if(3==f.type&&(d+=f.value),!f.shortEnded&&(f=f.firstChild)){do{x(f)}while(f=f.next)}a[e]&&g.next&&(d+="\n","p"==e&&(d+="\n"))}var w=new u,v=new o({},w),d="",c=w.getShortEndedElements(),b=p.makeMap("script noscript style textarea video audio iframe object"," "),a=w.getBlockElements();return y=t(y,[/<!\[[^\]]+\]>/g]),x(v.parse(y)),d}function r(d){function c(f,e,g){return e||g?"\xa0":" "}return d=t(d,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,c],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function q(d){var c=0;return function(){return d+c++}}return{filter:t,innerText:s,trimHtml:r,createIdGenerator:q}}),m("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(x){var w=function(b){return/^https?:\/\/[\w\?\-\/+=.&%]+$/i.test(b)},v=function(b){return w(b)&&/.(gif|jpe?g|png)$/.test(b)},u=function(e,d,f){return e.undoManager.extra(function(){f(e,d)},function(){e.insertContent('<img src="'+d+'">')}),!0},t=function(e,d,f){return e.undoManager.extra(function(){f(e,d)},function(){e.execCommand("mceInsertLink",!1,d)}),!0},s=function(b,f,e){return b.selection.isCollapsed()===!1&&w(f)?t(b,f,e):!1},r=function(d,c,f){return v(c)?u(d,c,f):!1},q=function(d,c){return d.insertContent(c,{merge:d.settings.paste_merge_formats!==!1,paste:!0}),!0},p=function(a,d){x.each([s,r,q],function(b){return b(a,d,q)!==!0})},o=function(d,c){d.settings.smart_paste===!1?q(d,c):p(d,c)};return{isImageUrl:v,isAbsoluteUrl:w,insertContent:o}}),m("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(o,g,s,r,q,p){return function(ab){function aa(u){var t,w=ab.dom;if(t=ab.fire("BeforePastePreProcess",{content:u}),t=ab.fire("PastePreProcess",t),u=t.content,!t.isDefaultPrevented()){if(ab.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var v=w.add(ab.getBody(),"div",{style:"display:none"},u);t=ab.fire("PastePostProcess",{node:v}),w.remove(v),u=t.node.innerHTML}t.isDefaultPrevented()||q.insertContent(ab,u)}}function Z(u){u=ab.dom.encode(u).replace(/\r\n/g,"\n");var t,w=ab.dom.getParent(ab.selection.getStart(),ab.dom.isBlock),v=ab.settings.forced_root_block;v&&(t=ab.dom.createHTML(v,ab.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),w&&/^(PRE|DIV)$/.test(w.nodeName)||!v?u=r.filter(u,[[/\n/g,"<br>"]]):(u=r.filter(u,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=u.indexOf("<p>")&&(u=t+u)),aa(u)}function Y(){function B(D){var C,G,F,E=D.startContainer;if(C=D.getClientRects(),C.length){return C[0]}if(D.collapsed&&1==E.nodeType){for(F=E.childNodes[a.startOffset];F&&3==F.nodeType&&!F.data.length;){F=F.nextSibling}if(F){return"BR"==F.tagName&&(G=z.doc.createTextNode("\ufeff"),F.parentNode.insertBefore(G,F),D=z.createRng(),D.setStartBefore(G),D.setEndAfter(G),C=D.getClientRects(),z.remove(G)),C.length?C[0]:void 0}}}var A,z=ab.dom,y=ab.getBody(),x=ab.dom.getViewPort(ab.getWin()),w=x.y,v=20;if(a=ab.selection.getRng(),ab.inline&&(A=ab.selection.getScrollContainer(),A&&A.scrollTop>0&&(w=A.scrollTop)),a.getClientRects){var u=B(a);if(u){v=w+(u.top-z.getPos(y).y)}else{v=w;var t=a.startContainer;t&&(3==t.nodeType&&t.parentNode!=y&&(t=t.parentNode),1==t.nodeType&&(v=z.getPos(t,A||y).y))}}b=z.add(ab.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+v+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},J),(o.ie||o.gecko)&&z.setStyle(b,"left","rtl"==z.getStyle(y,"direction",!0)?65535:-65535),z.bind(b,"beforedeactivate focusin focusout",function(C){C.stopPropagation()}),b.focus(),ab.selection.select(b,!0)}function X(){if(b){for(var t;t=ab.dom.get("mcepastebin");){ab.dom.remove(t),ab.dom.unbind(t)}a&&ab.selection.setRng(a)}b=a=null}function W(){var u,t,x,w,v="";for(u=ab.dom.select("div[id=mcepastebin]"),t=0;t<u.length;t++){x=u[t],x.firstChild&&"mcepastebin"==x.firstChild.id&&(x=x.firstChild),w=x.innerHTML,v!=J&&(v+=w)}return v}function V(u){var t={};if(u){if(u.getData){var x=u.getData("Text");x&&x.length>0&&-1==x.indexOf(H)&&(t["text/plain"]=x)}if(u.types){for(var w=0;w<u.types.length;w++){var v=u.types[w];t[v]=u.getData(v)}}}return t}function U(t){return V(t.clipboardData||ab.getDoc().dataTransfer)}function T(t){return f(t,"text/html")||f(t,"text/plain")}function S(u){var t;return t=u.indexOf(","),-1!==t?u.substr(t+1):null}function Q(u,t){return u.images_dataimg_filter?u.images_dataimg_filter(t):!0}function O(B,A,z){B&&(ab.selection.setRng(B),B=null);var y=A.result,x=S(y),w=new Image;if(w.src=y,Q(ab.settings,w)){var v,u,t=ab.editorUpload.blobCache;u=t.findFirst(function(C){return C.base64()===x}),u?v=u:(v=t.create(e(),z,x),t.add(v)),aa('<img src="'+v.blobUri()+'">')}else{aa('<img src="'+y+'">')}}function M(u,t){function w(C){var B,A,z,y=!1;if(C){for(B=0;B<C.length;B++){if(A=C[B],/^image\/(jpeg|png|gif|bmp)$/.test(A.type)){var x=A.getAsFile?A.getAsFile():A;z=new FileReader,z.onload=O.bind(null,t,z,x),z.readAsDataURL(x),u.preventDefault(),y=!0}}}return y}var v=u.clipboardData||u.dataTransfer;return ab.settings.paste_data_images&&v?w(v.items)||w(v.files):void 0}function K(u){var t=u.clipboardData;return -1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function I(t){return g.getCaretRangeFromPoint(t.clientX,t.clientY,ab.getDoc())}function f(u,t){return t in u&&u[t].length>0}function d(t){return s.metaKeyPressed(t)&&86==t.keyCode||t.shiftKey&&45==t.keyCode}function c(){function t(x,w,z){var y;return f(x,"text/html")?y=x["text/html"]:(y=W(),y==J&&(z=!0)),y=r.trimHtml(y),b&&b.firstChild&&"mcepastebin"===b.firstChild.id&&(z=!0),X(),y.length||(z=!0),z&&(y=f(x,"text/plain")&&-1==y.indexOf("</p>")?x["text/plain"]:r.innerText(y)),y==J?void (w||ab.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void (z?Z(y):aa(y))}function v(w){return 0===w["text/plain"].indexOf("file://")}ab.on("keydown",function(w){function x(y){d(y)&&!y.isDefaultPrevented()&&X()}if(d(w)&&!w.isDefaultPrevented()){if(R=w.shiftKey&&86==w.keyCode,R&&o.webkit&&-1!=navigator.userAgent.indexOf("Version/")){return}if(w.stopImmediatePropagation(),N=(new Date).getTime(),o.ie&&R){return w.preventDefault(),void ab.fire("paste",{ieFake:!0})}X(),Y(),ab.once("keyup",x),ab.once("paste",function(){ab.off("keyup",x)})}});var u=function(){return a||ab.selection.getRng()};ab.on("paste",function(B){var A=(new Date).getTime(),y=U(B),x=(new Date).getTime()-A,w=(new Date).getTime()-N-x<1000,z="text"==P.pasteFormat||R;return R=!1,B.isDefaultPrevented()||K(B)?void X():!T(y)&&M(B,u())?void X():(w||B.preventDefault(),!o.ie||w&&!B.ieFake||(Y(),ab.dom.bind(b,"paste",function(C){C.stopPropagation()}),ab.getDoc().execCommand("Paste",!1,null),y["text/html"]=W()),void (f(y,"text/html")?(B.preventDefault(),t(y,w,z)):p.setEditorTimeout(ab,function(){t(y,w,z)},0)))}),ab.on("dragstart dragend",function(w){L="dragstart"==w.type}),ab.on("drop",function(x){var w,z;if(z=I(x),!x.isDefaultPrevented()&&!L&&(w=V(x.dataTransfer),(T(w)&&!v(w)||!M(x,z))&&z&&ab.settings.paste_filter_drop!==!1)){var y=w["mce-internal"]||w["text/html"]||w["text/plain"];y&&(x.preventDefault(),p.setEditorTimeout(ab,function(){ab.undoManager.transact(function(){w["mce-internal"]&&ab.execCommand("Delete"),ab.selection.setRng(z),y=r.trimHtml(y),w["text/html"]?aa(y):Z(y)})}))}}),ab.on("dragover dragend",function(w){ab.settings.paste_data_images&&w.preventDefault()})}var b,a,R,P=this,N=0,L=!1,J="%MCEPASTEBIN%",H="data:text/mce-internal,",e=r.createIdGenerator("mceclip");P.pasteHtml=aa,P.pasteText=Z,P.pasteImageData=M,ab.on("preInit",function(){c(),ab.parser.addNodeFilter("img",function(B,A,z){function y(C){return C.data&&C.data.paste===!0}function x(C){C.attr("data-mce-object")||t===o.transparentSrc||C.remove()}function w(C){return 0===C.indexOf("webkit-fake-url")}function v(C){return 0===C.indexOf("data:")}if(!ab.settings.paste_data_images&&y(z)){for(var u=B.length;u--;){var t=B[u].attributes.map.src;t&&(w(t)?x(B[u]):!ab.settings.allow_html_data_urls&&v(t)&&x(B[u]))}}})})}}),m("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(x,w,v,u,t,s){function r(b){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(b)||/class="OutlineElement/.test(b)||/id="?docs\-internal\-guid\-/.test(b)}function q(a){var f,e;return e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],a=a.replace(/^[\u00a0 ]+/,""),x.each(e,function(b){return b.test(a)?(f=!0,!1):void 0}),f}function p(b){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(b)}function o(b){var a=b.settings;b.on("BeforePastePreProcess",function(z){function y(Q){function P(R){var S="";if(3===R.type){return R.value}if(R=R.firstChild){do{S+=P(R)}while(R=R.next)}return S}function O(S,R){if(3===S.type&&R.test(S.value)){return S.value=S.value.replace(R,""),!1}if(S=S.firstChild){do{if(!O(S,R)){return !1}}while(S=S.next)}return !0}function N(R){if(R._listIgnore){return void R.remove()}if(R=R.firstChild){do{N(R)}while(R=R.next)}}function M(S,R,U){var T=S._listLevel||J;T!=J&&(J>T?L&&(L=L.parent.parent):(K=L,L=null)),L&&L.name==R?L.append(S):(K=K||L,L=new t(R,1),U>1&&L.attr("start",""+U),S.wrap(L)),S.name="li",T>J&&K&&K.lastChild.append(L),J=T,N(S),O(S,/^\u00a0+/),O(S,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),O(S,/^\u00a0+/)}for(var L,K,J=1,I=[],H=Q.firstChild;"undefined"!=typeof H&&null!==H;){if(I.push(H),H=H.walk(),null!==H){for(;"undefined"!=typeof H&&H.parent!==Q;){H=H.walk()}}}for(var G=0;G<I.length;G++){if(Q=I[G],"p"==Q.name&&Q.firstChild){var F=P(Q);if(p(F)){M(Q,"ul");continue}if(q(F)){var E=/([0-9]+)\./.exec(F),D=1;E&&(D=parseInt(E[1],10)),M(Q,"ol",D);continue}if(Q._listLevel){M(Q,"ul",1);continue}L=null}else{K=L,L=null}}}function g(D,H){var G,F={},E=b.dom.parseStyle(H);return x.each(E,function(I,J){switch(J){case"mso-list":G=/\w+ \w+([0-9]+)/i.exec(H),G&&(D._listLevel=parseInt(G[1],10)),/Ignore/i.test(I)&&D.firstChild&&(D._listIgnore=!0,D.firstChild._listIgnore=!0);break;case"horiz-align":J="text-align";break;case"vert-align":J="vertical-align";break;case"font-color":case"mso-foreground":J="color";break;case"mso-background":case"mso-highlight":J="background";break;case"font-weight":case"font-style":return void ("normal"!=I&&(F[J]=I));case"mso-element":if(/^(comment|comment-list)$/i.test(I)){return void D.remove()}}return 0===J.indexOf("mso-comment")?void D.remove():void (0!==J.indexOf("mso-")&&("all"==f||e&&e[J])&&(F[J]=I))}),/(bold)/i.test(F["font-weight"])&&(delete F["font-weight"],D.wrap(new t("b",1))),/(italic)/i.test(F["font-style"])&&(delete F["font-style"],D.wrap(new t("i",1))),F=b.dom.serializeStyle(F,D.name),F?F:null}var f,e,d=z.content;if(d=d.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),d=d.replace(/<br class="?Apple-interchange-newline"?>/gi,""),f=a.paste_retain_style_properties,f&&(e=x.makeMap(f.split(/[, ]/))),a.paste_enable_default_filters!==!1&&r(z.content)){z.wordContent=!0,d=s.filter(d,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(E,D){return D.length>0?D.replace(/./," ").slice(Math.floor(D.length/2)).split("").join("\xa0"):""}]]);var c=a.paste_word_valid_elements;c||(c="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var C=new v({valid_elements:c,valid_children:"-li[p]"});x.each(C.elements,function(D){D.attributes["class"]||(D.attributes["class"]={},D.attributesOrder.push("class")),D.attributes.style||(D.attributes.style={},D.attributesOrder.push("style"))});var B=new w({},C);B.addAttributeFilter("style",function(E){for(var D,F=E.length;F--;){D=E[F],D.attr("style",g(D,D.attr("style"))),"span"==D.name&&D.parent&&!D.attributes.length&&D.unwrap()}}),B.addAttributeFilter("class",function(E){for(var D,G,F=E.length;F--;){D=E[F],G=D.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(G)&&D.remove(),D.attr("class",null)}}),B.addNodeFilter("del",function(E){for(var D=E.length;D--;){E[D].remove()}}),B.addNodeFilter("a",function(E){for(var D,H,G,F=E.length;F--;){if(D=E[F],H=D.attr("href"),G=D.attr("name"),H&&-1!=H.indexOf("#_msocom_")){D.remove()}else{if(H&&0===H.indexOf("file://")&&(H=H.split("#")[1],H&&(H="#"+H)),H||G){if(G&&!/^_?(?:toc|edn|ftn)/i.test(G)){D.unwrap();continue}D.attr({href:H,name:G})}else{D.unwrap()}}}});var A=B.parse(d);a.paste_convert_word_fake_lists!==!1&&y(A),z.content=new u({validate:a.validate},C).serialize(A)}})}return o.isWordContent=r,o}),m("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(f,e,o,g){return function(d){function c(p){d.on("BeforePastePreProcess",function(q){q.content=p(q.content)})}function b(p){if(!o.isWordContent(p)){return p}var r=[];e.each(d.schema.getBlockElements(),function(t,s){r.push(s)});var q=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return p=g.filter(p,[[q,"$1"]]),p=g.filter(p,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function a(q){if(o.isWordContent(q)){return q}var p=d.settings.paste_webkit_styles;if(d.settings.paste_remove_styles_if_webkit===!1||"all"==p){return q}if(p&&(p=p.split(/[, ]/)),p){var s=d.dom,r=d.selection.getNode();q=q.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(B,A,z,y){var x=s.parseStyle(z,"span"),w={};if("none"===p){return A+y}for(var v=0;v<p.length;v++){var u=x[p[v]],t=s.getStyle(r,p[v],!0);/color/.test(p[v])&&(u=s.toHex(u),t=s.toHex(t)),t!=u&&(w[p[v]]=u)}return w=s.serializeStyle(w,"span"),w?A+' style="'+w+'"'+y:A+y})}else{q=q.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")}return q=q.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(u,t,w,v){return t+' style="'+w+'"'+v})}f.webkit&&c(a),f.ie&&c(b)}}),m("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(g,f,q,p){var o;g.add("paste",function(b){function s(){return o||b.settings.paste_plaintext_inform===!1}function r(){if("text"==e.pasteFormat){this.active(!1),e.pasteFormat="html",b.fire("PastePlainTextToggle",{state:!1})}else{if(e.pasteFormat="text",this.active(!0),!s()){var a=b.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");b.notificationManager.open({text:a,type:"info"}),o=!0,b.fire("PastePlainTextToggle",{state:!0})}}b.focus()}var e,d=this,c=b.settings;d.clipboard=e=new f(b),d.quirks=new p(b),d.wordFilter=new q(b),b.settings.paste_as_text&&(d.clipboard.pasteFormat="text"),c.paste_preprocess&&b.on("PastePreProcess",function(t){c.paste_preprocess.call(d,d,t)}),c.paste_postprocess&&b.on("PastePostProcess",function(t){c.paste_postprocess.call(d,d,t)}),b.addCommand("mceInsertClipboardContent",function(u,t){t.content&&d.clipboard.pasteHtml(t.content),t.text&&d.clipboard.pasteText(t.text)}),b.settings.paste_block_drop&&b.on("dragend dragover draggesture dragdrop drop drag",function(t){t.preventDefault(),t.stopPropagation()}),b.settings.paste_data_images||b.on("drop",function(u){var t=u.dataTransfer;t&&t.files&&t.files.length>0&&u.preventDefault()}),b.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:r,active:"text"==d.clipboard.pasteFormat}),b.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:e.pasteFormat,onclick:r})})}),k(["tinymce/pasteplugin/Utils"])}(this);