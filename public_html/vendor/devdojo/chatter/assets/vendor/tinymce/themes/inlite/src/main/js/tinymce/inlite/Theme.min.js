define("tinymce/inlite/Theme",["global!tinymce.ThemeManager","global!tinymce.util.Delay","tinymce/inlite/ui/Panel","tinymce/inlite/ui/Buttons","tinymce/inlite/core/SkinLoader","tinymce/inlite/core/SelectionMatcher","tinymce/inlite/core/ElementMatcher","tinymce/inlite/core/Matcher","tinymce/inlite/alien/Arr","tinymce/inlite/core/PredicateId"],function(p,c,o,q,j,t,r,l,f,e){var s=function(v){var w=v.selection.getNode();var u=v.dom.getParents(w);return u};var b=function(w,u,y,v){var x=function(z){return w.dom.is(z,u)};return{predicate:x,id:y,items:v}};var i=function(u){var v=u.contextToolbars;return f.flatten([v?v:[],b(u,"img","image","alignleft aligncenter alignright")])};var h=function(w,y){var u,x,v;x=s(w);v=e.fromContextToolbars(y);u=l.match(w,[r.element(x[0],v),t.textSelection("text"),t.emptyTextBlock(x,"insert"),r.parent(x,v)]);return u&&u.rect?u:null};var m=function(w,v){var u=function(){var y=i(w);var x=h(w,y);if(x){v.show(w,x.id,x.rect,y)}else{v.hide()}};return function(){if(!w.removed){u()}}};var k=function(u,v){return function(){if(!u.inForm()){v()}}};var n=function(w,v){var x=c.throttle(m(w,v),0);var u=c.throttle(k(v,m(w,v)),0);w.on("blur hide ObjectResizeStart",v.hide);w.on("click",x);w.on("nodeChange mouseup",u);w.on("ResizeEditor ResizeWindow keyup",x);w.on("remove",v.remove);w.shortcuts.add("Alt+F10","",v.focus)};var a=function(v,u){v.shortcuts.remove("meta+k");v.shortcuts.add("meta+k","",function(){var x=i(v);var w=w=l.match(v,[t.textSelection("quicklink")]);if(w){u.show(v,w.id,w.rect,x)}})};var g=function(w,v){var u=w.settings.skin||"lightgray";j.load(w,u,function(){n(w,v);a(w,v)});return{}};var d=function(u){throw new Error(u)};p.add("inlite",function(w){var u=new o();q.addToEditor(w,u);var v=function(){return w.inline?g(w,u):d("inlite theme only supports inline mode.")};return{renderUI:v}});return function(){}});