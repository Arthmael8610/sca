tinymce.ThemeManager.add("modern",function(a){function b(u,v){var w,x=[];if(u){return e(u.split(/[ ,]/),function(A){function y(){function C(D){return function(H,E){for(var F,G=E.parents.length;G--&&(F=E.parents[G].nodeName,"OL"!=F&&"UL"!=F);){}A.active(H&&F==D)}}var B=a.selection;"bullist"==z&&B.selectorChanged("ul > li",C("UL")),"numlist"==z&&B.selectorChanged("ol > li",C("OL")),A.settings.stateSelector&&B.selectorChanged(A.settings.stateSelector,function(D){A.active(D)},!0),A.settings.disabledStateSelector&&B.selectorChanged(A.settings.disabledStateSelector,function(D){A.disabled(D)})}var z;"|"==A?w=null:t.has(A)?(A={type:A,size:v},x.push(A),w=null):(w||(w={type:"buttongroup",items:[]},x.push(w)),a.buttons[A]&&(z=A,A=a.buttons[z],"function"==typeof A&&(A=A()),A.type=A.type||"button",A.size=v,A=t.create(A),w.items.push(A),a.initialized?y():a.on("init",y)))}),{type:"toolbar",layout:"flow",items:x}}}function c(u){function v(y){return y?(w.push(b(y,u)),!0):void 0}var w=[];if(tinymce.isArray(s.toolbar)){if(0===s.toolbar.length){return}tinymce.each(s.toolbar,function(y,z){s["toolbar"+(z+1)]=y}),delete s.toolbar}for(var x=1;10>x&&v(s["toolbar"+x]);x++){}return w.length||s.toolbar===!1||v(s.toolbar||n),w.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:w}:void 0}function d(){function w(D){var C;return"|"==D?{text:"|"}:C=a.menuItems[D]}function z(H){var I,D,E,F,G;if(G=tinymce.makeMap((s.removed_menuitems||"").split(/[ ,]/)),s.menu?(D=s.menu[H],F=!0):D=l[H],D){I={text:D.title},E=[],e((D.items||"").split(/[ ,]/),function(K){var J=w(K);J&&!G[K]&&E.push(w(K))}),F||e(a.menuItems,function(J){J.context==H&&("before"==J.separator&&E.push({text:"|"}),J.prependToContext?E.unshift(J):E.push(J),"after"==J.separator&&E.push({text:"|"}))});for(var C=0;C<E.length;C++){"|"==E[C].text&&(0!==C&&C!=E.length-1||E.splice(C,1))}if(I.menu=E,!I.menu.length){return null}}return I}var A,B=[],u=[];if(s.menu){for(A in s.menu){u.push(A)}}else{for(A in l){u.push(A)}}for(var v="string"==typeof s.menubar?s.menubar.split(/[ ,]/):u,x=0;x<v.length;x++){var y=v[x];y=z(y),y&&B.push(y)}return B}function f(u){function v(w){var x=u.find(w)[0];x&&x.focus(!0)}a.shortcuts.add("Alt+F9","",function(){v("menubar")}),a.shortcuts.add("Alt+F10","",function(){v("toolbar")}),a.shortcuts.add("Alt+F11","",function(){v("elementpath")}),u.on("cancel",function(){a.focus()})}function h(w,A){function u(B){return{width:B.clientWidth,height:B.clientHeight}}var v,x,y,z;v=a.getContainer(),x=a.getContentAreaContainer().firstChild,y=u(v),z=u(x),null!==w&&(w=Math.max(s.min_width||100,w),w=Math.min(s.max_width||65535,w),g.setStyle(v,"width",w+(y.width-z.width)),g.setStyle(x,"width",w)),A=Math.max(s.min_height||100,A),A=Math.min(s.max_height||65535,A),g.setStyle(x,"height",A),a.fire("ResizeEditor")}function k(u,v){var w=a.getContentAreaContainer();r.resizeTo(w.clientWidth+u,w.clientHeight+v)}function m(){function A(){return a.contextToolbars||[]}function B(L){var I,J,K;return I=tinymce.DOM.getPos(a.getContentAreaContainer()),J=a.dom.getRect(L),K=a.dom.getRoot(),"BODY"==K.nodeName&&(J.x-=K.ownerDocument.documentElement.scrollLeft||K.scrollLeft,J.y-=K.ownerDocument.documentElement.scrollTop||K.scrollTop),J.x+=I.x,J.y+=I.y,J}function C(){e(a.contextToolbars,function(I){I.panel&&I.panel.hide()})}function D(J,K,I){K=K?K.substr(0,2):"",e({t:"down",b:"up"},function(L,M){J.classes.toggle("arrow-"+L,I(M,K.substr(0,1)))}),e({l:"left",r:"right"},function(L,M){J.classes.toggle("arrow-"+L,I(M,K.substr(1,1)))})}function E(I){return{left:I.x,top:I.y,width:I.w,height:I.h,right:I.x+I.w,bottom:I.y+I.h}}function F(L,M,I,J,K){return K=E({x:L,y:M,w:K.w,h:K.h}),s.inline_toolbar_position_handler&&(K=s.inline_toolbar_position_handler({elementRect:E(I),contentAreaRect:E(J),panelRect:K})),K}function u(I,J){I.moveTo(J.left,J.top)}function v(P){var Q,I,J,K,L,M,N,O;if(!a.removed){if(!P||!P.toolbar.panel){return void C()}N=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],L=P.toolbar.panel,L.show(),J=B(P.element),I=tinymce.DOM.getRect(L.getEl()),K=tinymce.DOM.getRect(a.getContentAreaContainer()||a.getBody()),O=25,J.w=P.element.clientWidth,J.h=P.element.clientHeight,a.inline||(K.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(P.element)&&J.w<O&&(J=i.inflate(J,0,8)),Q=i.findBestRelativePosition(I,J,K,N),J=i.clamp(J,K),Q?(M=i.relativePosition(I,J,Q),u(L,F(M.x,M.y,J,K,I))):(K.h+=I.h,J=i.intersect(K,J),J?(Q=i.findBestRelativePosition(I,J,K,["bc-tc","bl-tl","br-tr"]),Q?(M=i.relativePosition(I,J,Q),u(L,F(M.x,M.y,J,K,I))):u(L,F(J.x,J.y,J,K,I))):L.hide()),D(L,Q,function(R,S){return R===S})}}function w(){function I(){a.selection&&v(x(a.selection.getNode()))}tinymce.util.Delay.requestAnimationFrame(I)}function y(){z||(z=a.selection.getScrollContainer()||a.getWin(),tinymce.$(z).on("scroll",w),a.on("remove",function(){tinymce.$(z).off("scroll")}))}function G(I){var J;return I.toolbar.panel?(I.toolbar.panel.show(),void v(I)):(y(),J=t.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:b(I.toolbar.items),oncancel:function(){a.focus()}}),I.toolbar.panel=J,J.renderTo(document.body).reflow(),void v(I))}function H(){tinymce.each(A(),function(I){I.panel&&I.panel.hide()})}function x(M){var I,J,K,L=A();for(K=a.$(M).parents().add(M),I=K.length-1;I>=0;I--){for(J=L.length-1;J>=0;J--){if(L[J].predicate(K[I])){return{toolbar:L[J],element:K[I]}}}}return null}var z;a.on("click keyup setContent",function(I){("setcontent"!=I.type||I.selection)&&tinymce.util.Delay.setEditorTimeout(a,function(){var J;J=x(a.selection.getNode()),J?(H(),G(J)):H()})}),a.on("blur hide",H),a.on("ObjectResizeStart",function(){var I=x(a.selection.getNode());I&&I.toolbar.panel&&I.toolbar.panel.hide()}),a.on("nodeChange ResizeEditor ResizeWindow",w),a.on("remove",function(){tinymce.each(A(),function(I){I.panel&&I.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var I=x(a.selection.getNode());I&&I.toolbar.panel&&I.toolbar.panel.items()[0].focus()})}function o(u){return function(){u.initialized?u.fire("SkinLoaded"):u.on("init",function(){u.fire("SkinLoaded")})}}function p(v){function w(){if(u&&u.moveRel&&u.visible()&&!u._fixed){var D=a.selection.getScrollContainer(),E=a.getBody(),F=0,G=0;if(D){var B=g.getPos(E),C=g.getPos(D);F=Math.max(0,C.x-B.x),G=Math.max(0,C.y-B.y)}u.fixed(!1).moveRel(E,a.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(F,G)}}function y(){u&&(u.show(),w(),g.addClass(a.getBody(),"mce-edit-focus"))}function z(){u&&(u.hide(),j.hideAll(),g.removeClass(a.getBody(),"mce-edit-focus"))}function A(){return u?void (u.visible()||y()):(u=r.panel=t.create({type:x?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!x,border:1,items:[s.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:d()},c(s.toolbar_items_size)]}),a.fire("BeforeRenderUI"),u.renderTo(x||document.body).reflow(),f(u),y(),m(),a.on("nodeChange",w),a.on("activate",y),a.on("deactivate",z),void a.nodeChanged())}var u,x;return s.fixed_toolbar_container&&(x=g.select(s.fixed_toolbar_container)[0]),s.content_editable=!0,a.on("focus",function(){v.skinUiCss?tinymce.DOM.styleSheetLoader.load(v.skinUiCss,A,A):A()}),a.on("blur hide",z),a.on("remove",function(){u&&(u.remove(),u=null)}),v.skinUiCss&&tinymce.DOM.styleSheetLoader.load(v.skinUiCss,o(a)),{}}function q(u){function w(){return function(z){"readonly"==z.mode?x.find("*").disabled(!0):x.find("*").disabled(!1)}}var x,y,v;return u.skinUiCss&&tinymce.DOM.styleSheetLoader.load(u.skinUiCss,o(a)),x=r.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[s.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:d()},c(s.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),s.resize!==!1&&(y={type:"resizehandle",direction:s.resize,onResizeStart:function(){var z=a.getContentAreaContainer().firstChild;v={width:z.clientWidth,height:z.clientHeight}},onResize:function(z){"both"==s.resize?h(v.width+z.deltaX,v.height+z.deltaY):h(null,v.height+z.deltaY)}}),s.statusbar!==!1&&x.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:a},y]}),a.fire("BeforeRenderUI"),a.on("SwitchMode",w()),x.renderBefore(u.targetNode).reflow(),s.readonly&&a.setMode("readonly"),s.width&&tinymce.DOM.setStyle(x.getEl(),"width",s.width),a.on("remove",function(){x.remove(),x=null}),f(x),m(),{iframeContainer:x.find("#iframe")[0].getEl(),editorContainer:x.getEl()}}var r=this,s=a.settings,t=tinymce.ui.Factory,e=tinymce.each,g=tinymce.DOM,i=tinymce.geom.Rect,j=tinymce.ui.FloatPanel,l={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";r.renderUI=function(u){var v=s.skin!==!1?s.skin||"lightgray":!1;if(v){var w=s.skin_url;w=w?a.documentBaseURI.toAbsolute(w):tinymce.baseURL+"/skins/"+v,tinymce.Env.documentMode<=7?u.skinUiCss=w+"/skin.ie7.min.css":u.skinUiCss=w+"/skin.min.css",a.contentCSS.push(w+"/content"+(a.inline?".inline":"")+".min.css")}return a.on("ProgressState",function(x){r.throbber=r.throbber||new tinymce.ui.Throbber(r.panel.getEl("body")),x.state?r.throbber.show(x.time):r.throbber.hide()}),s.inline?p(u):q(u)},r.resizeTo=h,r.resizeBy=k});