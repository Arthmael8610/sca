asynctest("browser/core/ThemeTest",["ephox.mcagar.api.TinyLoader","ephox.mcagar.api.TinyApis","ephox.mcagar.api.TinyActions","ephox.mcagar.api.TinyDom","tinymce/inlite/Theme","ephox.agar.api.Pipeline","ephox.agar.api.Chain","ephox.agar.api.UiFinder","ephox.agar.api.Mouse","ephox.agar.api.GeneralSteps","ephox.agar.api.UiControls","ephox.agar.api.FocusTools"],function(Y,ae,O,S,af,K,T,ai,J,X,ab,Q){var aa=arguments[arguments.length-2];var U=arguments[arguments.length-1];var M=S.fromDom(document.body);var F=T.fromChainsWith(M,[ai.cWaitForState("label",".mce-tinymce-inline",function(a){return a.dom().style.display===""})]);var ad=function(a){return T.fromChains([ai.cFindIn('div[aria-label="'+a+'"]'),J.cTrueClick])};var ah=T.asStep(S.fromDom(document),[Q.cGetFocused,J.cTrueClick]);var Z=function(a){return T.asStep({},[F,ad(a)])};var G=function(){return T.asStep({},[F])};var N=function(a){return X.sequence([a.sSetContent("<p>a</p>"),a.sSetSelection([0,0],0,[0,0],1),Z("Bold"),a.sAssertContent("<p><strong>a</strong></p>")])};var L=function(a){return X.sequence([a.sSetContent("<p>a</p>"),a.sSetSelection([0,0],0,[0,0],1),Z("Heading 2"),a.sAssertContent("<h2>a</h2>")])};var H=function(a){return T.asStep({},[F,ad("Insert/Edit link"),F,ai.cFindIn("input"),ab.cSetValue(a),F,ad("Ok")])};var P=T.fromChainsWith(M,[ai.cWaitForState("window element",".mce-window",function(){return true})]);var V=function(a){return T.fromChains([ai.cFindIn('button:contains("'+a+'")'),J.cTrueClick])};var aj=function(a){return T.asStep({},[P,V(a)])};var W=function(b,a){return X.sequence([H(b),aj(a)])};var R=T.asStep({},[F,ad("Insert/Edit link"),F,ad("Remove link")]);var ag=function(d){var f=function(j,h,i,k,m,l,g){return X.sequence([d.sSetContent(j),d.sSetSelection(h,i,k,m),g,d.sAssertContent(l)])};var e=function(j,h,i,k,g,l,m){return f(j,h,i,k,g,m,H(l))};var a=function(j,h,i,k,g,l){return f(j,h,i,k,g,l,R)};var b=function(j,h,i,k,g,l,m){return f(j,h,i,k,g,m,W(l,"Ok"))};var c=function(j,h,i,k,g,l,m){return f(j,h,i,k,g,m,W(l,"Cancel"))};return X.sequence([b("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="http://www.site.com">a</a></p>'),c("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="www.site.com">a</a></p>'),e("<p>a</p>",[0,0],0,[0,0],1,"#1",'<p><a href="#1">a</a></p>'),e('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"#2",'<p><a id="x" href="#2">a</a></p>'),e('<p><a href="#3">a</a></p>',[0,0,0],0,[0,0,0],1,"","<p>a</p>"),a('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"<p>a</p>")])};var ac=function(a){return X.sequence([a.sSetContent("<p><br></p><p>b</p>"),a.sSetCursor([0],0),Z("Insert table"),a.sAssertContent(['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>","<p>b</p>"].join("\n"))])};var I=function(b,a){return X.sequence([b.sSetContent("<p>a</p>"),b.sSetSelection([0,0],0,[0,0],1),G(),a.sContentKeydown(121,{alt:true}),ah,b.sAssertContent("<p><strong>a</strong></p>")])};Y.setup(function(c,a,d){var e=ae(c),b=O(c);K.async({},[N(e),L(e),ag(e),ac(e),I(e,b)],a,d)},{theme:"inlite",plugins:"image table link paste contextmenu textpattern",insert_toolbar:"quickimage media quicktable",selection_toolbar:"bold italic | quicklink h1 h2 blockquote",inline:true},aa,U)});