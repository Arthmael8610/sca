asynctest("browser/core/ActionsTest",["ephox.mcagar.api.TinyLoader","ephox.mcagar.api.TinyApis","tinymce/inlite/core/Actions","ephox.agar.api.Pipeline","ephox.agar.api.Step","ephox.agar.api.GeneralSteps"],function(r,B,C,A,v,D){var q=arguments[arguments.length-2];var x=arguments[arguments.length-1];var z=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return v.sync(function(){a.apply(null,[].concat(b).concat(c))})}};var s=function(a,b){var c=function(d,f,h,g){var e=z(C.insertTable,a);return D.sequence([b.sSetContent(""),e(d,f),b.sAssertContent(h,g)])};return D.sequence([c(2,3,['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>"].join("\n"),"Should be a 2x3 table"),c(3,2,['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>"].join("\n"),"Should be a 3x2 table")])};var t=function(a,b){var c=function(e){var d=z(C.formatBlock,a);return D.sequence([b.sSetContent("<p>a</p>"),b.sSetCursor([0],0),d(e),b.sAssertContent("<"+e+">a</"+e+">","Should be a "+e+" block")])};return D.sequence([c("h1"),c("h2"),c("pre")])};var y=function(a,b){var c=function(k,d,f,g,i,j,e){var h=z(C.createLink,a);return D.sequence([b.sSetContent(k),b.sSetSelection(f,g,i,j),h(d),b.sAssertContent(e,"Should have a link")])};return D.sequence([c("<p>a</p>","#1",[0,0],0,[0,0],1,'<p><a href="#1">a</a></p>'),c('<p><a href="#1">a</a></p>',"#2",[0,0],0,[0,0],1,'<p><a href="#2">a</a></p>'),c('<p><a href="#1"><em>a</em></a></p>',"#2",[0,0,0],0,[0,0,0],1,'<p><a href="#2"><em>a</em></a></p>')])};var p=function(b,c){var a=function(e,g,h,i,j,f){var d=z(C.unlink,b);return D.sequence([c.sSetContent(e),c.sSetSelection(g,h,i,j),d(),c.sAssertContent(f,"Should not have a link")])};return D.sequence([a("<p>a</p>",[0,0],0,[0,0],1,"<p>a</p>"),a('<p><a href="#">a</a></p>',[0,0,0],0,[0,0,0],1,"<p>a</p>"),a('<p><a href="#"><em>a</em></a></p>',[0,0,0],0,[0,0,0],1,"<p><em>a</em></p>"),a('<p><a href="#">a</a>b</p>',[0,0,0],0,[0,1],1,"<p>ab</p>")])};var w=function(d,b){var a=atob(d);var e=new Uint8Array(a.length);for(var c=0;c<e.length;c++){e[c]=a.charCodeAt(c)}return new Blob([e],{type:b})};var u=function(a,b){var d=function(g,k,f,i,j,h){var l=z(C.insertBlob,a);return D.sequence([b.sSetContent(g),b.sSetCursor(k,f),l(i,j),b.sAssertContent(h,"Should have a image")])};var e="R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";var c=w(e,"image/gif");return D.sequence([d("<p>a</p>",[0,0],0,e,c,'<p><img src="data:image/gif;base64,'+e+'" />a</p>')])};r.setup(function(b,a,c){var d=B(b);A.async({},[s(b,d),t(b,d),u(b,d),y(b,d),p(b,d)],a,c)},{inline:true},q,x)});