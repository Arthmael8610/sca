asynctest("browser/core/ThemeTest",["ephox.mcagar.api.TinyLoader","ephox.mcagar.api.TinyApis","ephox.mcagar.api.TinyActions","ephox.mcagar.api.TinyDom","tinymce/inlite/Theme","ephox.agar.api.Pipeline","ephox.agar.api.Chain","ephox.agar.api.UiFinder","ephox.agar.api.Mouse","ephox.agar.api.GeneralSteps","ephox.agar.api.UiControls","ephox.agar.api.FocusTools"],function(l,f,s,B,e,u,A,b,v,m,i,r){var j=arguments[arguments.length-2];var p=arguments[arguments.length-1];var E=B.fromDom(document.body);var z=A.fromChainsWith(E,[b.cWaitForState("label",".mce-tinymce-inline",function(F){return F.dom().style.display===""})]);var g=function(F){return A.fromChains([b.cFindIn('div[aria-label="'+F+'"]'),v.cTrueClick])};var c=A.asStep(B.fromDom(document),[r.cGetFocused,v.cTrueClick]);var k=function(F){return A.asStep({},[z,g(F)])};var y=function(){return A.asStep({},[z])};var D=function(F){return m.sequence([F.sSetContent("<p>a</p>"),F.sSetSelection([0,0],0,[0,0],1),k("Bold"),F.sAssertContent("<p><strong>a</strong></p>")])};var t=function(F){return m.sequence([F.sSetContent("<p>a</p>"),F.sSetSelection([0,0],0,[0,0],1),k("Heading 2"),F.sAssertContent("<h2>a</h2>")])};var x=function(F){return A.asStep({},[z,g("Insert/Edit link"),z,b.cFindIn("input"),i.cSetValue(F),z,g("Ok")])};var C=A.fromChainsWith(E,[b.cWaitForState("window element",".mce-window",function(){return true})]);var o=function(F){return A.fromChains([b.cFindIn('button:contains("'+F+'")'),v.cTrueClick])};var a=function(F){return A.asStep({},[C,o(F)])};var n=function(F,G){return m.sequence([x(F),a(G)])};var q=A.asStep({},[z,g("Insert/Edit link"),z,g("Remove link")]);var d=function(H){var F=function(P,R,Q,O,M,N,L){return m.sequence([H.sSetContent(P),H.sSetSelection(R,Q,O,M),L,H.sAssertContent(N)])};var G=function(P,R,Q,O,L,N,M){return F(P,R,Q,O,L,M,x(N))};var K=function(O,Q,P,N,L,M){return F(O,Q,P,N,L,M,q)};var J=function(P,R,Q,O,L,N,M){return F(P,R,Q,O,L,M,n(N,"Ok"))};var I=function(P,R,Q,O,L,N,M){return F(P,R,Q,O,L,M,n(N,"Cancel"))};return m.sequence([J("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="http://www.site.com">a</a></p>'),I("<p>a</p>",[0,0],0,[0,0],1,"www.site.com",'<p><a href="www.site.com">a</a></p>'),G("<p>a</p>",[0,0],0,[0,0],1,"#1",'<p><a href="#1">a</a></p>'),G('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"#2",'<p><a id="x" href="#2">a</a></p>'),G('<p><a href="#3">a</a></p>',[0,0,0],0,[0,0,0],1,"","<p>a</p>"),K('<p><a id="x" href="#1">a</a></p>',[0,0,0],0,[0,0,0],1,"<p>a</p>")])};var h=function(F){return m.sequence([F.sSetContent("<p><br></p><p>b</p>"),F.sSetCursor([0],0),k("Insert table"),F.sAssertContent(['<table style="width: 100%;">',"<tbody>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","<tr>","<td>&nbsp;</td>","<td>&nbsp;</td>","</tr>","</tbody>","</table>","<p>b</p>"].join("\n"))])};var w=function(F,G){return m.sequence([F.sSetContent("<p>a</p>"),F.sSetSelection([0,0],0,[0,0],1),y(),G.sContentKeydown(121,{alt:true}),c,F.sAssertContent("<p><strong>a</strong></p>")])};l.setup(function(H,J,G){var F=f(H),I=s(H);u.async({},[D(F),t(F),d(F),h(F),w(F,I)],J,G)},{theme:"inlite",plugins:"image table link paste contextmenu textpattern",insert_toolbar:"quickimage media quicktable",selection_toolbar:"bold italic | quicklink h1 h2 blockquote",inline:true},j,p)});