$.validator.addMethod("nieES",function(e){var d=new RegExp(/^[MXYZ]{1}[0-9]{7,8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/gi);var a="TRWAGMYFPDXBNJZSQVHLCKET",c=e.substr(e.length-1).toUpperCase(),b;e=e.toString().toUpperCase();if(e.length>10||e.length<9||!d.test(e)){return false}e=e.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2");b=e.length===9?e.substr(0,8):e.substr(0,9);return a.charAt(parseInt(b,10)%23)===c},"Please specify a valid NIE number.");