$.validator.addMethod("cifES",function(m){var f=new RegExp(/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/gi);var e=m.substring(0,1),g=m.substring(1,8),j=m.substring(8,9),b=0,c=0,a=0,h,d,l,k;function o(i){return i%2===0}if(m.length!==9||!f.test(m)){return false}for(h=0;h<g.length;h++){d=parseInt(g[h],10);if(o(h)){d*=2;a+=d<10?d:d-9}else{c+=d}}b=c+a;l=(10-(b).toString().substr(-1)).toString();l=parseInt(l,10)>9?"0":l;k="JABCDEFGHI".substr(l,1).toString();if(e.match(/[ABEH]/)){return j===l}else{if(e.match(/[KPQS]/)){return j===k}else{return j===l||j===k}}return false},"Please specify a valid CIF number.");