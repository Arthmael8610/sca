$.validator.addMethod("nifES",function(a){a=a.toUpperCase();if(!a.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")){return false}if(/^[0-9]{8}[A-Z]{1}$/.test(a)){return("TRWAGMYFPDXBNJZSQVHLCKE".charAt(a.substring(8,0)%23)===a.charAt(8))}if(/^[KLM]{1}/.test(a)){return(a[8]===String.fromCharCode(64))}return false},"Please specify a valid NIF number.");