(function(){function h(l,j){var o=[],f=l[0].opt.gridwidth,n=l[0].opt.visibilityLevels;Array.isArray(this.gridWidth)&&(f=f[0]);l.find("> ul > li").each(function(k){if(this.hasAttribute("data-filmstrip")){var m=a(this),p={transition:"fade",masterspeed:300};0===k&&(p.fstransition="fade",p.fsmasterspeed=300);o[o.length]=new e(l[0],j,f,n,m.data(p),JSON.parse(this.getAttribute("data-filmstrip")))}});this.slider=l;this.strips=o;l.one("revolution.slide.onloaded",this.onLoaded.bind(this)).on("revolution.slide.onbeforeswap",this.beforeSwap.bind(this)).on("revolution.slide.onafterswap",this.afterSwap.bind(this))}function b(j){var f={};f[j.direction]=j.resetPosition;punchgs.TweenLite.set(j.strip,f);d.call(j)}function d(){var f={ease:punchgs.Linear.easeNone,onComplete:b,onCompleteParams:[this]};f[this.direction]=this.moveTo;this.carousel?this.tween?this.tween.resume():this.tween=punchgs.TweenLite.to(this.strip,this.time,f):punchgs.TweenLite.to(this.strip,this.time,f)}function c(j){var f=document.createElement("img");f.className="rs-addon-strip-img";f.setAttribute("data-lazyload",j.url);j.alt&&f.setAttribute("alt",j.alt);f.src=g+"/public/assets/images/transparent.png";return f}function e(y,x,w,o,q,u){for(var v,l=u.imgs,r=l.length,t=document.createDocumentFragment(),j="left-to-right"===u.direction||"top-to-bottom"===u.direction,s=0;2>s;s++){if(j){for(v=r;v--;){t.appendChild(c(l[v]))}}else{for(v=0;v<r;v++){t.appendChild(c(l[v]))}}}r=document.createElement("div");s=u.filter?" "+u.filter:"";v=-1!==u.direction.search(/left|right/)?"horizontal":"vertical";r.className="rs-addon-strip-wrap rs-addon-strip-"+v+s;r.appendChild(t);q[0].appendChild(r);q[0].className+=" rs-addon-strip";this.strip=r;this.slide=q;this.slider=y;this.levels=o;this.reverse=j;this.carousel=x;this.gridWidth=w;this.times=u.times.split(",");this.resizer=this.sizer.bind(this);this.direction="horizontal"===v?"x":"y";y=u.times.split(",");r=y.length;speeds=[];for(s=0;4>s;s++){(x=s<r?parseInt(y[s]):10)?2>x&&(x=2):x=10,speeds[s]=x}this.times=speeds;a.data(q[0],"rs-addon-strip-"+q[0].getAttribute("data-index"),this)}var a,i,g;window.RsFilmstripAddOn=function(k,j,l,f){k&&j&&(a=k,i=a(window),g=l,"/"===g.substr(g.length-1)&&(g=g.slice(0,-1)),a.event.special.rsStripDestroyed={remove:function(m){m.handler()}},new h(j,f))};h.prototype={onLoaded:function(){if(!this.checkRemoved()){for(var j=this.strips.length,f=0;f<j;f++){this.strips[f].slide.find(".slotholder").append(this.strips[f].strip)}}},beforeSwap:function(j,f){this.checkRemoved()||f.nextslide.hasClass("rs-addon-strip")&&a.data(f.nextslide[0],"rs-addon-strip-"+f.nextslide[0].getAttribute("data-index")).start()},afterSwap:function(j,f){if(!this.checkRemoved()&&f.prevslide.hasClass("rs-addon-strip")){a.data(f.prevslide[0],"rs-addon-strip-"+f.prevslide[0].getAttribute("data-index")).onStop()}},checkRemoved:function(){return this.slider&&document.body.contains(this.slider[0])?!1:(this.destroy(),!0)},destroy:function(){i.off("resize.rsaddonstrip");if(this.strips){for(;this.strips.length;){this.strips[0].destroy(),this.strips.shift()}}for(var f in this){this.hasOwnProperty(f)&&delete this[f]}}};e.prototype={start:function(){clearTimeout(this.timer);this.resizeAdded||this.addResize();if(!this.carousel||this.carousel&&!this.tween){var f={};f[this.direction]=this.resetPosition;punchgs.TweenLite.set(this.strip,f)}this.running=!0;this.timer=setTimeout(this.onStart.bind(this),100)},onStart:function(){this.carousel||(this.strip.style.opacity="1");d.call(this)},stop:function(){clearTimeout(this.timer);this.carousel?this.tween?this.tween.pause():punchgs.TweenLite.killTweensOf(this.strip):punchgs.TweenLite.killTweensOf(this.strip)},onStop:function(){this.running=!1;this.carousel||(this.strip.style.opacity="0");this.stop()},addResize:function(){i.on("resize.rsaddonstrip",this.onResize.bind(this));"x"===this.direction&&(this.strip.style.height=this.slider.clientHeight+"px");this.resizeAdded=!0;this.sizer(!0)},onResize:function(){clearTimeout(this.resize);this.carousel&&delete this.tween;this.stop();"x"===this.direction&&(this.strip.style.height=this.slider.clientHeight+"px");this.resize=setTimeout(this.resizer,100)},sizer:function(){for(var j=this.slider.clientWidth,f,k=0;4>k;k++){if(j>=this.levels[k]){this.time=this.times[k];f=!0;break}}f||(this.time=this.times[3]);"x"===this.direction?(f=this.strip.clientWidth,this.strip.style.height=this.slider.clientHeight+"px",this.reverse?(this.moveTo=-(f/2-j),this.resetPosition=-(f-j)):(this.moveTo=-(f/2),this.resetPosition=0)):(j=this.strip.clientHeight,this.reverse?(f=this.slider.clientHeight,this.moveTo=-(j/2-f),this.resetPosition=-(j-f)):(this.moveTo=-(j/2),this.resetPosition=0));this.running?this.start():this.carousel&&(j={},j[this.direction]=this.resetPosition,punchgs.TweenLite.set(this.strip,j))},destroy:function(){clearTimeout(this.timer);clearTimeout(this.resize);punchgs.TweenLite.killTweensOf(this.strip);a.removeData(this.slide[0],"rs-addon-strip-"+this.slide[0].getAttribute("data-index"));for(var f in this){this.hasOwnProperty(f)&&delete this[f]}}}})();