(function(){var g,h,c,j=[],l=["onbeforeswap","layeraction","beforeredraw","afterdraw"],e='content: "[char]"; animation: tp-typewriter [speed]s steps(2, start) infinite';window.RsTypewriterAddOn=function(o,m){if(!m){return}var n=m.find(".tp-caption[data-typewriter]");if(n.length){new f(o,m,n)}};function f(t,q,s){j[j.length]=this;if(!g){g=t;g.event.special.typewriterDestroyed={remove:function(u){u.handler()}};c=document.createElement("textarea")}h="";this.layrs=[];var r=q[0];r=r.hasOwnProperty("opt")?r.opt:false;if(r&&r.hasOwnProperty("responsiveLevels")){r=r.responsiveLevels}if(Array.isArray(r)){this.levels=r}this.slider=q.on("typewriterDestroyed",d);s.each(this.writeLayerData.bind(this));if(h){var o=document.head||document.body;if(o){var p=document.createElement("style");p.type="text/css";p.innerHTML=h;o.appendChild(p)}}var m=l.length;for(var n=0;n<m;n++){q.on("revolution.slide."+l[n],this.eventCallback.bind(this))}}f.prototype={eventCallback:function(m,n){this[m.namespace.replace(".slide","")](n)},onbeforeswap:function(o){var n=this.layrs,m=n.length,p;o=o.currentslide[0];if(!o){return}while(m--){p=n[m];if(p.statc){continue}clearTimeout(p.timer);p.running=false;p.active=false;if(!o.contains(p.el)){p.el.innerHTML=p.orig;p.el.className=p.el.className+" hide-typewriter-cursor"}}},layeraction:function(m){if(m.eventtype!=="enterstage"){return}var n=g.data(m.layer[0],"typewriter");if(n&&m.layertype==="html"){n.active=true;n.start()}},beforeredraw:function(o){var n=this.layrs,m=n.length;while(m--){n[m].onRedraw()}},afterdraw:function(){var n=this.layrs,m=n.length;while(m--){n[m].onRedraw(true)}},writeLayerData:function(n,o){var m=g.trim(o.innerHTML);if(!m){o.removeAttribute("data-typewriter");return}if(o.getAttribute("data-whiteboard")){if(typeof console!=="undefined"){console.log("Whiteboard is disabled for Layers with Typewriter Add-On effect enabled")}o.removeAttribute("data-whiteboard")}this.layrs[this.layrs.length]=new i(o,m,this.levels,this.slider)}};function i(s,A,w,x){var H=JSON.parse(s.getAttribute("data-typewriter")),B=A.replace(/(_|\|)$/,""),q=s.className,p=H.lines,u=A,r=[],m,y,n,o,F,E,v,z,D,J,I,G,C;s.className=q+" hide-typewriter-cursor";for(var t in H){if(!H.hasOwnProperty(t)){continue}J=H[t];t=t.replace(/_([a-z])/g,b);this[t]=J==="on"?1:J==="off"?0:isNaN(J)===false?parseInt(J,10):J}if(this.blinking){h+="#"+s.id+":after {"+e.replace("[char]",this.cursorType==="one"?"_":"|").replace("[speed]",parseInt(this.blinkingSpeed,10)*0.001)+"}#"+s.id+'.hide-typewriter-cursor:after {content: ""}';if(this.background){y=s.getAttribute("data-width").replace(/[\[\]']+/g,"").split(",");if(w){D=y.length;for(C=0;C<D;C++){o=w[C];if(o===n){continue}v=y[C];v=v==="auto"||v==="none";if(C>0){v=v?"static":"absolute";h+="@media screen and (max-width: "+o+"px) {#"+s.id+".tp-caption[data-typewriter]:after {position: "+v+"}}"}else{if(v){s.setAttribute("data-typewriter-blinking","true")}}n=o}}else{v=y[0];if(v==="none"||v==="auto"){s.setAttribute("data-typewriter-blinking","true")}}}}if(this.sequenced&&p){A=[a(unescape(A))];p=p.split(",");D=p.length;for(C=0;C<D;C++){z=g.trim(p[C]);if(z){A[A.length]=a(unescape(z))}}s.setAttribute("data-typewriter-sequenced","true")}else{this.looped=false;this.sequenced=false;this.newlineDelay=this.linebreakDelay;p=a(A,true).split(/\r?\n|\r/g);D=p.length;A=[];for(C=0;C<D;C++){A[A.length]=g.trim(p[C]);A[A.length]=""}while(A[0]===""){A.shift()}while(A[A.length-1]===""){A.pop()}}if(this.wordDelay){m=H.delays;if(m){m=m.split(",");D=m.length;E=0;for(C=0;C<D;C++){F=unescape(m[C]).split("|");I=F[0];G=F[1];if(isNaN(I)===false&&isNaN(G)===false){I=parseInt(I);r[I+E-1]=parseInt(G);E+=I}}this.spaces=r}else{this.wordDelay=false}}this.el=s;this.txt=A;this.orig=u;this.clean=B;this.revapi=x;this.len=A.length;this.statc=q.search("tp-static-layer")!==-1;g.data(s,"typewriter",this)}i.prototype={start:function(n,m){clearTimeout(this.timer);if(this.paused){return}this.line=0;this.step=0;this.words=0;this.skip=false;this.rewind=false;this.rstart=false;this.breaker=false;this.paused=false;this.rpaused=false;this.str=this.txt[this.line];this.len=this.str.length;if(!m){this.el.innerHTML="&nbsp;";this.el.className=this.el.className.replace(/ hide-typewriter-cursor/g,"");this.timer=setTimeout(this.onStart.bind(this),this.startDelay)}else{this.timer=setTimeout(this.onStart.bind(this),n);this.revapi.trigger("revolution.slide.typewriterlooped",[this.el])}this.running=true;this.revapi.trigger("revolution.slide.typewriterstarted",[this.el]);this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,this.txt[this.line]])},onStart:function(){this.el.innerHTML="";this.animate()},animate:function(){var s,q,t,m,u=this.str,r=this.txt,n=this.step,p=this.rewind,o=!p?this.speed:this.deletionSpeed;if(n<this.len){if(!p){if(!this.breaker){q=u[n];if(q==="µ"){this.skip=true;this.breaker=true;o=this.linebreakDelay}}else{q="<br>";o=!this.skip?this.newlineDelay:this.linebreakDelay;this.breaker=false;this.skip=false;this.words=0;this.step--}if(!this.breaker){m=this.el.innerHTML;if(m==="&nbsp;"){m=""}this.el.innerHTML=m+q;if(this.wordDelay&&q===" "){t=this.words;m=this.spaces[t];if(m){o=m;this.words=t<this.spaces.length-1?t+1:0}else{this.words+=1}}}}else{u=u.slice(0,-1);this.str=u;this.el.innerHTML=u.replace(/µ/g,"<br>")||"&nbsp"}this.step++;s=true}else{if(this.rstart){if(!this.paused){this.start(this.newlineDelay,true)}else{this.rpaused=true;this.lastSpeed=this.newlineDelay}return}else{if(this.line<r.length){this.line++;this.step=0;this.skip=false;u=r[this.line];this.str=u;if(u===""){this.line++;this.breaker=true;o=this.newlineDelay}if(this.line<r.length){if(!this.sequenced){this.str=r[this.line];this.len=this.str.length}else{p=!p;if(!p){this.str=r[this.line];this.len=this.str.length;o=this.newlineDelay}else{this.line--;this.str=r[this.line];o=this.deletionDelay}this.rewind=p}s=true;this.words=0;if(!this.rewind){this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,r[this.line]])}}else{if(this.looped){this.rewind=true;this.rstart=true;this.words=0;this.line--;this.str=r[this.line];s=true;o=this.deletionDelay}}}}}if(s){if(this.paused){this.lastSpeed=o;return}if(o){this.timer=setTimeout(this.animate.bind(this),o)}else{this.animate()}}else{this.running=false;if(this.hideCursor){this.el.className=this.el.className+" hide-typewriter-cursor"}this.revapi.trigger("revolution.slide.typewriterended",[this.el])}},onRedraw:function(m){if(!m){var n=window.getComputedStyle(this.el,":after").getPropertyValue("position");this.state=this.el.innerHTML;this.el.innerHTML=n==="absolute"?this.orig:this.clean}else{this.el.innerHTML=this.state}},pause:function(){if(!this.active){return}clearTimeout(this.timer);this.paused=true},resume:function(){if(!this.active){return}if(!this.running){this.restart();return}if(!this.paused){return}if(!this.rpaused){this.paused=false;if(this.lastSpeed){this.timer=setTimeout(this.animate.bind(this),this.lastSpeed)}else{this.animate()}}else{this.start(this.lastSpeed,true)}},restart:function(){if(!this.active){return}clearTimeout(this.timer);this.rpaused=false;this.paused=false;this.start()},restore:function(m){if(!this.active){return}clearTimeout(this.timer);this.el.innerHTML=this.clean;if(m){this.el.className=this.el.className+" hide-typewriter-cursor"}}};function b(m){return m[1].toUpperCase()}function a(n,m){n=n.replace(/<(?!br\s*\/?)[^>]+>/g,"").replace(/(_|\|)$/,"");if(!m){n=n.replace(/\r?\n|\r/g,"±").replace(/<br[^>]*>/gi,"µ").replace(/±µ|µ±/g,"µ").replace(/^±+|±+$/g,"").replace(/^µ+|µ+$/g,"")}else{n=n.replace(/\r?\n|\r/g," ").replace(/<br[^>]*>/gi,"\n")}c.innerHTML=n;return c.value}function d(){var m=j.length,n;while(m--){n=j[m];if(n[0]===this){k(n);j=j.splice(m,1);break}}}function k(n){var o=n.layrs,m=o.length;while(m--){g.removeData(o[m].el,"typewriter")}for(var p in n){if(n.hasOwnProperty(p)){delete n[p]}}}})();