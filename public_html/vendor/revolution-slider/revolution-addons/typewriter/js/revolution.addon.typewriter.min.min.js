(function(){var r,q,v,o=[],m=["onbeforeswap","layeraction","beforeredraw","afterdraw"],t='content: "[char]"; animation: tp-typewriter [speed]s steps(2, start) infinite';window.RsTypewriterAddOn=function(b,a){if(!a){return}var c=a.find(".tp-caption[data-typewriter]");if(c.length){new s(b,a,c)}};function s(b,e,c){o[o.length]=this;if(!r){r=b;r.event.special.typewriterDestroyed={remove:function(i){i.handler()}};v=document.createElement("textarea")}q="";this.layrs=[];var d=e[0];d=d.hasOwnProperty("opt")?d.opt:false;if(d&&d.hasOwnProperty("responsiveLevels")){d=d.responsiveLevels}if(Array.isArray(d)){this.levels=d}this.slider=e.on("typewriterDestroyed",u);c.each(this.writeLayerData.bind(this));if(q){var g=document.head||document.body;if(g){var f=document.createElement("style");f.type="text/css";f.innerHTML=q;g.appendChild(f)}}var a=m.length;for(var h=0;h<a;h++){e.on("revolution.slide."+m[h],this.eventCallback.bind(this))}}s.prototype={eventCallback:function(a,b){this[a.namespace.replace(".slide","")](b)},onbeforeswap:function(c){var d=this.layrs,a=d.length,b;c=c.currentslide[0];if(!c){return}while(a--){b=d[a];if(b.statc){continue}clearTimeout(b.timer);b.running=false;b.active=false;if(!c.contains(b.el)){b.el.innerHTML=b.orig;b.el.className=b.el.className+" hide-typewriter-cursor"}}},layeraction:function(a){if(a.eventtype!=="enterstage"){return}var b=r.data(a.layer[0],"typewriter");if(b&&a.layertype==="html"){b.active=true;b.start()}},beforeredraw:function(b){var c=this.layrs,a=c.length;while(a--){c[a].onRedraw()}},afterdraw:function(){var b=this.layrs,a=b.length;while(a--){b[a].onRedraw(true)}},writeLayerData:function(c,b){var a=r.trim(b.innerHTML);if(!a){b.removeAttribute("data-typewriter");return}if(b.getAttribute("data-whiteboard")){if(typeof console!=="undefined"){console.log("Whiteboard is disabled for Layers with Typewriter Add-On effect enabled")}b.removeAttribute("data-whiteboard")}this.layrs[this.layrs.length]=new p(b,a,this.levels,this.slider)}};function p(M,R,g,e){var f=JSON.parse(M.getAttribute("data-typewriter")),P=R.replace(/(_|\|)$/,""),Q=M.className,S=f.lines,k=R,O=[],V,c,U,T,j,K,i,a,L,b,d,h,N;M.className=Q+" hide-typewriter-cursor";for(var l in f){if(!f.hasOwnProperty(l)){continue}b=f[l];l=l.replace(/_([a-z])/g,w);this[l]=b==="on"?1:b==="off"?0:isNaN(b)===false?parseInt(b,10):b}if(this.blinking){q+="#"+M.id+":after {"+t.replace("[char]",this.cursorType==="one"?"_":"|").replace("[speed]",parseInt(this.blinkingSpeed,10)*0.001)+"}#"+M.id+'.hide-typewriter-cursor:after {content: ""}';if(this.background){c=M.getAttribute("data-width").replace(/[\[\]']+/g,"").split(",");if(g){L=c.length;for(N=0;N<L;N++){T=g[N];if(T===U){continue}i=c[N];i=i==="auto"||i==="none";if(N>0){i=i?"static":"absolute";q+="@media screen and (max-width: "+T+"px) {#"+M.id+".tp-caption[data-typewriter]:after {position: "+i+"}}"}else{if(i){M.setAttribute("data-typewriter-blinking","true")}}U=T}}else{i=c[0];if(i==="none"||i==="auto"){M.setAttribute("data-typewriter-blinking","true")}}}}if(this.sequenced&&S){R=[x(unescape(R))];S=S.split(",");L=S.length;for(N=0;N<L;N++){a=r.trim(S[N]);if(a){R[R.length]=x(unescape(a))}}M.setAttribute("data-typewriter-sequenced","true")}else{this.looped=false;this.sequenced=false;this.newlineDelay=this.linebreakDelay;S=x(R,true).split(/\r?\n|\r/g);L=S.length;R=[];for(N=0;N<L;N++){R[R.length]=r.trim(S[N]);R[R.length]=""}while(R[0]===""){R.shift()}while(R[R.length-1]===""){R.pop()}}if(this.wordDelay){V=f.delays;if(V){V=V.split(",");L=V.length;K=0;for(N=0;N<L;N++){j=unescape(V[N]).split("|");d=j[0];h=j[1];if(isNaN(d)===false&&isNaN(h)===false){d=parseInt(d);O[d+K-1]=parseInt(h);K+=d}}this.spaces=O}else{this.wordDelay=false}}this.el=M;this.txt=R;this.orig=k;this.clean=P;this.revapi=e;this.len=R.length;this.statc=Q.search("tp-static-layer")!==-1;r.data(M,"typewriter",this)}p.prototype={start:function(b,a){clearTimeout(this.timer);if(this.paused){return}this.line=0;this.step=0;this.words=0;this.skip=false;this.rewind=false;this.rstart=false;this.breaker=false;this.paused=false;this.rpaused=false;this.str=this.txt[this.line];this.len=this.str.length;if(!a){this.el.innerHTML="&nbsp;";this.el.className=this.el.className.replace(/ hide-typewriter-cursor/g,"");this.timer=setTimeout(this.onStart.bind(this),this.startDelay)}else{this.timer=setTimeout(this.onStart.bind(this),b);this.revapi.trigger("revolution.slide.typewriterlooped",[this.el])}this.running=true;this.revapi.trigger("revolution.slide.typewriterstarted",[this.el]);this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,this.txt[this.line]])},onStart:function(){this.el.innerHTML="";this.animate()},animate:function(){var i,b,h,f,g=this.str,a=this.txt,e=this.step,c=this.rewind,d=!c?this.speed:this.deletionSpeed;if(e<this.len){if(!c){if(!this.breaker){b=g[e];if(b==="µ"){this.skip=true;this.breaker=true;d=this.linebreakDelay}}else{b="<br>";d=!this.skip?this.newlineDelay:this.linebreakDelay;this.breaker=false;this.skip=false;this.words=0;this.step--}if(!this.breaker){f=this.el.innerHTML;if(f==="&nbsp;"){f=""}this.el.innerHTML=f+b;if(this.wordDelay&&b===" "){h=this.words;f=this.spaces[h];if(f){d=f;this.words=h<this.spaces.length-1?h+1:0}else{this.words+=1}}}}else{g=g.slice(0,-1);this.str=g;this.el.innerHTML=g.replace(/µ/g,"<br>")||"&nbsp"}this.step++;i=true}else{if(this.rstart){if(!this.paused){this.start(this.newlineDelay,true)}else{this.rpaused=true;this.lastSpeed=this.newlineDelay}return}else{if(this.line<a.length){this.line++;this.step=0;this.skip=false;g=a[this.line];this.str=g;if(g===""){this.line++;this.breaker=true;d=this.newlineDelay}if(this.line<a.length){if(!this.sequenced){this.str=a[this.line];this.len=this.str.length}else{c=!c;if(!c){this.str=a[this.line];this.len=this.str.length;d=this.newlineDelay}else{this.line--;this.str=a[this.line];d=this.deletionDelay}this.rewind=c}i=true;this.words=0;if(!this.rewind){this.revapi.trigger("revolution.slide.typewriternewline",[this.el,this.line+1,a[this.line]])}}else{if(this.looped){this.rewind=true;this.rstart=true;this.words=0;this.line--;this.str=a[this.line];i=true;d=this.deletionDelay}}}}}if(i){if(this.paused){this.lastSpeed=d;return}if(d){this.timer=setTimeout(this.animate.bind(this),d)}else{this.animate()}}else{this.running=false;if(this.hideCursor){this.el.className=this.el.className+" hide-typewriter-cursor"}this.revapi.trigger("revolution.slide.typewriterended",[this.el])}},onRedraw:function(a){if(!a){var b=window.getComputedStyle(this.el,":after").getPropertyValue("position");this.state=this.el.innerHTML;this.el.innerHTML=b==="absolute"?this.orig:this.clean}else{this.el.innerHTML=this.state}},pause:function(){if(!this.active){return}clearTimeout(this.timer);this.paused=true},resume:function(){if(!this.active){return}if(!this.running){this.restart();return}if(!this.paused){return}if(!this.rpaused){this.paused=false;if(this.lastSpeed){this.timer=setTimeout(this.animate.bind(this),this.lastSpeed)}else{this.animate()}}else{this.start(this.lastSpeed,true)}},restart:function(){if(!this.active){return}clearTimeout(this.timer);this.rpaused=false;this.paused=false;this.start()},restore:function(a){if(!this.active){return}clearTimeout(this.timer);this.el.innerHTML=this.clean;if(a){this.el.className=this.el.className+" hide-typewriter-cursor"}}};function w(a){return a[1].toUpperCase()}function x(b,a){b=b.replace(/<(?!br\s*\/?)[^>]+>/g,"").replace(/(_|\|)$/,"");if(!a){b=b.replace(/\r?\n|\r/g,"±").replace(/<br[^>]*>/gi,"µ").replace(/±µ|µ±/g,"µ").replace(/^±+|±+$/g,"").replace(/^µ+|µ+$/g,"")}else{b=b.replace(/\r?\n|\r/g," ").replace(/<br[^>]*>/gi,"\n")}v.innerHTML=b;return v.value}function u(){var a=o.length,b;while(a--){b=o[a];if(b[0]===this){n(b);o=o.splice(a,1);break}}}function n(d){var c=d.layrs,a=c.length;while(a--){r.removeData(c[a].el,"typewriter")}for(var b in d){if(d.hasOwnProperty(b)){delete d[b]}}}})();