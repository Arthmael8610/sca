(function(){function a(d,e){this.calc=!1;this.slider=d;this.scrolled=!1;this.ids=d[0].id;this.time=e.time;this.ease=e.ease;this.color=e.color;this.point=e.point;this.height=e.height;this.onScroll=e.scroll;this.inverted=e.inverted;this.animated=e.animated;this.negative=e.negative;this.placement=e.placement;this.leftWidth=e.leftWidth;this.rightWidth=e.rightWidth;this.responsive=e.responsive;this.range="slider"===e.range;this.isTop="top"===e.position;this.starter=this.calculate.bind(this);d.one("revolution.slide.onloaded",this.init.bind(this))}var c,b;window.RsPolyfoldAddOn=function(d,e,f){d&&e&&(c=d,b=c(window),c.event.special.polyfoldDestroyed={remove:function(g){g.handler()}},new a(e,f))};a.prototype={init:function(){if(document.body.contains(this.slider[0])){var e,g="rs-addon-polyfold",j=document.createElement("div"),i=document.createDocumentFragment();this.left=document.createElement("div");this.right=document.createElement("div");this.gridWidth=this.slider[0].opt.gridwidth;Array.isArray(this.gridWidth)&&(this.gridWidth=this.gridWidth[0]);this.isTop?(e="rs-addon-poly-top",g+=" rs-addon-poly-top"):(e="rs-addon-poly-bottom",g+=" rs-addon-poly-bottom");1<this.placement&&(g+=" ",2===this.placement?(g+="rs-addon-poly-nav-level",this.slider.find(".tparrows").css("z-index",1000)):g+="rs-addon-poly-static-level");if(this.animated){var h=document.createElement("style");h.type="text/css";h.innerHTML="#"+this.ids+"_wrapper ."+e+" div {transition: border-width "+this.time+"s "+this.ease+";}";document.getElementsByTagName("head")[0].appendChild(h)}"center"===this.point&&(g+=" rs-addon-poly-center");i.appendChild(this.left);i.appendChild(this.right);j.className=g;j.appendChild(i);this.slider.one("polyfoldDestroyed",this.destroy.bind(this));this.slider[0].parentNode.insertBefore(j,this.slider.nextSibling);b.on("resize.rspolyaddon"+this.ids,this.resize.bind(this));if(this.onScroll){b.on("scroll.rspolyaddon"+this.ids,this.draw.bind(this))}this.colors();this.resize(!1,!0)}else{this.destroy()}},colors:function(){var d,e;this.negative?this.isTop?(d="transparent "+this.color+" transparent transparent",e=this.color+" transparent transparent transparent"):(d="transparent transparent "+this.color+" transparent",e="transparent transparent transparent "+this.color):this.isTop?(d=this.color+" transparent transparent transparent",e="transparent "+this.color+" transparent transparent"):(d="transparent transparent transparent "+this.color,e="transparent transparent "+this.color+" transparent");this.left.style.borderColor=d;this.right.style.borderColor=e},draw:function(d){var e,f;if(this.onScroll){if(d&&(this.scrolled=!0),e=this.slider[0].getBoundingClientRect(),e.top+window.pageYOffset<this.winHeight+window.pageYOffset&&0<e.bottom){this.isTop?(d=this.range?this.winHeight-this.sliderHeight:0,this.inverted?(e=!1!==this.calc?e.top:this.left.getBoundingClientRect().top,this.calc=this.polyHeight-(e-d)/this.drawHeight*this.polyHeight):(e=!1!==this.calc?e.top+this.calc:this.left.getBoundingClientRect().top,this.calc=(e-d)/this.drawHeight*this.polyHeight)):this.inverted?(e=!1!==this.calc?e.bottom:this.left.getBoundingClientRect().top,this.calc=this.polyHeight-(this.drawHeight-e)/this.drawHeight*this.polyHeight):(e=!1!==this.calc?e.bottom-this.calc:this.left.getBoundingClientRect().top,this.calc=(this.drawHeight-e)/this.drawHeight*this.polyHeight),this.calc=Math.floor(Math.min(Math.max(this.calc,0),this.polyHeight))}else{return 1}}else{this.calc=this.polyHeight}this.negative?this.isTop?(d="0 "+Math.ceil(this.drawWidth*this.leftWidth)+"px "+this.calc+"px 0",f=this.calc+"px "+Math.ceil(this.drawWidth*this.rightWidth)+"px 0 0"):(d="0 0 "+this.calc+"px "+Math.ceil(this.drawWidth*this.leftWidth)+"px",f=this.calc+"px 0 0 "+Math.ceil(this.drawWidth*this.rightWidth)+"px"):this.isTop?(d=this.calc+"px "+Math.ceil(this.drawWidth*this.leftWidth)+"px 0 0",f="0 "+Math.ceil(this.drawWidth*this.rightWidth)+"px "+this.calc+"px 0"):(d=this.calc+"px 0 0 "+Math.ceil(this.drawWidth*this.leftWidth)+"px",f="0 0 "+this.calc+"px "+Math.ceil(this.drawWidth*this.rightWidth)+"px");this.left.style.borderWidth=d;this.right.style.borderWidth=f;if(this.onScroll){return e}},resize:function(d,e){this.winHeight=window.innerHeight;this.drawWidth=this.slider[0].clientWidth;this.sliderHeight=this.slider[0].clientHeight;this.drawHeight=this.range?this.sliderHeight:this.winHeight;this.polyHeight=this.responsive?Math.round(this.drawWidth/this.gridWidth*this.height):this.height;this.polyHeight=Math.min(this.polyHeight,this.sliderHeight);e&&this.onScroll?this.onScroll&&(this.oldOffset=0,this.newOffset=1,this.calculate()):this.draw()},calculate:function(){this.scrolled||this.newOffset===this.oldOffset?delete this.starter:(this.oldOffset=this.newOffset,this.newOffset=this.draw(),window.requestAnimationFrame(this.starter))},destroy:function(){b.off("scroll.rspolyaddon"+this.ids+" resize.rspolyaddon"+this.ids);for(var d in this){this.hasOwnProperty(d)&&delete this[d]}}}})();