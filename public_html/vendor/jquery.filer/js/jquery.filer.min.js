/*!
 * jQuery.filer
 * Copyright (c) 2016 CreativeDream
 * Website: https://github.com/CreativeDream/jquery.filer
 * Version: 1.3 (14-Sep-2016)
 * Requires: jQuery v1.7.1 or later
 */
(function(a){a.fn.filer=function(b){return this.each(function(q,c){var u=a(c),m=".jFiler",d=a(),e=a(),h=a(),i=[],j=a.isFunction(b)?b(u,a.fn.filer.defaults):b,g=j&&a.isPlainObject(j)?a.extend(true,{},a.fn.filer.defaults,j):a.fn.filer.defaults,k={init:function(){u.wrap('<div class="jFiler"></div>');k._set("props");u.prop("jFiler").boxEl=d=u.closest(m);k._changeInput()},_bindInput:function(){if(g.changeInput&&e.length>0){e.on("click",k._clickHandler)}u.on({focus:function(){e.addClass("focused")},blur:function(){e.removeClass("focused")},change:k._onChange});if(g.dragDrop){g.dragDrop.dragContainer.on("drag dragstart dragend dragover dragenter dragleave drop",function(f){f.preventDefault();f.stopPropagation()});g.dragDrop.dragContainer.on("drop",k._dragDrop.drop);g.dragDrop.dragContainer.on("dragover",k._dragDrop.dragEnter);g.dragDrop.dragContainer.on("dragleave",k._dragDrop.dragLeave)}if(g.uploadFile&&g.clipBoardPaste){a(window).on("paste",k._clipboardPaste)}},_unbindInput:function(f){if(g.changeInput&&e.length>0){e.off("click",k._clickHandler)}if(f){u.off("change",k._onChange);if(g.dragDrop){g.dragDrop.dragContainer.off("drop",k._dragDrop.drop);g.dragDrop.dragContainer.off("dragover",k._dragDrop.dragEnter);g.dragDrop.dragContainer.off("dragleave",k._dragDrop.dragLeave)}if(g.uploadFile&&g.clipBoardPaste){a(window).off("paste",k._clipboardPaste)}}},_clickHandler:function(){if(!g.uploadFile&&g.addMore&&u.val().length!=0){k._unbindInput(true);var l=a('<input type="file" />');var f=u.prop("attributes");a.each(f,function(){if(this.name=="required"){return}l.attr(this.name,this.value)});u.after(l);i.push(l);u=l;k._bindInput();k._set("props")}u.click()},_applyAttrSettings:function(){var n=["name","limit","maxSize","fileMaxSize","extensions","changeInput","showThumbs","appendTo","theme","addMore","excludeName","files","uploadUrl","uploadData","options"];for(var f in n){var l="data-jfiler-"+n[f];if(k._assets.hasAttr(l)){switch(n[f]){case"changeInput":case"showThumbs":case"addMore":g[n[f]]=(["true","false"].indexOf(u.attr(l))>-1?u.attr(l)=="true":u.attr(l));break;case"extensions":g[n[f]]=u.attr(l).replace(/ /g,"").split(",");break;case"uploadUrl":if(g.uploadFile){g.uploadFile.url=u.attr(l)}break;case"uploadData":if(g.uploadFile){g.uploadFile.data=JSON.parse(u.attr(l))}break;case"files":case"options":g[n[f]]=JSON.parse(u.attr(l));break;default:g[n[f]]=u.attr(l)}u.removeAttr(l)}}},_changeInput:function(){k._applyAttrSettings();g.beforeRender!=null&&typeof g.beforeRender=="function"?g.beforeRender(d,u):null;if(g.theme){d.addClass("jFiler-theme-"+g.theme)}if(u.get(0).tagName.toLowerCase()!="input"&&u.get(0).type!="file"){e=u;u=a('<input type="file" name="'+g.name+'" />');u.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"});d.prepend(u);k._isGn=u}else{if(g.changeInput){switch(typeof g.changeInput){case"boolean":e=a('<div class="jFiler-input"><div class="jFiler-input-caption"><span>'+g.captions.feedback+'</span></div><div class="jFiler-input-button">'+g.captions.button+'</div></div>"');break;case"string":case"object":e=a(g.changeInput);break;case"function":e=a(g.changeInput(d,u,g));break}u.after(e);u.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"})}}u.prop("jFiler").newInputEl=e;if(g.dragDrop){g.dragDrop.dragContainer=g.dragDrop.dragContainer?a(g.dragDrop.dragContainer):e}if(!g.limit||(g.limit&&g.limit>=2)){u.attr("multiple","multiple");u.attr("name").slice(-2)!="[]"?u.attr("name",u.attr("name")+"[]"):null}if(!u.attr("disabled")&&!g.disabled){g.disabled=false;k._bindInput();d.removeClass("jFiler-disabled")}else{g.disabled=true;k._unbindInput(true);d.addClass("jFiler-disabled")}if(g.files){k._append(false,{files:g.files})}g.afterRender!=null&&typeof g.afterRender=="function"?g.afterRender(h,d,e,u):null},_clear:function(){k.files=null;u.prop("jFiler").files=null;if(!g.uploadFile&&!g.addMore){k._reset()}k._set("feedback",(k._itFl&&k._itFl.length>0?k._itFl.length+" "+g.captions.feedback2:g.captions.feedback));g.onEmpty!=null&&typeof g.onEmpty=="function"?g.onEmpty(d,e,u):null},_reset:function(f){if(!f){if(!g.uploadFile&&g.addMore){for(var l=0;l<i.length;l++){i[l].remove()}i=[];k._unbindInput(true);if(k._isGn){u=k._isGn}else{u=a(c)}k._bindInput()}k._set("input","")}k._itFl=[];k._itFc=null;k._ajFc=0;k._set("props");u.prop("jFiler").files_list=k._itFl;u.prop("jFiler").current_file=k._itFc;k._itFr=[];d.find("input[name^='jfiler-items-exclude-']:hidden").remove();h.fadeOut("fast",function(){a(this).remove()});u.prop("jFiler").listEl=h=a()},_set:function(f,l){switch(f){case"input":u.val(l);break;case"feedback":if(e.length>0){e.find(".jFiler-input-caption span").html(l)}break;case"props":if(!u.prop("jFiler")){u.prop("jFiler",{options:g,listEl:h,boxEl:d,newInputEl:e,inputEl:u,files:k.files,files_list:k._itFl,current_file:k._itFc,append:function(n){return k._append(false,{files:[n]})},enable:function(){if(!g.disabled){return}g.disabled=false;u.removeAttr("disabled");d.removeClass("jFiler-disabled");k._bindInput()},disable:function(){if(g.disabled){return}g.disabled=true;d.addClass("jFiler-disabled");k._unbindInput(true)},remove:function(n){k._remove(null,{binded:true,data:{id:n}});return true},reset:function(){k._reset();k._clear();return true},retry:function(n){return k._retryUpload(n)}})}}},_filesCheck:function(){var p=0;if(g.limit&&k.files.length+k._itFl.length>g.limit){g.dialogs.alert(k._assets.textParse(g.captions.errors.filesLimit));return false}for(var o=0;o<k.files.length;o++){var n=k.files[o],l=n.name.split(".").pop().toLowerCase(),f={name:n.name,size:n.size,size2:k._assets.bytesToSize(n.size),type:n.type,ext:l};if(g.extensions!=null&&a.inArray(l,g.extensions)==-1&&a.inArray(f.type,g.extensions)==-1){g.dialogs.alert(k._assets.textParse(g.captions.errors.filesType,f));return false}if((g.maxSize!=null&&k.files[o].size>g.maxSize*1048576)||(g.fileMaxSize!=null&&k.files[o].size>g.fileMaxSize*1048576)){g.dialogs.alert(k._assets.textParse(g.captions.errors.filesSize,f));return false}if(n.size==4096&&n.type.length==0){g.dialogs.alert(k._assets.textParse(g.captions.errors.folderUpload,f));return false}if(g.onFileCheck!=null&&typeof g.onFileCheck=="function"?g.onFileCheck(f,g,k._assets.textParse)===false:null){return false}if((g.uploadFile||g.addMore)&&!g.allowDuplicates){var f=k._itFl.filter(function(s,r){if(s.file.name==n.name&&s.file.size==n.size&&s.file.type==n.type&&(n.lastModified?s.file.lastModified==n.lastModified:true)){return true}});if(f.length>0){if(k.files.length==1){return false}else{n._pendRemove=true}}}p+=k.files[o].size}if(g.maxSize!=null&&p>=Math.round(g.maxSize*1048576)){g.dialogs.alert(k._assets.textParse(g.captions.errors.filesSizeAll));return false}return true},_thumbCreator:{create:function(s){var r=k.files[s],o=(k._itFc?k._itFc.id:s),l=r.name,x=r.size,n=r.file,w=r.type?r.type.split("/",1):"".toString().toLowerCase(),p=l.indexOf(".")!=-1?l.split(".").pop().toLowerCase():"",v=g.uploadFile?'<div class="jFiler-jProgressBar">'+g.templates.progressBar+"</div>":"",f={id:o,name:l,size:x,size2:k._assets.bytesToSize(x),url:n,type:w,extension:p,icon:k._assets.getIcon(p,w),icon2:k._thumbCreator.generateIcon({type:w,extension:p}),image:'<div class="jFiler-item-thumb-image fi-loading"></div>',progressBar:v,_appended:r._appended},t="";if(r.opts){f=a.extend({},r.opts,f)}t=a(k._thumbCreator.renderContent(f)).attr("data-jfiler-index",o);t.get(0).jfiler_id=o;k._thumbCreator.renderFile(r,t,f);if(r.forList){return t}k._itFc.html=t;t.hide()[g.templates.itemAppendToEnd?"appendTo":"prependTo"](h.find(g.templates._selectors.list)).show();if(!r._appended){k._onSelect(s)}},renderContent:function(f){return k._assets.textParse((f._appended?g.templates.itemAppend:g.templates.item),f)},renderFile:function(n,l,p){if(l.find(".jFiler-item-thumb-image").length==0){return false}if(n.file&&p.type=="image"){var o='<img src="'+n.file+'" draggable="false" />',f=l.find(".jFiler-item-thumb-image.fi-loading");a(o).error(function(){o=k._thumbCreator.generateIcon(p);l.addClass("jFiler-no-thumbnail");f.removeClass("fi-loading").html(o)}).load(function(){f.removeClass("fi-loading").html(o)});return true}if(window.File&&window.FileList&&window.FileReader&&p.type=="image"&&p.size<10000000){var r=new FileReader;r.onload=function(x){var s=l.find(".jFiler-item-thumb-image.fi-loading");if(g.templates.canvasImage){var v=document.createElement("canvas"),w=v.getContext("2d"),t=new Image();t.onload=function(){var I=s.height(),A=s.width(),D=t.height/I,E=t.width/A,C=D<E?D:E,B=t.height/C,K=t.width/C,G=Math.ceil(Math.log(t.width/K)/Math.log(2));v.height=I;v.width=A;if(t.width<v.width||t.height<v.height||G<=1){var H=t.width<v.width?v.width/2-t.width/2:t.width>v.width?-(t.width-v.width)/2:0,F=t.height<v.height?v.height/2-t.height/2:0;w.drawImage(t,H,F,t.width,t.height)}else{var z=document.createElement("canvas"),J=z.getContext("2d");z.width=t.width*0.5;z.height=t.height*0.5;J.fillStyle="#fff";J.fillRect(0,0,z.width,z.height);J.drawImage(t,0,0,z.width,z.height);J.drawImage(z,0,0,z.width*0.5,z.height*0.5);w.drawImage(z,K>v.width?K-v.width:0,0,z.width*0.5,z.height*0.5,0,0,K,B)}s.removeClass("fi-loading").html('<img src="'+v.toDataURL("image/png")+'" draggable="false" />')};t.onerror=function(){l.addClass("jFiler-no-thumbnail");s.removeClass("fi-loading").html(k._thumbCreator.generateIcon(p))};t.src=x.target.result}else{s.removeClass("fi-loading").html('<img src="'+x.target.result+'" draggable="false" />')}};r.readAsDataURL(n)}else{var o=k._thumbCreator.generateIcon(p),f=l.find(".jFiler-item-thumb-image.fi-loading");l.addClass("jFiler-no-thumbnail");f.removeClass("fi-loading").html(o)}},generateIcon:function(o){var f=new Array(3);if(o&&o.type&&o.type[0]&&o.extension){switch(o.type[0]){case"image":f[0]="f-image";f[1]='<i class="icon-jfi-file-image"></i>';break;case"video":f[0]="f-video";f[1]='<i class="icon-jfi-file-video"></i>';break;case"audio":f[0]="f-audio";f[1]='<i class="icon-jfi-file-audio"></i>';break;default:f[0]="f-file f-file-ext-"+o.extension;f[1]=(o.extension.length>0?"."+o.extension:"");f[2]=1}}else{f[0]="f-file";f[1]=(o.extension&&o.extension.length>0?"."+o.extension:"");f[2]=1}var n='<span class="jFiler-icon-file '+f[0]+'">'+f[1]+"</span>";if(f[2]==1){var p=k._assets.text2Color(o.extension);if(p){var l=a(n).appendTo("body");l.css("background-color",k._assets.text2Color(o.extension));n=l.prop("outerHTML");l.remove()}}return n},_box:function(n){if(g.beforeShow!=null&&typeof g.beforeShow=="function"?!g.beforeShow(k.files,h,d,e,u):false){return false}if(h.length<1){if(g.appendTo){var f=a(g.appendTo)}else{var f=d}f.find(".jFiler-items").remove();h=a('<div class="jFiler-items jFiler-row"></div>');u.prop("jFiler").listEl=h;h.append(k._assets.textParse(g.templates.box)).appendTo(f);h.on("click",g.templates._selectors.remove,function(p){p.preventDefault();var o=[n?n.remove.event:p,n?n.remove.el:a(this).closest(g.templates._selectors.item)],r=function(s){k._remove(o[0],o[1])};if(g.templates.removeConfirmation){g.dialogs.confirm(g.captions.removeConfirmation,r)}else{r()}})}for(var l=0;l<k.files.length;l++){if(!k.files[l]._appended){k.files[l]._choosed=true}k._addToMemory(l);k._thumbCreator.create(l)}}},_upload:function(l){var p=k._itFl[l],n=p.html,o=new FormData();o.append(u.attr("name"),p.file,(p.file.name?p.file.name:false));if(g.uploadFile.data!=null&&a.isPlainObject(typeof(g.uploadFile.data)=="function"?g.uploadFile.data(p.file):g.uploadFile.data)){for(var f in g.uploadFile.data){o.append(f,g.uploadFile.data[f])}}k._ajax.send(n,o,p)},_ajax:{send:function(f,l,n){n.ajax=a.ajax({url:g.uploadFile.url,data:l,type:g.uploadFile.type,enctype:g.uploadFile.enctype,xhr:function(){var o=a.ajaxSettings.xhr();if(o.upload){o.upload.addEventListener("progress",function(p){k._ajax.progressHandling(p,f)},false)}return o},complete:function(o,p){n.ajax=false;k._ajFc++;if(g.uploadFile.synchron&&n.id+1<k._itFl.length){k._upload(n.id+1)}if(k._ajFc>=k.files.length){k._ajFc=0;u.get(0).value="";g.uploadFile.onComplete!=null&&typeof g.uploadFile.onComplete=="function"?g.uploadFile.onComplete(h,d,e,u,o,p):null}},beforeSend:function(p,o){return g.uploadFile.beforeSend!=null&&typeof g.uploadFile.beforeSend=="function"?g.uploadFile.beforeSend(f,h,d,e,u,n.id,p,o):true},success:function(p,r,o){n.uploaded=true;g.uploadFile.success!=null&&typeof g.uploadFile.success=="function"?g.uploadFile.success(p,f,h,d,e,u,n.id,r,o):null},error:function(o,r,p){n.uploaded=false;g.uploadFile.error!=null&&typeof g.uploadFile.error=="function"?g.uploadFile.error(f,h,d,e,u,n.id,o,r,p):null},statusCode:g.uploadFile.statusCode,cache:false,contentType:false,processData:false});return n.ajax},progressHandling:function(n,l){if(n.lengthComputable){var f=Math.round(n.loaded*100/n.total).toString();g.uploadFile.onProgress!=null&&typeof g.uploadFile.onProgress=="function"?g.uploadFile.onProgress(f,l,h,d,e,u):null;l.find(".jFiler-jProgressBar").find(g.templates._selectors.progressBar).css("width",f+"%")}}},_dragDrop:{dragEnter:function(f){clearTimeout(k._dragDrop._drt);g.dragDrop.dragContainer.addClass("dragged");k._set("feedback",g.captions.drop);g.dragDrop.dragEnter!=null&&typeof g.dragDrop.dragEnter=="function"?g.dragDrop.dragEnter(f,e,u,d):null},dragLeave:function(f){clearTimeout(k._dragDrop._drt);k._dragDrop._drt=setTimeout(function(l){if(!k._dragDrop._dragLeaveCheck(l)){k._dragDrop.dragLeave(l);return false}g.dragDrop.dragContainer.removeClass("dragged");k._set("feedback",g.captions.feedback);g.dragDrop.dragLeave!=null&&typeof g.dragDrop.dragLeave=="function"?g.dragDrop.dragLeave(l,e,u,d):null},100,f)},drop:function(f){clearTimeout(k._dragDrop._drt);g.dragDrop.dragContainer.removeClass("dragged");k._set("feedback",g.captions.feedback);if(f&&f.originalEvent&&f.originalEvent.dataTransfer&&f.originalEvent.dataTransfer.files&&f.originalEvent.dataTransfer.files.length>0){k._onChange(f,f.originalEvent.dataTransfer.files)}g.dragDrop.drop!=null&&typeof g.dragDrop.drop=="function"?g.dragDrop.drop(f.originalEvent.dataTransfer.files,f,e,u,d):null},_dragLeaveCheck:function(l){var f=a(l.currentTarget),n=0;if(!f.is(e)){n=e.find(f).length;if(n>0){;return false}}return true}},_clipboardPaste:function(r,n){if(!n&&(!r.originalEvent.clipboardData&&!r.originalEvent.clipboardData.items)){return}if(n&&(!r.originalEvent.dataTransfer&&!r.originalEvent.dataTransfer.items)){return}if(k._clPsePre){return}var l=(n?r.originalEvent.dataTransfer.items:r.originalEvent.clipboardData.items),p=function(D,C,v){C=C||"";v=v||512;var y=atob(D);var A=[];for(var w=0;w<y.length;w+=v){var B=y.slice(w,w+v);var z=new Array(B.length);for(var x=0;x<B.length;x++){z[x]=B.charCodeAt(x)}var t=new Uint8Array(z);A.push(t)}var s=new Blob(A,{type:C});return s};if(l){for(var o=0;o<l.length;o++){if(l[o].type.indexOf("image")!==-1||l[o].type.indexOf("text/uri-list")!==-1){if(n){try{window.atob(r.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1])}catch(r){return}}var f=(n?p(r.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1],"image/png"):l[o].getAsFile());f.name=Math.random().toString(36).substring(5);f.name+=f.type.indexOf("/")!=-1?"."+f.type.split("/")[1].toString().toLowerCase():".png";k._onChange(r,[f]);k._clPsePre=setTimeout(function(){delete k._clPsePre},1000)}}}},_onSelect:function(f){if(g.uploadFile&&!a.isEmptyObject(g.uploadFile)){if(!g.uploadFile.synchron||(g.uploadFile.synchron&&a.grep(k._itFl,function(l){return l.ajax}).length==0)){k._upload(k._itFc.id)}}if(k.files[f]._pendRemove){k._itFc.html.hide();k._remove(null,{binded:true,data:{id:k._itFc.id}})}g.onSelect!=null&&typeof g.onSelect=="function"?g.onSelect(k.files[f],k._itFc.html,h,d,e,u):null;if(f+1>=k.files.length){g.afterShow!=null&&typeof g.afterShow=="function"?g.afterShow(h,d,e,u):null}},_onChange:function(l,n){if(!n){if(!u.get(0).files||typeof u.get(0).files=="undefined"||u.get(0).files.length==0){if(!g.uploadFile&&!g.addMore){k._set("input","");k._clear()}return false}k.files=u.get(0).files}else{if(!n||n.length==0){k._set("input","");k._clear();return false}k.files=n}if(!g.uploadFile&&!g.addMore){k._reset(true)}u.prop("jFiler").files=k.files;if(!k._filesCheck()||(g.beforeSelect!=null&&typeof g.beforeSelect=="function"?!g.beforeSelect(k.files,h,d,e,u):false)){k._set("input","");k._clear();if(g.addMore&&i.length>0){k._unbindInput(true);i[i.length-1].remove();i.splice(i.length-1,1);u=i.length>0?i[i.length-1]:a(c);k._bindInput()}return false}k._set("feedback",k.files.length+k._itFl.length+" "+g.captions.feedback2);if(g.showThumbs){k._thumbCreator._box()}else{for(var f=0;f<k.files.length;f++){k.files[f]._choosed=true;k._addToMemory(f);k._onSelect(f)}}},_append:function(o,n){var l=(!n?false:n.files);if(!l||l.length<=0){return}k.files=l;u.prop("jFiler").files=k.files;if(g.showThumbs){for(var f=0;f<k.files.length;f++){k.files[f]._appended=true}k._thumbCreator._box()}},_getList:function(p,o){var n=(!o?false:o.files);if(!n||n.length<=0){return}k.files=n;u.prop("jFiler").files=k.files;if(g.showThumbs){var l=[];for(var f=0;f<k.files.length;f++){k.files[f].forList=true;l.push(k._thumbCreator.create(f))}if(o.callback){o.callback(l,h,d,e,u)}}},_retryUpload:function(n,f){var o=parseInt(typeof f=="object"?f.attr("data-jfiler-index"):f),l=k._itFl.filter(function(r,p){return r.id==o});if(l.length>0){if(g.uploadFile&&!a.isEmptyObject(g.uploadFile)&&!l[0].uploaded){k._itFc=l[0];u.prop("jFiler").current_file=k._itFc;k._upload(o);return true}}else{return false}},_remove:function(p,n){if(n.binded){if(typeof(n.data.id)!="undefined"){n=h.find(g.templates._selectors.item+"[data-jfiler-index='"+n.data.id+"']");if(n.length==0){return false}}if(n.data.el){n=n.data.el}}var f=function(v){var t=d.find("input[name^='jfiler-items-exclude-']:hidden").first();if(t.length==0){t=a('<input type="hidden" name="jfiler-items-exclude-'+(g.excludeName?g.excludeName:(u.attr("name").slice(-2)!="[]"?u.attr("name"):u.attr("name").substring(0,u.attr("name").length-2))+"-"+q)+'">');t.appendTo(d)}if(v&&a.isArray(v)){v=JSON.stringify(v);t.val(v)}},s=function(w,z){var x=k._itFl[z],y=[];if(x.file._choosed||x.file._appended||x.uploaded){k._itFr.push(x);var t=k._itFl.filter(function(A){return A.file.name==x.file.name});for(var v=0;v<k._itFr.length;v++){if(g.addMore&&k._itFr[v]==x&&t.length>0){k._itFr[v].remove_name=t.indexOf(x)+"://"+k._itFr[v].file.name}y.push(k._itFr[v].remove_name?k._itFr[v].remove_name:k._itFr[v].file.name)}}f(y);k._itFl.splice(z,1);if(k._itFl.length<1){k._reset();k._clear()}else{k._set("feedback",k._itFl.length+" "+g.captions.feedback2)}w.fadeOut("fast",function(){a(this).remove()})};var o=n.get(0).jfiler_id||n.attr("data-jfiler-index"),r=null;for(var l in k._itFl){if(l==="length"||!k._itFl.hasOwnProperty(l)){continue}if(k._itFl[l].id==o){r=l}}if(!k._itFl.hasOwnProperty(r)){return false}if(k._itFl[r].ajax){k._itFl[r].ajax.abort();s(n,r);return}if(g.onRemove!=null&&typeof g.onRemove=="function"?g.onRemove(n,k._itFl[r].file,r,h,d,e,u)!==false:true){s(n,r)}},_addToMemory:function(f){k._itFl.push({id:k._itFl.length,file:k.files[f],html:a(),ajax:false,uploaded:false});if(g.addMore||k.files[f]._appended){k._itFl[k._itFl.length-1].input=u}k._itFc=k._itFl[k._itFl.length-1];u.prop("jFiler").files_list=k._itFl;u.prop("jFiler").current_file=k._itFc},_assets:{bytesToSize:function(f){if(f==0){return"0 Byte"}var l=1000;var o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var n=Math.floor(Math.log(f)/Math.log(l));return(f/Math.pow(l,n)).toPrecision(3)+" "+o[n]},hasAttr:function(f,n){var n=(!n?u:n),l=n.attr(f);if(!l||typeof l=="undefined"){return false}else{return true}},getIcon:function(n,l){var f=["audio","image","text","video"];if(a.inArray(l,f)>-1){return'<i class="icon-jfi-file-'+l+" jfi-file-ext-"+n+'"></i>'}return'<i class="icon-jfi-file-o jfi-file-type-'+l+" jfi-file-ext-"+n+'"></i>'},textParse:function(l,f){f=a.extend({},{limit:g.limit,maxSize:g.maxSize,fileMaxSize:g.fileMaxSize,extensions:g.extensions?g.extensions.join(","):null},(f&&a.isPlainObject(f)?f:{}),g.options);switch(typeof(l)){case"string":return l.replace(/\{\{fi-(.*?)\}\}/g,function(o,n){n=n.replace(/ /g,"");if(n.match(/(.*?)\|limitTo\:(\d+)/)){return n.replace(/(.*?)\|limitTo\:(\d+)/,function(s,r,p){var r=(f[r]?f[r]:""),t=r.substring(0,p);t=(r.length>t.length?t.substring(0,t.length-3)+"...":t);return t})}else{return(f[n]?f[n]:"")}});break;case"function":return l(f);break;default:return l}},text2Color:function(o){if(!o||o.length==0){return false}for(var f=0,n=0;f<o.length;n=o.charCodeAt(f++)+((n<<5)-n)){}for(var f=0,l="#";f<3;l+=("00"+((n>>f++*2)&255).toString(16)).slice(-2)){}return l}},files:null,_itFl:[],_itFc:null,_itFr:[],_itPl:[],_ajFc:0};u.on("filer.append",function(l,f){k._append(l,f)}).on("filer.remove",function(l,f){f.binded=true;k._remove(l,f)}).on("filer.reset",function(f){k._reset();k._clear();return true}).on("filer.generateList",function(l,f){return k._getList(l,f)}).on("filer.retry",function(l,f){return k._retryUpload(l,f)});k.init();return this})};a.fn.filer.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,changeInput:true,showThumbs:false,appendTo:null,theme:"default",templates:{box:'<ul class="jFiler-items-list jFiler-items-default"></ul>',item:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title" title="{{fi-name}}">{{fi-name | limitTo:30}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status">{{fi-progressBar}}</span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',itemAppend:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title">{{fi-name | limitTo:35}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status"></span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',progressBar:'<div class="bar"></div>',itemAppendToEnd:false,removeConfirmation:true,canvasImage:true,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},files:null,uploadFile:null,dragDrop:null,addMore:false,allowDuplicates:false,clipBoardPaste:true,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,onFileCheck:null,afterShow:null,onRemove:null,onEmpty:null,options:null,dialogs:{alert:function(b){return alert(b)},confirm:function(b,c){confirm(b)?c():null}},captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large! Please upload file up to {{fi-fileMaxSize}} MB.",filesSizeAll:"Files you've choosed are too large! Please upload files up to {{fi-maxSize}} MB.",folderUpload:"You are not allowed to upload folders."}}}})(jQuery);