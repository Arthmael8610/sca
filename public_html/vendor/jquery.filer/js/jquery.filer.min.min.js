/*!
 * jQuery.filer
 * Copyright (c) 2016 CreativeDream
 * Website: https://github.com/CreativeDream/jquery.filer
 * Version: 1.3 (14-Sep-2016)
 * Requires: jQuery v1.7.1 or later
 */
(function(b){b.fn.filer=function(a){return this.each(function(f,w){var x=b(w),l=".jFiler",v=b(),t=b(),r=b(),p=[],o=b.isFunction(a)?a(x,b.fn.filer.defaults):a,s=o&&b.isPlainObject(o)?b.extend(true,{},b.fn.filer.defaults,o):b.fn.filer.defaults,n={init:function(){x.wrap('<div class="jFiler"></div>');n._set("props");x.prop("jFiler").boxEl=v=x.closest(l);n._changeInput()},_bindInput:function(){if(s.changeInput&&t.length>0){t.on("click",n._clickHandler)}x.on({focus:function(){t.addClass("focused")},blur:function(){t.removeClass("focused")},change:n._onChange});if(s.dragDrop){s.dragDrop.dragContainer.on("drag dragstart dragend dragover dragenter dragleave drop",function(c){c.preventDefault();c.stopPropagation()});s.dragDrop.dragContainer.on("drop",n._dragDrop.drop);s.dragDrop.dragContainer.on("dragover",n._dragDrop.dragEnter);s.dragDrop.dragContainer.on("dragleave",n._dragDrop.dragLeave)}if(s.uploadFile&&s.clipBoardPaste){b(window).on("paste",n._clipboardPaste)}},_unbindInput:function(c){if(s.changeInput&&t.length>0){t.off("click",n._clickHandler)}if(c){x.off("change",n._onChange);if(s.dragDrop){s.dragDrop.dragContainer.off("drop",n._dragDrop.drop);s.dragDrop.dragContainer.off("dragover",n._dragDrop.dragEnter);s.dragDrop.dragContainer.off("dragleave",n._dragDrop.dragLeave)}if(s.uploadFile&&s.clipBoardPaste){b(window).off("paste",n._clipboardPaste)}}},_clickHandler:function(){if(!s.uploadFile&&s.addMore&&x.val().length!=0){n._unbindInput(true);var c=b('<input type="file" />');var d=x.prop("attributes");b.each(d,function(){if(this.name=="required"){return}c.attr(this.name,this.value)});x.after(c);p.push(c);x=c;n._bindInput();n._set("props")}x.click()},_applyAttrSettings:function(){var e=["name","limit","maxSize","fileMaxSize","extensions","changeInput","showThumbs","appendTo","theme","addMore","excludeName","files","uploadUrl","uploadData","options"];for(var d in e){var c="data-jfiler-"+e[d];if(n._assets.hasAttr(c)){switch(e[d]){case"changeInput":case"showThumbs":case"addMore":s[e[d]]=(["true","false"].indexOf(x.attr(c))>-1?x.attr(c)=="true":x.attr(c));break;case"extensions":s[e[d]]=x.attr(c).replace(/ /g,"").split(",");break;case"uploadUrl":if(s.uploadFile){s.uploadFile.url=x.attr(c)}break;case"uploadData":if(s.uploadFile){s.uploadFile.data=JSON.parse(x.attr(c))}break;case"files":case"options":s[e[d]]=JSON.parse(x.attr(c));break;default:s[e[d]]=x.attr(c)}x.removeAttr(c)}}},_changeInput:function(){n._applyAttrSettings();s.beforeRender!=null&&typeof s.beforeRender=="function"?s.beforeRender(v,x):null;if(s.theme){v.addClass("jFiler-theme-"+s.theme)}if(x.get(0).tagName.toLowerCase()!="input"&&x.get(0).type!="file"){t=x;x=b('<input type="file" name="'+s.name+'" />');x.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"});v.prepend(x);n._isGn=x}else{if(s.changeInput){switch(typeof s.changeInput){case"boolean":t=b('<div class="jFiler-input"><div class="jFiler-input-caption"><span>'+s.captions.feedback+'</span></div><div class="jFiler-input-button">'+s.captions.button+'</div></div>"');break;case"string":case"object":t=b(s.changeInput);break;case"function":t=b(s.changeInput(v,x,s));break}x.after(t);x.css({position:"absolute",left:"-9999px",top:"-9999px","z-index":"-9999"})}}x.prop("jFiler").newInputEl=t;if(s.dragDrop){s.dragDrop.dragContainer=s.dragDrop.dragContainer?b(s.dragDrop.dragContainer):t}if(!s.limit||(s.limit&&s.limit>=2)){x.attr("multiple","multiple");x.attr("name").slice(-2)!="[]"?x.attr("name",x.attr("name")+"[]"):null}if(!x.attr("disabled")&&!s.disabled){s.disabled=false;n._bindInput();v.removeClass("jFiler-disabled")}else{s.disabled=true;n._unbindInput(true);v.addClass("jFiler-disabled")}if(s.files){n._append(false,{files:s.files})}s.afterRender!=null&&typeof s.afterRender=="function"?s.afterRender(r,v,t,x):null},_clear:function(){n.files=null;x.prop("jFiler").files=null;if(!s.uploadFile&&!s.addMore){n._reset()}n._set("feedback",(n._itFl&&n._itFl.length>0?n._itFl.length+" "+s.captions.feedback2:s.captions.feedback));s.onEmpty!=null&&typeof s.onEmpty=="function"?s.onEmpty(v,t,x):null},_reset:function(d){if(!d){if(!s.uploadFile&&s.addMore){for(var c=0;c<p.length;c++){p[c].remove()}p=[];n._unbindInput(true);if(n._isGn){x=n._isGn}else{x=b(w)}n._bindInput()}n._set("input","")}n._itFl=[];n._itFc=null;n._ajFc=0;n._set("props");x.prop("jFiler").files_list=n._itFl;x.prop("jFiler").current_file=n._itFc;n._itFr=[];v.find("input[name^='jfiler-items-exclude-']:hidden").remove();r.fadeOut("fast",function(){b(this).remove()});x.prop("jFiler").listEl=r=b()},_set:function(d,c){switch(d){case"input":x.val(c);break;case"feedback":if(t.length>0){t.find(".jFiler-input-caption span").html(c)}break;case"props":if(!x.prop("jFiler")){x.prop("jFiler",{options:s,listEl:r,boxEl:v,newInputEl:t,inputEl:x,files:n.files,files_list:n._itFl,current_file:n._itFc,append:function(e){return n._append(false,{files:[e]})},enable:function(){if(!s.disabled){return}s.disabled=false;x.removeAttr("disabled");v.removeClass("jFiler-disabled");n._bindInput()},disable:function(){if(s.disabled){return}s.disabled=true;v.addClass("jFiler-disabled");n._unbindInput(true)},remove:function(e){n._remove(null,{binded:true,data:{id:e}});return true},reset:function(){n._reset();n._clear();return true},retry:function(e){return n._retryUpload(e)}})}}},_filesCheck:function(){var e=0;if(s.limit&&n.files.length+n._itFl.length>s.limit){s.dialogs.alert(n._assets.textParse(s.captions.errors.filesLimit));return false}for(var g=0;g<n.files.length;g++){var h=n.files[g],c=h.name.split(".").pop().toLowerCase(),d={name:h.name,size:h.size,size2:n._assets.bytesToSize(h.size),type:h.type,ext:c};if(s.extensions!=null&&b.inArray(c,s.extensions)==-1&&b.inArray(d.type,s.extensions)==-1){s.dialogs.alert(n._assets.textParse(s.captions.errors.filesType,d));return false}if((s.maxSize!=null&&n.files[g].size>s.maxSize*1048576)||(s.fileMaxSize!=null&&n.files[g].size>s.fileMaxSize*1048576)){s.dialogs.alert(n._assets.textParse(s.captions.errors.filesSize,d));return false}if(h.size==4096&&h.type.length==0){s.dialogs.alert(n._assets.textParse(s.captions.errors.folderUpload,d));return false}if(s.onFileCheck!=null&&typeof s.onFileCheck=="function"?s.onFileCheck(d,s,n._assets.textParse)===false:null){return false}if((s.uploadFile||s.addMore)&&!s.allowDuplicates){var d=n._itFl.filter(function(i,j){if(i.file.name==h.name&&i.file.size==h.size&&i.file.type==h.type&&(h.lastModified?i.file.lastModified==h.lastModified:true)){return true}});if(d.length>0){if(n.files.length==1){return false}else{h._pendRemove=true}}}e+=n.files[g].size}if(s.maxSize!=null&&e>=Math.round(s.maxSize*1048576)){s.dialogs.alert(n._assets.textParse(s.captions.errors.filesSizeAll));return false}return true},_thumbCreator:{create:function(u){var c=n.files[u],e=(n._itFc?n._itFc.id:u),h=c.name,j=c.size,g=c.file,k=c.type?c.type.split("/",1):"".toString().toLowerCase(),d=h.indexOf(".")!=-1?h.split(".").pop().toLowerCase():"",m=s.uploadFile?'<div class="jFiler-jProgressBar">'+s.templates.progressBar+"</div>":"",i={id:e,name:h,size:j,size2:n._assets.bytesToSize(j),url:g,type:k,extension:d,icon:n._assets.getIcon(d,k),icon2:n._thumbCreator.generateIcon({type:k,extension:d}),image:'<div class="jFiler-item-thumb-image fi-loading"></div>',progressBar:m,_appended:c._appended},q="";if(c.opts){i=b.extend({},c.opts,i)}q=b(n._thumbCreator.renderContent(i)).attr("data-jfiler-index",e);q.get(0).jfiler_id=e;n._thumbCreator.renderFile(c,q,i);if(c.forList){return q}n._itFc.html=q;q.hide()[s.templates.itemAppendToEnd?"appendTo":"prependTo"](r.find(s.templates._selectors.list)).show();if(!c._appended){n._onSelect(u)}},renderContent:function(c){return n._assets.textParse((c._appended?s.templates.itemAppend:s.templates.item),c)},renderFile:function(i,c,g){if(c.find(".jFiler-item-thumb-image").length==0){return false}if(i.file&&g.type=="image"){var h='<img src="'+i.file+'" draggable="false" />',e=c.find(".jFiler-item-thumb-image.fi-loading");b(h).error(function(){h=n._thumbCreator.generateIcon(g);c.addClass("jFiler-no-thumbnail");e.removeClass("fi-loading").html(h)}).load(function(){e.removeClass("fi-loading").html(h)});return true}if(window.File&&window.FileList&&window.FileReader&&g.type=="image"&&g.size<10000000){var d=new FileReader;d.onload=function(j){var u=c.find(".jFiler-item-thumb-image.fi-loading");if(s.templates.canvasImage){var m=document.createElement("canvas"),k=m.getContext("2d"),q=new Image();q.onload=function(){var R=u.height(),N=u.width(),y=q.height/R,V=q.width/N,L=y<V?y:V,M=q.height/L,P=q.width/L,T=Math.ceil(Math.log(q.width/P)/Math.log(2));m.height=R;m.width=N;if(q.width<m.width||q.height<m.height||T<=1){var S=q.width<m.width?m.width/2-q.width/2:q.width>m.width?-(q.width-m.width)/2:0,U=q.height<m.height?m.height/2-q.height/2:0;k.drawImage(q,S,U,q.width,q.height)}else{var O=document.createElement("canvas"),Q=O.getContext("2d");O.width=q.width*0.5;O.height=q.height*0.5;Q.fillStyle="#fff";Q.fillRect(0,0,O.width,O.height);Q.drawImage(q,0,0,O.width,O.height);Q.drawImage(O,0,0,O.width*0.5,O.height*0.5);k.drawImage(O,P>m.width?P-m.width:0,0,O.width*0.5,O.height*0.5,0,0,P,M)}u.removeClass("fi-loading").html('<img src="'+m.toDataURL("image/png")+'" draggable="false" />')};q.onerror=function(){c.addClass("jFiler-no-thumbnail");u.removeClass("fi-loading").html(n._thumbCreator.generateIcon(g))};q.src=j.target.result}else{u.removeClass("fi-loading").html('<img src="'+j.target.result+'" draggable="false" />')}};d.readAsDataURL(i)}else{var h=n._thumbCreator.generateIcon(g),e=c.find(".jFiler-item-thumb-image.fi-loading");c.addClass("jFiler-no-thumbnail");e.removeClass("fi-loading").html(h)}},generateIcon:function(g){var d=new Array(3);if(g&&g.type&&g.type[0]&&g.extension){switch(g.type[0]){case"image":d[0]="f-image";d[1]='<i class="icon-jfi-file-image"></i>';break;case"video":d[0]="f-video";d[1]='<i class="icon-jfi-file-video"></i>';break;case"audio":d[0]="f-audio";d[1]='<i class="icon-jfi-file-audio"></i>';break;default:d[0]="f-file f-file-ext-"+g.extension;d[1]=(g.extension.length>0?"."+g.extension:"");d[2]=1}}else{d[0]="f-file";d[1]=(g.extension&&g.extension.length>0?"."+g.extension:"");d[2]=1}var h='<span class="jFiler-icon-file '+d[0]+'">'+d[1]+"</span>";if(d[2]==1){var e=n._assets.text2Color(g.extension);if(e){var c=b(h).appendTo("body");c.css("background-color",n._assets.text2Color(g.extension));h=c.prop("outerHTML");c.remove()}}return h},_box:function(e){if(s.beforeShow!=null&&typeof s.beforeShow=="function"?!s.beforeShow(n.files,r,v,t,x):false){return false}if(r.length<1){if(s.appendTo){var d=b(s.appendTo)}else{var d=v}d.find(".jFiler-items").remove();r=b('<div class="jFiler-items jFiler-row"></div>');x.prop("jFiler").listEl=r;r.append(n._assets.textParse(s.templates.box)).appendTo(d);r.on("click",s.templates._selectors.remove,function(h){h.preventDefault();var i=[e?e.remove.event:h,e?e.remove.el:b(this).closest(s.templates._selectors.item)],g=function(j){n._remove(i[0],i[1])};if(s.templates.removeConfirmation){s.dialogs.confirm(s.captions.removeConfirmation,g)}else{g()}})}for(var c=0;c<n.files.length;c++){if(!n.files[c]._appended){n.files[c]._choosed=true}n._addToMemory(c);n._thumbCreator.create(c)}}},_upload:function(c){var e=n._itFl[c],h=e.html,g=new FormData();g.append(x.attr("name"),e.file,(e.file.name?e.file.name:false));if(s.uploadFile.data!=null&&b.isPlainObject(typeof(s.uploadFile.data)=="function"?s.uploadFile.data(e.file):s.uploadFile.data)){for(var d in s.uploadFile.data){g.append(d,s.uploadFile.data[d])}}n._ajax.send(h,g,e)},_ajax:{send:function(d,c,e){e.ajax=b.ajax({url:s.uploadFile.url,data:c,type:s.uploadFile.type,enctype:s.uploadFile.enctype,xhr:function(){var g=b.ajaxSettings.xhr();if(g.upload){g.upload.addEventListener("progress",function(h){n._ajax.progressHandling(h,d)},false)}return g},complete:function(h,g){e.ajax=false;n._ajFc++;if(s.uploadFile.synchron&&e.id+1<n._itFl.length){n._upload(e.id+1)}if(n._ajFc>=n.files.length){n._ajFc=0;x.get(0).value="";s.uploadFile.onComplete!=null&&typeof s.uploadFile.onComplete=="function"?s.uploadFile.onComplete(r,v,t,x,h,g):null}},beforeSend:function(g,h){return s.uploadFile.beforeSend!=null&&typeof s.uploadFile.beforeSend=="function"?s.uploadFile.beforeSend(d,r,v,t,x,e.id,g,h):true},success:function(h,g,i){e.uploaded=true;s.uploadFile.success!=null&&typeof s.uploadFile.success=="function"?s.uploadFile.success(h,d,r,v,t,x,e.id,g,i):null},error:function(i,g,h){e.uploaded=false;s.uploadFile.error!=null&&typeof s.uploadFile.error=="function"?s.uploadFile.error(d,r,v,t,x,e.id,i,g,h):null},statusCode:s.uploadFile.statusCode,cache:false,contentType:false,processData:false});return e.ajax},progressHandling:function(e,c){if(e.lengthComputable){var d=Math.round(e.loaded*100/e.total).toString();s.uploadFile.onProgress!=null&&typeof s.uploadFile.onProgress=="function"?s.uploadFile.onProgress(d,c,r,v,t,x):null;c.find(".jFiler-jProgressBar").find(s.templates._selectors.progressBar).css("width",d+"%")}}},_dragDrop:{dragEnter:function(c){clearTimeout(n._dragDrop._drt);s.dragDrop.dragContainer.addClass("dragged");n._set("feedback",s.captions.drop);s.dragDrop.dragEnter!=null&&typeof s.dragDrop.dragEnter=="function"?s.dragDrop.dragEnter(c,t,x,v):null},dragLeave:function(c){clearTimeout(n._dragDrop._drt);n._dragDrop._drt=setTimeout(function(d){if(!n._dragDrop._dragLeaveCheck(d)){n._dragDrop.dragLeave(d);return false}s.dragDrop.dragContainer.removeClass("dragged");n._set("feedback",s.captions.feedback);s.dragDrop.dragLeave!=null&&typeof s.dragDrop.dragLeave=="function"?s.dragDrop.dragLeave(d,t,x,v):null},100,c)},drop:function(c){clearTimeout(n._dragDrop._drt);s.dragDrop.dragContainer.removeClass("dragged");n._set("feedback",s.captions.feedback);if(c&&c.originalEvent&&c.originalEvent.dataTransfer&&c.originalEvent.dataTransfer.files&&c.originalEvent.dataTransfer.files.length>0){n._onChange(c,c.originalEvent.dataTransfer.files)}s.dragDrop.drop!=null&&typeof s.dragDrop.drop=="function"?s.dragDrop.drop(c.originalEvent.dataTransfer.files,c,t,x,v):null},_dragLeaveCheck:function(c){var d=b(c.currentTarget),e=0;if(!d.is(t)){e=t.find(d).length;if(e>0){return false}}return true}},_clipboardPaste:function(d,i){if(!i&&(!d.originalEvent.clipboardData&&!d.originalEvent.clipboardData.items)){return}if(i&&(!d.originalEvent.dataTransfer&&!d.originalEvent.dataTransfer.items)){return}if(n._clPsePre){return}var c=(i?d.originalEvent.dataTransfer.items:d.originalEvent.clipboardData.items),g=function(j,k,H){k=k||"";H=H||512;var E=atob(j);var q=[];for(var G=0;G<E.length;G+=H){var m=E.slice(G,G+H);var u=new Array(m.length);for(var F=0;F<m.length;F++){u[F]=m.charCodeAt(F)}var I=new Uint8Array(u);q.push(I)}var J=new Blob(q,{type:k});return J};if(c){for(var h=0;h<c.length;h++){if(c[h].type.indexOf("image")!==-1||c[h].type.indexOf("text/uri-list")!==-1){if(i){try{window.atob(d.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1])}catch(d){return}}var e=(i?g(d.originalEvent.dataTransfer.getData("text/uri-list").toString().split(",")[1],"image/png"):c[h].getAsFile());e.name=Math.random().toString(36).substring(5);e.name+=e.type.indexOf("/")!=-1?"."+e.type.split("/")[1].toString().toLowerCase():".png";n._onChange(d,[e]);n._clPsePre=setTimeout(function(){delete n._clPsePre},1000)}}}},_onSelect:function(c){if(s.uploadFile&&!b.isEmptyObject(s.uploadFile)){if(!s.uploadFile.synchron||(s.uploadFile.synchron&&b.grep(n._itFl,function(d){return d.ajax}).length==0)){n._upload(n._itFc.id)}}if(n.files[c]._pendRemove){n._itFc.html.hide();n._remove(null,{binded:true,data:{id:n._itFc.id}})}s.onSelect!=null&&typeof s.onSelect=="function"?s.onSelect(n.files[c],n._itFc.html,r,v,t,x):null;if(c+1>=n.files.length){s.afterShow!=null&&typeof s.afterShow=="function"?s.afterShow(r,v,t,x):null}},_onChange:function(c,e){if(!e){if(!x.get(0).files||typeof x.get(0).files=="undefined"||x.get(0).files.length==0){if(!s.uploadFile&&!s.addMore){n._set("input","");n._clear()}return false}n.files=x.get(0).files}else{if(!e||e.length==0){n._set("input","");n._clear();return false}n.files=e}if(!s.uploadFile&&!s.addMore){n._reset(true)}x.prop("jFiler").files=n.files;if(!n._filesCheck()||(s.beforeSelect!=null&&typeof s.beforeSelect=="function"?!s.beforeSelect(n.files,r,v,t,x):false)){n._set("input","");n._clear();if(s.addMore&&p.length>0){n._unbindInput(true);p[p.length-1].remove();p.splice(p.length-1,1);x=p.length>0?p[p.length-1]:b(w);n._bindInput()}return false}n._set("feedback",n.files.length+n._itFl.length+" "+s.captions.feedback2);if(s.showThumbs){n._thumbCreator._box()}else{for(var d=0;d<n.files.length;d++){n.files[d]._choosed=true;n._addToMemory(d);n._onSelect(d)}}},_append:function(e,g){var c=(!g?false:g.files);if(!c||c.length<=0){return}n.files=c;x.prop("jFiler").files=n.files;if(s.showThumbs){for(var d=0;d<n.files.length;d++){n.files[d]._appended=true}n._thumbCreator._box()}},_getList:function(e,g){var h=(!g?false:g.files);if(!h||h.length<=0){return}n.files=h;x.prop("jFiler").files=n.files;if(s.showThumbs){var c=[];for(var d=0;d<n.files.length;d++){n.files[d].forList=true;c.push(n._thumbCreator.create(d))}if(g.callback){g.callback(c,r,v,t,x)}}},_retryUpload:function(g,d){var e=parseInt(typeof d=="object"?d.attr("data-jfiler-index"):d),c=n._itFl.filter(function(h,i){return h.id==e});if(c.length>0){if(s.uploadFile&&!b.isEmptyObject(s.uploadFile)&&!c[0].uploaded){n._itFc=c[0];x.prop("jFiler").current_file=n._itFc;n._upload(e);return true}}else{return false}},_remove:function(h,j){if(j.binded){if(typeof(j.data.id)!="undefined"){j=r.find(s.templates._selectors.item+"[data-jfiler-index='"+j.data.id+"']");if(j.length==0){return false}}if(j.data.el){j=j.data.el}}var g=function(k){var m=v.find("input[name^='jfiler-items-exclude-']:hidden").first();if(m.length==0){m=b('<input type="hidden" name="jfiler-items-exclude-'+(s.excludeName?s.excludeName:(x.attr("name").slice(-2)!="[]"?x.attr("name"):x.attr("name").substring(0,x.attr("name").length-2))+"-"+f)+'">');m.appendTo(v)}if(k&&b.isArray(k)){k=JSON.stringify(k);m.val(k)}},d=function(m,A){var k=n._itFl[A],B=[];if(k.file._choosed||k.file._appended||k.uploaded){n._itFr.push(k);var u=n._itFl.filter(function(y){return y.file.name==k.file.name});for(var q=0;q<n._itFr.length;q++){if(s.addMore&&n._itFr[q]==k&&u.length>0){n._itFr[q].remove_name=u.indexOf(k)+"://"+n._itFr[q].file.name}B.push(n._itFr[q].remove_name?n._itFr[q].remove_name:n._itFr[q].file.name)}}g(B);n._itFl.splice(A,1);if(n._itFl.length<1){n._reset();n._clear()}else{n._set("feedback",n._itFl.length+" "+s.captions.feedback2)}m.fadeOut("fast",function(){b(this).remove()})};var i=j.get(0).jfiler_id||j.attr("data-jfiler-index"),e=null;for(var c in n._itFl){if(c==="length"||!n._itFl.hasOwnProperty(c)){continue}if(n._itFl[c].id==i){e=c}}if(!n._itFl.hasOwnProperty(e)){return false}if(n._itFl[e].ajax){n._itFl[e].ajax.abort();d(j,e);return}if(s.onRemove!=null&&typeof s.onRemove=="function"?s.onRemove(j,n._itFl[e].file,e,r,v,t,x)!==false:true){d(j,e)}},_addToMemory:function(c){n._itFl.push({id:n._itFl.length,file:n.files[c],html:b(),ajax:false,uploaded:false});if(s.addMore||n.files[c]._appended){n._itFl[n._itFl.length-1].input=x}n._itFc=n._itFl[n._itFl.length-1];x.prop("jFiler").files_list=n._itFl;x.prop("jFiler").current_file=n._itFc},_assets:{bytesToSize:function(d){if(d==0){return"0 Byte"}var c=1000;var e=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var g=Math.floor(Math.log(d)/Math.log(c));return(d/Math.pow(c,g)).toPrecision(3)+" "+e[g]},hasAttr:function(d,e){var e=(!e?x:e),c=e.attr(d);if(!c||typeof c=="undefined"){return false}else{return true}},getIcon:function(e,c){var d=["audio","image","text","video"];if(b.inArray(c,d)>-1){return'<i class="icon-jfi-file-'+c+" jfi-file-ext-"+e+'"></i>'}return'<i class="icon-jfi-file-o jfi-file-type-'+c+" jfi-file-ext-"+e+'"></i>'},textParse:function(c,d){d=b.extend({},{limit:s.limit,maxSize:s.maxSize,fileMaxSize:s.fileMaxSize,extensions:s.extensions?s.extensions.join(","):null},(d&&b.isPlainObject(d)?d:{}),s.options);switch(typeof(c)){case"string":return c.replace(/\{\{fi-(.*?)\}\}/g,function(e,g){g=g.replace(/ /g,"");if(g.match(/(.*?)\|limitTo\:(\d+)/)){return g.replace(/(.*?)\|limitTo\:(\d+)/,function(i,j,k){var j=(d[j]?d[j]:""),h=j.substring(0,k);h=(j.length>h.length?h.substring(0,h.length-3)+"...":h);return h})}else{return(d[g]?d[g]:"")}});break;case"function":return c(d);break;default:return c}},text2Color:function(e){if(!e||e.length==0){return false}for(var d=0,g=0;d<e.length;g=e.charCodeAt(d++)+((g<<5)-g)){}for(var d=0,c="#";d<3;c+=("00"+((g>>d++*2)&255).toString(16)).slice(-2)){}return c}},files:null,_itFl:[],_itFc:null,_itFr:[],_itPl:[],_ajFc:0};x.on("filer.append",function(c,d){n._append(c,d)}).on("filer.remove",function(c,d){d.binded=true;n._remove(c,d)}).on("filer.reset",function(c){n._reset();n._clear();return true}).on("filer.generateList",function(c,d){return n._getList(c,d)}).on("filer.retry",function(c,d){return n._retryUpload(c,d)});n.init();return this})};b.fn.filer.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,changeInput:true,showThumbs:false,appendTo:null,theme:"default",templates:{box:'<ul class="jFiler-items-list jFiler-items-default"></ul>',item:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title" title="{{fi-name}}">{{fi-name | limitTo:30}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status">{{fi-progressBar}}</span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',itemAppend:'<li class="jFiler-item"><div class="jFiler-item-container"><div class="jFiler-item-inner"><div class="jFiler-item-icon pull-left">{{fi-icon}}</div><div class="jFiler-item-info pull-left"><div class="jFiler-item-title">{{fi-name | limitTo:35}}</div><div class="jFiler-item-others"><span>size: {{fi-size2}}</span><span>type: {{fi-extension}}</span><span class="jFiler-item-status"></span></div><div class="jFiler-item-assets"><ul class="list-inline"><li><a class="icon-jfi-trash jFiler-item-trash-action"></a></li></ul></div></div></div></div></li>',progressBar:'<div class="bar"></div>',itemAppendToEnd:false,removeConfirmation:true,canvasImage:true,_selectors:{list:".jFiler-items-list",item:".jFiler-item",progressBar:".bar",remove:".jFiler-item-trash-action"}},files:null,uploadFile:null,dragDrop:null,addMore:false,allowDuplicates:false,clipBoardPaste:true,excludeName:null,beforeRender:null,afterRender:null,beforeShow:null,beforeSelect:null,onSelect:null,onFileCheck:null,afterShow:null,onRemove:null,onEmpty:null,options:null,dialogs:{alert:function(a){return alert(a)},confirm:function(a,d){confirm(a)?d():null}},captions:{button:"Choose Files",feedback:"Choose files To Upload",feedback2:"files were chosen",drop:"Drop file here to Upload",removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only {{fi-limit}} files are allowed to be uploaded.",filesType:"Only Images are allowed to be uploaded.",filesSize:"{{fi-name}} is too large! Please upload file up to {{fi-fileMaxSize}} MB.",filesSizeAll:"Files you've choosed are too large! Please upload files up to {{fi-maxSize}} MB.",folderUpload:"You are not allowed to upload folders."}}}})(jQuery);